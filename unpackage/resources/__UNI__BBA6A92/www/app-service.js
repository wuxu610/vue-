if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";function n(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}function i(e,n){return t.isString(e)?n:e}const r={id:"2852637",name:"uniui图标库",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},o=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};const s=o({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data:()=>({icons:r.glyphs}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?unescape(`%u${e.unicode}`):""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle({color:i.color,"font-size":s.iconSize}),class:e.normalizeClass(["uni-icons",["uniui-"+i.type,i.customPrefix,i.customPrefix?i.type:""]]),onClick:n[0]||(n[0]=(...e)=>s._onClick&&s._onClick(...e))},null,6)}],["__scopeId","data-v-f20e89ab"]]);const a=o({name:"UniNoticeBar",emits:["click","getmore","close"],props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#FFF9EA"},speed:{type:Number,default:100},color:{type:String,default:"#FF9A43"},fontSize:{type:Number,default:14},moreColor:{type:String,default:"#FF9A43"},single:{type:[Boolean,String],default:!1},scrollable:{type:[Boolean,String],default:!1},showIcon:{type:[Boolean,String],default:!1},showGetMore:{type:[Boolean,String],default:!1},showClose:{type:[Boolean,String],default:!1}},data:()=>({textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,elIdBox:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}),computed:{isShowGetMore(){return!0===this.showGetMore||"true"===this.showGetMore},isShowClose(){return!(!0!==this.showClose&&"true"!==this.showClose||!1!==this.showGetMore&&"false"!==this.showGetMore)}},mounted(){var e=getCurrentPages(),t=e[e.length-1].$getAppWebview();t.addEventListener("hide",(()=>{this.webviewHide=!0})),t.addEventListener("show",(()=>{this.webviewHide=!1})),this.$nextTick((()=>{this.initSize()}))},methods:{initSize(){if(this.scrollable){let e=[],t=new Promise(((e,t)=>{uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.textWidth=t[0].width,e()}))})),n=new Promise(((e,t)=>{uni.createSelectorQuery().in(this).select(`#${this.elIdBox}`).boundingClientRect().exec((t=>{this.boxWidth=t[0].width,e()}))}));e.push(t),e.push(n),Promise.all(e).then((()=>{this.animationDuration=this.textWidth/this.speed+"s",this.animationDelay=`-${this.boxWidth/this.speed}s`,setTimeout((()=>{this.animationPlayState="running"}),1e3)}))}},loopAnimation(){},clickMore(){this.$emit("getmore")},close(){this.show=!1,this.$emit("close")},onClick(){this.$emit("click")}}},[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-icons"),s);return a.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-noticebar",style:e.normalizeStyle({backgroundColor:r.backgroundColor}),onClick:n[1]||(n[1]=(...e)=>l.onClick&&l.onClick(...e))},[!0===r.showIcon||"true"===r.showIcon?(e.openBlock(),e.createBlock(c,{key:0,class:"uni-noticebar-icon",type:"sound",color:r.color,size:1.5*r.fontSize},null,8,["color","size"])):e.createCommentVNode("",!0),e.createElementVNode("view",{ref:"textBox",class:e.normalizeClass(["uni-noticebar__content-wrapper",{"uni-noticebar__content-wrapper--scrollable":r.scrollable,"uni-noticebar__content-wrapper--single":!r.scrollable&&(r.single||r.moreText)}]),style:e.normalizeStyle({height:r.scrollable?1.5*r.fontSize+"px":"auto"})},[e.createElementVNode("view",{id:a.elIdBox,class:e.normalizeClass(["uni-noticebar__content",{"uni-noticebar__content--scrollable":r.scrollable,"uni-noticebar__content--single":!r.scrollable&&(r.single||r.moreText)}])},[e.createElementVNode("text",{id:a.elId,ref:"animationEle",class:e.normalizeClass(["uni-noticebar__content-text",{"uni-noticebar__content-text--scrollable":r.scrollable,"uni-noticebar__content-text--single":!r.scrollable&&(r.single||r.showGetMore)}]),style:e.normalizeStyle({color:r.color,fontSize:r.fontSize+"px",lineHeight:1.5*r.fontSize+"px",width:a.wrapWidth+"px",animationDuration:a.animationDuration,"-webkit-animationDuration":a.animationDuration,animationPlayState:a.webviewHide?"paused":a.animationPlayState,"-webkit-animationPlayState":a.webviewHide?"paused":a.animationPlayState,animationDelay:a.animationDelay,"-webkit-animationDelay":a.animationDelay})},e.toDisplayString(r.text),15,["id"])],10,["id"])],6),l.isShowGetMore?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-noticebar__more uni-cursor-point",onClick:n[0]||(n[0]=(...e)=>l.clickMore&&l.clickMore(...e))},[r.moreText.length>0?(e.openBlock(),e.createElementBlock("text",{key:0,style:e.normalizeStyle({color:r.moreColor,fontSize:r.fontSize+"px"})},e.toDisplayString(r.moreText),5)):(e.openBlock(),e.createBlock(c,{key:1,type:"right",color:r.moreColor,size:1.1*r.fontSize},null,8,["color","size"]))])):e.createCommentVNode("",!0),l.isShowClose?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-noticebar-close uni-cursor-point"},[e.createVNode(c,{type:"closeempty",color:r.color,size:1.1*r.fontSize,onClick:l.close},null,8,["color","size","onClick"])])):e.createCommentVNode("",!0)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-307d2c31"]]);const l=o({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(t,n,i,r,o,s){return o.width?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle("width:"+o.width+";"+(o.square?"height:"+o.width:"")),class:"uni-grid-item"},[e.createElementVNode("view",{class:e.normalizeClass([{"uni-grid-item--border":o.showBorder,"uni-grid-item--border-top":o.showBorder&&i.index<o.column,"uni-highlight":o.highlight},"uni-grid-item__box"]),style:e.normalizeStyle({"border-right-color":o.borderColor,"border-bottom-color":o.borderColor,"border-top-color":o.borderColor}),onClick:n[0]||(n[0]=(...e)=>s._onClick&&s._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-85cd20d0"]]),c={name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,n)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}};const u=o(c,[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-grid-wrap"},[e.createElementVNode("view",{id:o.elId,ref:"uni-grid",class:e.normalizeClass(["uni-grid",{"uni-grid--border":i.showBorder}]),style:e.normalizeStyle({"border-left-color":i.borderColor})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],14,["id"])])}],["__scopeId","data-v-63f1279a"]]),d={data:()=>({navigatorBars:[{id:1,name:"ICPC联盟",icon:"vip"},{id:2,name:"竞赛",icon:"medal"},{id:3,name:"社团",icon:"staff"},{id:4,name:"面试宝典",icon:"gift"}]}),methods:{change(e){n("log","at pages/index/index.vue:35",e)}}};const h=o(d,[["render",function(t,n,r,o,c,d){const h=i(e.resolveDynamicComponent("uni-notice-bar"),a),p=i(e.resolveDynamicComponent("uni-icons"),s),f=i(e.resolveDynamicComponent("uni-grid-item"),l),m=i(e.resolveDynamicComponent("uni-grid"),u);return e.openBlock(),e.createElementBlock("view",null,[e.createVNode(h,{"show-icon":"",scrollable:"",text:"uni-app 版正式发布，开发一次，同时发布iOS、Android、H5、微信小程序、支付宝小程序、百度小程序、头条小程序等7大平台。"}),e.createVNode(m,{column:4,highlight:!0,onChange:d.change},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.navigatorBars,((t,n)=>(e.openBlock(),e.createBlock(f,{index:n,key:n},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"grid-item-box",style:{"background-color":"#fff"}},[e.createVNode(p,{type:t.icon,size:40,color:"#777"},null,8,["type"]),e.createElementVNode("text",{class:"text"},e.toDisplayString(t.name),1)])])),_:2},1032,["index"])))),128))])),_:1},8,["onChange"]),e.createElementVNode("navigator",{url:"/pages/index/crop"},"crop"),e.createElementVNode("navigator",{url:"/pages/index/mqtt"},"mqtt")])}]]);const p=e=>"number"==typeof e?e+"px":e;const f=o({name:"UniNavBar",components:{statusBar:o({name:"UniStatusBar",data:()=>({statusBarHeight:20}),mounted(){this.statusBarHeight=uni.getSystemInfoSync().statusBarHeight+"px"}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{style:e.normalizeStyle({height:o.statusBarHeight}),class:"uni-status-bar"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)}],["__scopeId","data-v-6031795b"]])},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},backgroundColor:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},height:{type:[Number,String],default:44},leftWidth:{type:[Number,String],default:60},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""}},computed:{themeBgColor(){return this.dark?this.backgroundColor?this.backgroundColor:this.dark?"#333":"#FFF":this.backgroundColor||"#FFF"},themeColor(){return this.dark?this.color?this.color:this.dark?"#fff":"#333":this.color||"#333"},navbarHeight(){return p(this.height)},leftIconWidth(){return p(this.leftWidth)},rightIconWidth(){return p(this.rightWidth)}},mounted(){uni.report&&this.stat&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft(){this.$emit("clickLeft")},onClickRight(){this.$emit("clickRight")},onClickTitle(){this.$emit("clickTitle")}}},[["render",function(t,n,r,o,a,l){const c=e.resolveComponent("status-bar"),u=i(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-navbar",{"uni-dark":r.dark,"uni-nvue-fixed":r.fixed}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-navbar__content",{"uni-navbar--fixed":r.fixed,"uni-navbar--shadow":r.shadow,"uni-navbar--border":r.border}]),style:e.normalizeStyle({"background-color":l.themeBgColor})},[r.statusBar?(e.openBlock(),e.createBlock(c,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("view",{style:e.normalizeStyle({color:l.themeColor,backgroundColor:l.themeBgColor,height:l.navbarHeight}),class:"uni-navbar__header"},[e.createElementVNode("view",{onClick:n[0]||(n[0]=(...e)=>l.onClickLeft&&l.onClickLeft(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-left",style:e.normalizeStyle({width:l.leftIconWidth})},[e.renderSlot(t.$slots,"left",{},(()=>[r.leftIcon.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__content_view"},[e.createVNode(u,{color:l.themeColor,type:r.leftIcon,size:"20"},null,8,["color","type"])])):e.createCommentVNode("",!0),r.leftText.length?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass([{"uni-navbar-btn-icon-left":!r.leftIcon.length>0},"uni-navbar-btn-text"])},[e.createElementVNode("text",{style:e.normalizeStyle({color:l.themeColor,fontSize:"12px"})},e.toDisplayString(r.leftText),5)],2)):e.createCommentVNode("",!0)]),!0)],4),e.createElementVNode("view",{class:"uni-navbar__header-container",onClick:n[1]||(n[1]=(...e)=>l.onClickTitle&&l.onClickTitle(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[r.title.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__header-container-inner"},[e.createElementVNode("text",{class:"uni-nav-bar-text uni-ellipsis-1",style:e.normalizeStyle({color:l.themeColor})},e.toDisplayString(r.title),5)])):e.createCommentVNode("",!0)]),!0)]),e.createElementVNode("view",{onClick:n[2]||(n[2]=(...e)=>l.onClickRight&&l.onClickRight(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-right",style:e.normalizeStyle({width:l.rightIconWidth})},[e.renderSlot(t.$slots,"right",{},(()=>[r.rightIcon.length?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createVNode(u,{color:l.themeColor,type:r.rightIcon,size:"22"},null,8,["color","type"])])):e.createCommentVNode("",!0),r.rightText.length&&!r.rightIcon.length?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-navbar-btn-text"},[e.createElementVNode("text",{class:"uni-nav-bar-right-text",style:e.normalizeStyle({color:l.themeColor})},e.toDisplayString(r.rightText),5)])):e.createCommentVNode("",!0)]),!0)],4)],4)],6),r.fixed?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__placeholder"},[r.statusBar?(e.openBlock(),e.createBlock(c,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-navbar__placeholder-view",style:e.normalizeStyle({height:l.navbarHeight})},null,4)])):e.createCommentVNode("",!0)],2)}],["__scopeId","data-v-4ae0b990"]]);const m=o({data:()=>({bgColor:"#2979ff",fontColor:"#ffffff",value:9}),onLoad(){uni.setNavigationBarColor({backgroundColor:this.bgColor,frontColor:this.fontColor})},methods:{btnScanCode(){uni.scanCode({scanType:["qrCode","barCode"],success(e){n("log","at pages/my/my.vue:53","success",e)},fail(e){n("log","at pages/my/my.vue:56","fail",e)}})},btnMyPic(){uni.chooseImage({extension:["png","jpg"],crop:{width:100,height:100},success(e){n("log","at pages/my/my.vue:68","success",e)},fail(e){n("log","at pages/my/my.vue:71","fail",e)}})},toLogin(){uni.navigateTo({url:"/pages/index/login"})},toMor(){uni.navigateTo({url:"/pages/my/mor"})}}},[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-icons"),s),u=i(e.resolveDynamicComponent("uni-nav-bar"),f);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"my-center"},[e.createElementVNode("view",{class:"my-setting",style:e.normalizeStyle({backgroundColor:a.bgColor})},[e.createVNode(c,{type:"scan",size:"24",class:"item",color:"#d4e4ff",onClick:l.btnScanCode},null,8,["onClick"]),e.createVNode(c,{type:"settings",size:"24",class:"item",color:"#d4e4ff"})],4),e.createElementVNode("view",{class:"my",style:e.normalizeStyle({backgroundColor:a.bgColor})},[e.createElementVNode("view",{class:"my-pic",onClick:n[0]||(n[0]=(...e)=>l.toLogin&&l.toLogin(...e))},[e.createVNode(c,{type:"person",size:"60",color:"white"}),e.createVNode(c,{class:"my-pic-upload",type:"cloud-upload",size:"18",color:"#d4e4ff",onClick:l.btnMyPic},null,8,["onClick"])]),e.createElementVNode("view",{class:"my-info"})],4)]),e.createElementVNode("view",{class:"toolbars"},[e.createElementVNode("view",{class:"toolbars-1"},[e.createElementVNode("view",{class:"box-bg"},[e.createVNode(u,{shadow:"","right-icon":"right",title:"大事件",onClickTitle:l.toMor},null,8,["onClickTitle"]),e.createVNode(u,{shadow:"","right-icon":"right",title:"开启阴影"}),e.createVNode(u,{shadow:"","right-icon":"right",title:"开启阴影"})])])])])}]]);function g(e){let t="";for(let n in e){t+=`${n}:${e[n]};`}return t}const y=o({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!0},passwordIcon:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:""}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let n in e)e[n]&&(t+=`${n} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return g({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return g({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("focus",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.$emit("change",this.val)},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-easyinput",{"uni-easyinput-error":l.msg}]),style:e.normalizeStyle(l.boxStyle)},[e.createElementVNode("view",{class:e.normalizeClass(["uni-easyinput__content",l.inputContentClass]),style:e.normalizeStyle(l.inputContentStyle)},[e.renderSlot(t.$slots,"prefixIcon",{},(()=>[r.prefixIcon?(e.openBlock(),e.createBlock(c,{key:0,class:"content-clear-icon",type:r.prefixIcon,color:"#c0c4cc",onClick:n[0]||(n[0]=e=>l.onClickIcon("prefix")),size:"22"},null,8,["type"])):e.createCommentVNode("",!0)]),!0),"textarea"===r.type?(e.openBlock(),e.createElementBlock("textarea",{key:0,class:e.normalizeClass(["uni-easyinput__content-textarea",{"input-padding":r.inputBorder}]),name:r.name,value:a.val,placeholder:r.placeholder,placeholderStyle:r.placeholderStyle,disabled:r.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:l.inputMaxlength,focus:a.focused,autoHeight:r.autoHeight,onInput:n[1]||(n[1]=(...e)=>l.onInput&&l.onInput(...e)),onBlur:n[2]||(n[2]=(...e)=>l._Blur&&l._Blur(...e)),onFocus:n[3]||(n[3]=(...e)=>l._Focus&&l._Focus(...e)),onConfirm:n[4]||(n[4]=(...e)=>l.onConfirm&&l.onConfirm(...e))},null,42,["name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight"])):(e.openBlock(),e.createElementBlock("input",{key:1,type:"password"===r.type?"text":r.type,class:"uni-easyinput__content-input",style:e.normalizeStyle(l.inputStyle),name:r.name,value:a.val,password:!a.showPassword&&"password"===r.type,placeholder:r.placeholder,placeholderStyle:r.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:r.disabled,maxlength:l.inputMaxlength,focus:a.focused,confirmType:r.confirmType,onFocus:n[5]||(n[5]=(...e)=>l._Focus&&l._Focus(...e)),onBlur:n[6]||(n[6]=(...e)=>l._Blur&&l._Blur(...e)),onInput:n[7]||(n[7]=(...e)=>l.onInput&&l.onInput(...e)),onConfirm:n[8]||(n[8]=(...e)=>l.onConfirm&&l.onConfirm(...e))},null,44,["type","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType"])),"password"===r.type&&r.passwordIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[l.isVal?(e.openBlock(),e.createBlock(c,{key:0,class:e.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===r.type}]),type:a.showPassword?"eye-slash-filled":"eye-filled",size:22,color:a.focusShow?r.primaryColor:"#c0c4cc",onClick:l.onEyes},null,8,["class","type","color","onClick"])):e.createCommentVNode("",!0)],64)):r.suffixIcon||t.$slots.suffixIcon?e.renderSlot(t.$slots,"suffixIcon",{key:3},(()=>[r.suffixIcon?(e.openBlock(),e.createBlock(c,{key:0,class:"content-clear-icon",type:r.suffixIcon,color:"#c0c4cc",onClick:n[9]||(n[9]=e=>l.onClickIcon("suffix")),size:"22"},null,8,["type"])):e.createCommentVNode("",!0)]),!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[r.clearable&&l.isVal&&!r.disabled&&"textarea"!==r.type?(e.openBlock(),e.createBlock(c,{key:0,class:e.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===r.type}]),type:"clear",size:r.clearSize,color:l.msg?"#dd524d":a.focusShow?r.primaryColor:"#c0c4cc",onClick:l.onClear},null,8,["class","size","color","onClick"])):e.createCommentVNode("",!0)],64)),e.renderSlot(t.$slots,"right",{},void 0,!0)],6)],6)}],["__scopeId","data-v-b3bc69ff"]]);const _=o({name:"uniFormsItem",options:{virtualHost:!0},provide(){return{uniFormItem:this}},inject:{form:{from:"uniForm",default:null}},props:{rules:{type:Array,default:()=>null},name:{type:[String,Array],default:""},required:{type:Boolean,default:!1},label:{type:String,default:""},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:""},errorMessage:{type:[String,Boolean],default:""},leftIcon:String,iconColor:{type:String,default:"#606266"}},data:()=>({errMsg:"",isRequired:!1,userRules:null,localLabelAlign:"left",localLabelWidth:"65px",localLabelPos:"left",border:!1,isFirstBorder:!1}),computed:{msg(){return this.errorMessage||this.errMsg}},watch:{"form.formRules"(e){this.init()},"form.labelWidth"(e){this.localLabelWidth=this._labelWidthUnit(e)},"form.labelPosition"(e){this.localLabelPos=this._labelPosition()},"form.labelAlign"(e){}},created(){this.init(!0),this.name&&this.form&&this.$watch((()=>this.form._getDataValue(this.name,this.form.localData)),((e,t)=>{if(!this.form._isEqual(e,t)){const t=this.itemSetValue(e);this.onFieldChange(t,!1)}}),{immediate:!1})},unmounted(){this.__isUnmounted=!0,this.unInit()},methods:{setRules(e=null){this.userRules=e,this.init(!1)},setValue(){},async onFieldChange(e,t=!0){const{formData:n,localData:i,errShowType:r,validateCheck:o,validateTrigger:s,_isRequiredField:a,_realName:l}=this.form,c=l(this.name);e||(e=this.form.formData[c]);const u=this.itemRules.rules&&this.itemRules.rules.length;if(!this.validator||!u||0===u)return;const d=a(this.itemRules.rules||[]);let h=null;return"bind"===s||t?(h=await this.validator.validateUpdate({[c]:e},n),d||void 0!==e&&""!==e||(h=null),h&&h.errorMessage?("undertext"===r&&(this.errMsg=h?h.errorMessage:""),"toast"===r&&uni.showToast({title:h.errorMessage||"校验错误",icon:"none"}),"modal"===r&&uni.showModal({title:"提示",content:h.errorMessage||"校验错误"})):this.errMsg="",o(h||null)):this.errMsg="",h||null},init(e=!1){const{validator:t,formRules:n,childrens:i,formData:r,localData:o,_realName:s,labelWidth:a,_getDataValue:l,_setDataValue:c}=this.form||{};if(this.localLabelAlign=this._justifyContent(),this.localLabelWidth=this._labelWidthUnit(a),this.localLabelPos=this._labelPosition(),this.isRequired=this.required,this.form&&e&&i.push(this),!t||!n)return;this.form.isFirstBorder||(this.form.isFirstBorder=!0,this.isFirstBorder=!0),this.group&&(this.group.isFirstBorder||(this.group.isFirstBorder=!0,this.isFirstBorder=!0)),this.border=this.form.border;const u=s(this.name),d=this.userRules||this.rules;"object"==typeof n&&d&&(n[u]={rules:d},t.updateSchema(n));const h=n[u]||{};this.itemRules=h,this.validator=t,this.itemSetValue(l(this.name,o)),this.isRequired=this._isRequired()},unInit(){if(this.form){const{childrens:e,formData:t,_realName:n}=this.form;e.forEach(((e,i)=>{e===this&&(this.form.childrens.splice(i,1),delete t[n(e.name)])}))}},itemSetValue(e){const t=this.form._realName(this.name),n=this.itemRules.rules||[],i=this.form._getValue(t,e,n);return this.form._setDataValue(t,this.form.formData,i),i},clearValidate(){this.errMsg=""},_isRequired(){return this.required},_justifyContent(){if(this.form){const{labelAlign:e}=this.form;let t=this.labelAlign?this.labelAlign:e;if("left"===t)return"flex-start";if("center"===t)return"center";if("right"===t)return"flex-end"}return"flex-start"},_labelWidthUnit(e){return this.num2px(this.labelWidth?this.labelWidth:e||(this.label?65:"auto"))},_labelPosition(){return this.form&&this.form.labelPosition||"left"},isTrigger:(e,t,n)=>"submit"!==e&&e?"bind":void 0===e?"bind"!==t?t?"submit":""===n?"bind":"submit":"bind":"submit",num2px:e=>"number"==typeof e?`${e}px`:e}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-forms-item",["is-direction-"+o.localLabelPos,o.border?"uni-forms-item--border":"",o.border&&o.isFirstBorder?"is-first-border":""]])},[e.renderSlot(t.$slots,"label",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-forms-item__label",{"no-label":!i.label&&!o.isRequired}]),style:e.normalizeStyle({width:o.localLabelWidth,justifyContent:o.localLabelAlign})},[o.isRequired?(e.openBlock(),e.createElementBlock("text",{key:0,class:"is-required"},"*")):e.createCommentVNode("",!0),e.createElementVNode("text",null,e.toDisplayString(i.label),1)],6)]),!0),e.createElementVNode("view",{class:"uni-forms-item__content"},[e.renderSlot(t.$slots,"default",{},void 0,!0),e.createElementVNode("view",{class:e.normalizeClass(["uni-forms-item__error",{"msg--active":s.msg}])},[e.createElementVNode("text",null,e.toDisplayString(s.msg),1)],2)])],2)}],["__scopeId","data-v-d5e423c5"]]);var b={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")};const v={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function w(e,t=""){["label"].forEach((t=>{void 0===e[t]&&(e[t]="")}));let n=t;for(let i in e){let t=new RegExp("{"+i+"}");n=n.replace(t,e[i])}return n}const k={integer:e=>k.number(e)&&parseInt(e,10)===e,string:e=>"string"==typeof e,number:e=>!isNaN(e)&&"number"==typeof e,boolean:function(e){return"boolean"==typeof e},float:function(e){return k.number(e)&&!k.integer(e)},array:e=>Array.isArray(e),object:e=>"object"==typeof e&&!k.array(e),date:e=>e instanceof Date,timestamp(e){return!(!this.integer(e)||Math.abs(e).toString().length>16)},file:e=>"string"==typeof e.url,email:e=>"string"==typeof e&&!!e.match(b.email)&&e.length<255,url:e=>"string"==typeof e&&!!e.match(b.url),pattern(e,t){try{return new RegExp(e).test(t)}catch(zt){return!1}},method:e=>"function"==typeof e,idcard:e=>"string"==typeof e&&!!e.match(b.idcard),"url-https"(e){return this.url(e)&&e.startsWith("https://")},"url-scheme":e=>e.startsWith("://"),"url-web":e=>!1};const S={required:(e,t,n)=>e.required&&function(e,t){return null==e||"string"==typeof e&&!e||!(!Array.isArray(e)||e.length)||"object"===t&&!Object.keys(e).length}(t,e.format||typeof t)?w(e,e.errorMessage||n.required):null,range(e,t,n){const{range:i,errorMessage:r}=e;let o=new Array(i.length);for(let a=0;a<i.length;a++){const e=i[a];k.object(e)&&void 0!==e.value?o[a]=e.value:o[a]=e}let s=!1;return Array.isArray(t)?s=new Set(t.concat(o)).size===o.length:o.indexOf(t)>-1&&(s=!0),s?null:w(e,r||n.enum)},rangeNumber(e,t,n){if(!k.number(t))return w(e,e.errorMessage||n.pattern.mismatch);let{minimum:i,maximum:r,exclusiveMinimum:o,exclusiveMaximum:s}=e,a=o?t<=i:t<i,l=s?t>=r:t>r;return void 0!==i&&a?w(e,e.errorMessage||n.number[o?"exclusiveMinimum":"minimum"]):void 0!==r&&l?w(e,e.errorMessage||n.number[s?"exclusiveMaximum":"maximum"]):void 0!==i&&void 0!==r&&(a||l)?w(e,e.errorMessage||n.number.range):null},rangeLength(e,t,n){if(!k.string(t)&&!k.array(t))return w(e,e.errorMessage||n.pattern.mismatch);let i=e.minLength,r=e.maxLength,o=t.length;return void 0!==i&&o<i?w(e,e.errorMessage||n.length.minLength):void 0!==r&&o>r?w(e,e.errorMessage||n.length.maxLength):void 0!==i&&void 0!==r&&(o<i||o>r)?w(e,e.errorMessage||n.length.range):null},pattern:(e,t,n)=>k.pattern(e.pattern,t)?null:w(e,e.errorMessage||n.pattern.mismatch),format(e,t,n){var i=Object.keys(k),r=v[e.format]?v[e.format]:e.format||e.arrayType;return i.indexOf(r)>-1&&!k[r](t)?w(e,e.errorMessage||n.typeError):null},arrayTypeFormat(e,t,n){if(!Array.isArray(t))return w(e,e.errorMessage||n.typeError);for(let i=0;i<t.length;i++){const r=t[i];let o=this.format(e,r,n);if(null!==o)return o}return null}};class x extends class{constructor(e){this._message=e}async validateRule(e,t,n,i,r){var o=null;let s=t.rules;if(s.findIndex((e=>e.required))<0){if(null==n)return o;if("string"==typeof n&&!n.length)return o}var a=this._message;if(void 0===s)return a.default;for(var l=0;l<s.length;l++){let c=s[l],u=this._getValidateType(c);if(Object.assign(c,{label:t.label||`["${e}"]`}),S[u]&&null!=(o=S[u](c,n,a)))break;if(c.validateExpr){let e=Date.now();if(!1===c.validateExpr(n,r,e)){o=this._getMessage(c,c.errorMessage||this._message.default);break}}if(c.validateFunction&&null!==(o=await this.validateFunction(c,n,i,r,u)))break}return null!==o&&(o=a.TAG+o),o}async validateFunction(e,t,n,i,r){let o=null;try{let s=null;const a=await e.validateFunction(e,t,i||n,(e=>{s=e}));(s||"string"==typeof a&&a||!1===a)&&(o=this._getMessage(e,s||a,r))}catch(zt){o=this._getMessage(e,zt.message,r)}return o}_getMessage(e,t,n){return w(e,t||e.errorMessage||this._message[n]||t.default)}_getValidateType(e){var t="";return e.required?t="required":e.format?t="format":e.arrayType?t="arrayTypeFormat":e.range?t="range":void 0!==e.maximum||void 0!==e.minimum?t="rangeNumber":void 0!==e.maxLength||void 0!==e.minLength?t="rangeLength":e.pattern?t="pattern":e.validateFunction&&(t="validateFunction"),t}}{constructor(e,t){super(x.message),this._schema=e,this._options=t||null}updateSchema(e){this._schema=e}async validate(e,t){let n=this._checkFieldInSchema(e);return n||(n=await this.invokeValidate(e,!1,t)),n.length?n[0]:null}async validateAll(e,t){let n=this._checkFieldInSchema(e);return n||(n=await this.invokeValidate(e,!0,t)),n}async validateUpdate(e,t){let n=this._checkFieldInSchema(e);return n||(n=await this.invokeValidateUpdate(e,!1,t)),n.length?n[0]:null}async invokeValidate(e,t,n){let i=[],r=this._schema;for(let o in r){let s=r[o],a=await this.validateRule(o,s,e[o],e,n);if(null!=a&&(i.push({key:o,errorMessage:a}),!t))break}return i}async invokeValidateUpdate(e,t,n){let i=[];for(let r in e){let o=await this.validateRule(r,this._schema[r],e[r],e,n);if(null!=o&&(i.push({key:r,errorMessage:o}),!t))break}return i}_checkFieldInSchema(e){var t=Object.keys(e),n=Object.keys(this._schema);if(new Set(t.concat(n)).size===n.length)return"";var i=t.filter((e=>n.indexOf(e)<0));return[{key:"invalid",errorMessage:w({field:JSON.stringify(i)},x.message.TAG+x.message.defaultInvalid)}]}}x.message=new function(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}};const T=(e,t,n)=>{const i=n.find((e=>{return e.format&&("int"===(t=e.format)||"double"===t||"number"===t||"timestamp"===t);var t})),r=n.find((e=>e.format&&"boolean"===e.format||"bool"===e.format));return i&&(t=t||0===t?A(Number(t))?Number(t):t:null),r&&(t=!!P(t)&&t),t},E=(e,t)=>B(t,e),C=(e,t={})=>{const n=N(e);if("object"==typeof n&&Array.isArray(n)&&n.length>1){return n.reduce(((e,t)=>e+`#${t}`),"_formdata_")}return n[0]||e},I=e=>{let t=e.replace("_formdata_#","");return t=t.split("#").map((e=>A(e)?Number(e):e)),t},D=(e,t,n)=>("object"!=typeof e||N(t).reduce(((e,t,i,r)=>i===r.length-1?(e[t]=n,null):(t in e||(e[t]=/^[0-9]{1,}$/.test(r[i+1])?[]:{}),e[t])),e),e);function N(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")}const B=(e,t,n="undefined")=>{let i=N(t).reduce(((e,t)=>(e||{})[t]),e);return i&&void 0===i?n:i},A=e=>!isNaN(Number(e)),P=e=>"boolean"==typeof e;const M=o({name:"uniForms",emits:["validate","submit"],options:{virtualHost:!0},props:{value:{type:Object,default:()=>null},modelValue:{type:Object,default:()=>null},model:{type:Object,default:()=>null},rules:{type:Object,default:()=>({})},errShowType:{type:String,default:"undertext"},validateTrigger:{type:String,default:"submit"},labelPosition:{type:String,default:"left"},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:"left"},border:{type:Boolean,default:!1}},provide(){return{uniForm:this}},data:()=>({formData:{},formRules:{}}),computed:{localData(){const e=this.model||this.modelValue||this.value;return e?(t=e,JSON.parse(JSON.stringify(t))):{};var t}},watch:{rules:{handler:function(e,t){this.setRules(e)},deep:!0,immediate:!0}},created(){getApp().$vm.$.appContext.config.globalProperties.binddata||(getApp().$vm.$.appContext.config.globalProperties.binddata=function(e,t,i){if(i)this.$refs[i].setValue(e,t);else{let i;for(let e in this.$refs){const t=this.$refs[e];if(t&&t.$options&&"uniForms"===t.$options.name){i=t;break}}if(!i)return n("error","at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:182","当前 uni-froms 组件缺少 ref 属性");i.setValue(e,t)}}),this.childrens=[],this.inputChildrens=[],this.setRules(this.rules)},methods:{setRules(e){this.formRules=Object.assign({},this.formRules,e),this.validator=new x(e)},setValue(e,t){let n=this.childrens.find((t=>t.name===e));return n?(this.formData[e]=T(0,t,this.formRules[e]&&this.formRules[e].rules||[]),n.onFieldChange(this.formData[e])):null},validate(e,t){return this.checkAll(this.formData,e,t)},validateField(e=[],t){e=[].concat(e);let n={};return this.childrens.forEach((t=>{const i=C(t.name);-1!==e.indexOf(i)&&(n=Object.assign({},n,{[i]:this.formData[i]}))})),this.checkAll(n,[],t)},clearValidate(e=[]){e=[].concat(e),this.childrens.forEach((t=>{if(0===e.length)t.errMsg="";else{const n=C(t.name);-1!==e.indexOf(n)&&(t.errMsg="")}}))},submit(e,t,i){for(let n in this.dataValue){this.childrens.find((e=>e.name===n))&&void 0===this.formData[n]&&(this.formData[n]=this._getValue(n,this.dataValue[n]))}return i||n("warn","at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:289","submit 方法即将废弃，请使用validate方法代替！"),this.checkAll(this.formData,e,t,"submit")},async checkAll(e,t,n,i){if(!this.validator)return;let r,o=[];for(let c in e){const e=this.childrens.find((e=>C(e.name)===c));e&&o.push(e)}n||"function"!=typeof t||(n=t),!n&&"function"!=typeof n&&Promise&&(r=new Promise(((e,t)=>{n=function(n,i){n?t(n):e(i)}})));let s=[],a=JSON.parse(JSON.stringify(e));for(let c in o){const e=o[c];let t=C(e.name);const n=await e.onFieldChange(a[t]);if(n&&(s.push(n),"toast"===this.errShowType||"modal"===this.errShowType))break}Array.isArray(s)&&0===s.length&&(s=null),Array.isArray(t)&&t.forEach((e=>{let t=C(e),n=E(e,this.localData);void 0!==n&&(a[t]=n)})),"submit"===i?this.$emit("submit",{detail:{value:a,errors:s}}):this.$emit("validate",s);let l={};return l=((e={},t)=>{let n=JSON.parse(JSON.stringify(e)),i={};for(let r in n){let e=I(r);D(i,e,n[r])}return i})(a,this.name),n&&"function"==typeof n&&n(s,l),r&&n?r:null},validateCheck(e){this.$emit("validate",e)},_getValue:T,_isRequiredField:e=>{let t=!1;for(let n=0;n<e.length;n++){if(e[n].required){t=!0;break}}return t},_setDataValue:(e,t,n)=>(t[e]=n,n||""),_getDataValue:E,_realName:C,_isRealName:e=>/^_formdata_#*/.test(e),_isEqual:(e,t)=>{if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var n=toString.call(e);if(n!==toString.call(t))return!1;switch(n){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}if("[object Object]"==n){var i=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(i.length!=r.length)return!1;for(var o=0;o<i.length;o++){var s=i[o];if(e[s]!==t[s])return!1}return!0}return"[object Array]"==n?e.toString()==t.toString():void 0}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-forms"},[e.createElementVNode("form",null,[e.renderSlot(t.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-41ffc5c0"]]),V="/static/logo.png";
/*!
    * pinia v2.0.33
    * (c) 2023 Eduardo San Martin Morote
    * @license MIT
    */
let O;const R=e=>O=e,L=Symbol();function j(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var U,F;(F=U||(U={})).direct="direct",F.patchObject="patch object",F.patchFunction="patch function";const z=()=>{};function q(t,n,i,r=z){t.push(n);const o=()=>{const e=t.indexOf(n);e>-1&&(t.splice(e,1),r())};return!i&&e.getCurrentScope()&&e.onScopeDispose(o),o}function $(e,...t){e.slice().forEach((e=>{e(...t)}))}function H(t,n){t instanceof Map&&n instanceof Map&&n.forEach(((e,n)=>t.set(n,e))),t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const i in n){if(!n.hasOwnProperty(i))continue;const r=n[i],o=t[i];j(o)&&j(r)&&t.hasOwnProperty(i)&&!e.isRef(r)&&!e.isReactive(r)?t[i]=H(o,r):t[i]=r}return t}const W=Symbol();const{assign:K}=Object;function J(t,n,i={},r,o,s){let a;const l=K({actions:{}},i),c={deep:!0};let u,d,h,p=e.markRaw([]),f=e.markRaw([]);const m=r.state.value[t];let g;function y(n){let i;u=d=!1,"function"==typeof n?(n(r.state.value[t]),i={type:U.patchFunction,storeId:t,events:h}):(H(r.state.value[t],n),i={type:U.patchObject,payload:n,storeId:t,events:h});const o=g=Symbol();e.nextTick().then((()=>{g===o&&(u=!0)})),d=!0,$(p,i,r.state.value[t])}s||m||(r.state.value[t]={}),e.ref({});const _=s?function(){const{state:e}=i,t=e?e():{};this.$patch((e=>{K(e,t)}))}:z;function b(e,n){return function(){R(r);const i=Array.from(arguments),o=[],s=[];function a(e){o.push(e)}function l(e){s.push(e)}let c;$(f,{args:i,name:e,store:w,after:a,onError:l});try{c=n.apply(this&&this.$id===t?this:w,i)}catch(u){throw $(s,u),u}return c instanceof Promise?c.then((e=>($(o,e),e))).catch((e=>($(s,e),Promise.reject(e)))):($(o,c),c)}}const v={_p:r,$id:t,$onAction:q.bind(null,f),$patch:y,$reset:_,$subscribe(n,i={}){const o=q(p,n,i.detached,(()=>s())),s=a.run((()=>e.watch((()=>r.state.value[t]),(e=>{("sync"===i.flush?d:u)&&n({storeId:t,type:U.direct,events:h},e)}),K({},c,i))));return o},$dispose:function(){a.stop(),p=[],f=[],r._s.delete(t)}},w=e.reactive(v);r._s.set(t,w);const k=r._e.run((()=>(a=e.effectScope(),a.run((()=>n())))));for(const T in k){const n=k[T];if(e.isRef(n)&&(x=n,!e.isRef(x)||!x.effect)||e.isReactive(n))s||(!m||j(S=n)&&S.hasOwnProperty(W)||(e.isRef(n)?n.value=m[T]:H(n,m[T])),r.state.value[t][T]=n);else if("function"==typeof n){const e=b(T,n);k[T]=e,l.actions[T]=n}}var S,x;return K(w,k),K(e.toRaw(w),k),Object.defineProperty(w,"$state",{get:()=>r.state.value[t],set:e=>{y((t=>{K(t,e)}))}}),r._p.forEach((e=>{K(w,a.run((()=>e({store:w,app:r._a,pinia:r,options:l}))))})),m&&s&&i.hydrate&&i.hydrate(w.$state,m),u=!0,d=!0,w}const Y=function(t,n,i){let r,o;const s="function"==typeof n;function a(t,i){const a=e.getCurrentInstance();(t=t||a&&e.inject(L,null))&&R(t),(t=O)._s.has(r)||(s?J(r,n,o,t):function(t,n,i,r){const{state:o,actions:s,getters:a}=n,l=i.state.value[t];let c;c=J(t,(function(){l||(i.state.value[t]=o?o():{});const n=e.toRefs(i.state.value[t]);return K(n,s,Object.keys(a||{}).reduce(((n,r)=>(n[r]=e.markRaw(e.computed((()=>{R(i);const e=i._s.get(t);return a[r].call(e,e)}))),n)),{}))}),n,i,0,!0)}(r,o,t));return t._s.get(r)}return"string"==typeof t?(r=t,o=s?i:n):(o=t,r=t.id),a.$id=r,a}("user",{state:()=>({token:"",userinfo:{id:0,state:0,userName:"",userType:"",token:"",binding:0,email:"",mobile:""}}),actions:{setToken(e){this.token=e},fillUser(e){this.userinfo=e}},persist:{enabled:!0,H5Storage:null==window?void 0:window.localStorage}}),G={baseUrl:"http://api.jqrjq.cn/",timeOut:6e3,env:"dev"},Q=e=>{const{method:t,url:i,data:r,timeout:o=G.timeOut,header:s={}}=e,a=Y().token;return a.length>0&&(s.token=a),s["content-type"]="application/json;charset=UTF-8",uni.showLoading({title:"加载中"}),new Promise(((e,o)=>{uni.request({header:s,method:t,timeout:G.timeOut,url:G.baseUrl+i,data:r,success:({data:t})=>{t.success?(uni.hideLoading(),e(t)):(uni.hideLoading(),uni.showToast({title:t.msg,duration:2e3,icon:"none"}),o(t))},fail:e=>{uni.hideLoading(),o(e),n("log","at http/request.js:47",e)},complete:()=>{uni.hideLoading(),uni.stopPullDownRefresh()}})}))},Z=(e,t)=>Q({url:e,method:"GET",data:t}),X=(e,t)=>Q({url:e,method:"POST",data:t}),ee=o({__name:"login",setup(t){const r=Y(),o=e.ref(null),s=e.reactive({email:"",password:""}),a={email:{rules:[{required:!0,errorMessage:"必填项"},{format:"email",errorMessage:"邮件格式错误"}]}},l=()=>{o.value.validate().then((e=>{X("api/mobile/elogin",s).then((e=>{if(n("log","at pages/index/login.vue:53",e),e.success){const t=e.data.userinfo;r.setToken(t.token),r.fillUser(t),uni.switchTab({url:"/pages/index/index"})}})).catch((e=>{n("log","at pages/index/login.vue:64",e)}))})).catch((e=>{n("log","at pages/index/login.vue:68",e)}))};function c(){uni.navigateTo({url:"/pages/index/register",success(e){n("log","at pages/index/login.vue:75",e)},fail(e){n("log","at pages/index/login.vue:78",e)}})}function u(){uni.checkSession({provider:"weixin",success:function(e){n("log","at pages/index/login.vue:88","checkSession成功",e)},fail:function(e){n("log","at pages/index/login.vue:91","checkSession失败",e)}}),uni.login({provider:"weixin",success:function(e){e.code,n("log","at pages/index/login.vue:101","login重新登录",{jscode:e.code,jscodeinfo:res})},fail:function(e){n("log","at pages/index/login.vue:107",e)}}),uni.getUserProfile({desc:"获取你的昵称、头像、地区及性别",success:e=>{n("log","at pages/index/login.vue:115","获取你的昵称、头像",e)},fail:e=>{n("log","at pages/index/login.vue:132",2),n("log","at pages/index/login.vue:133",e),uni.showToast({title:"您拒绝了请求,不能正常使用小程序",icon:"error",duration:2e3})}})}return(t,n)=>{const r=i(e.resolveDynamicComponent("uni-easyinput"),y),d=i(e.resolveDynamicComponent("uni-forms-item"),_),h=i(e.resolveDynamicComponent("uni-forms"),M);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"logo"},[e.createElementVNode("image",{src:V})]),e.createVNode(h,{class:"myForm",ref_key:"myForm",ref:o,modelValue:s,rules:a,style:{"text-align":"center"}},{default:e.withCtx((()=>[e.createVNode(d,{name:"email"},{default:e.withCtx((()=>[e.createVNode(r,{class:"input",modelValue:s.email,"onUpdate:modelValue":n[0]||(n[0]=e=>s.email=e),placeholder:"请输入电子邮箱","suffix-icon":"email"},null,8,["modelValue"])])),_:1}),e.createVNode(d,{name:"password"},{default:e.withCtx((()=>[e.createVNode(r,{class:"input",type:"password",modelValue:s.password,"onUpdate:modelValue":n[1]||(n[1]=e=>s.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),e.createElementVNode("button",{type:"primary",onClick:l,size:"mini"},"用户登录"),e.createElementVNode("button",{type:"primary",onClick:u,size:"mini",style:{"margin-left":"10px"}},"微信登录"),e.createElementVNode("view",{class:"logo-extra"},[e.createElementVNode("button",{type:"default",size:"mini"},"忘记密码"),e.createElementVNode("button",{type:"default",size:"mini",onClick:c},"用户注册")])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-9b0a777c"]]);let te,ne,ie=uni.getSystemInfoSync(),re=ie.screenWidth;ie.pixelRatio;let oe,se,ae,le,ce,ue,de,he,pe,fe=100,me=ie.screenWidth;const ge={data:()=>({name:"杨大宝",imageSrc:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/b31d90c0-5168-11eb-bdc1-8bd33eb6adaa.jpg",isShowImg:!1,cropperInitW:re,cropperInitH:re,cropperW:re,cropperH:re,cropperL:0,cropperT:0,transL:0,transT:0,scaleP:0,imageW:0,imageH:0,cutL:0,cutT:0,cutB:re,cutR:"100%",qualityWidth:me,innerAspectRadio:1}),onLoad:function(e){},onReady:function(){this.loadImage()},methods:{setData:function(e){let t=this;Object.keys(e).forEach((function(n){t.$set(t.$data,n,e[n])}))},getImage:function(){var e=this;uni.chooseImage({success:function(t){e.setData({imageSrc:t.tempFilePaths[0]}),e.loadImage()}})},loadImage:function(){var e=this;uni.showLoading({title:"图片加载中..."}),uni.getImageInfo({src:e.imageSrc,success:function(t){de=t.width/t.height,de>=1?(he=re,pe=re/de):(he=re*de,pe=re);let n=he>pe?he:pe;if(fe=n>fe?fe:n,de>=1){let t=Math.ceil((re/de-(re/de-fe))/2),n=t,i=Math.ceil((re-re+fe)/2),r=i;e.setData({cropperW:re,cropperH:re/de,cropperL:Math.ceil((re-re)/2),cropperT:Math.ceil((re-re/de)/2),cutL:i,cutT:t,cutR:r,cutB:n,imageW:he,imageH:pe,scaleP:he/re,qualityWidth:me,innerAspectRadio:de})}else{let t=Math.ceil((re*de-re*de)/2),n=t,i=Math.ceil((re-fe)/2),r=i;e.setData({cropperW:re*de,cropperH:re,cropperL:Math.ceil((re-re*de)/2),cropperT:Math.ceil((re-re)/2),cutL:t,cutT:i,cutR:n,cutB:r,imageW:he,imageH:pe,scaleP:he/re,qualityWidth:me,innerAspectRadio:de})}e.setData({isShowImg:!0}),uni.hideLoading()}})},contentStartMove(e){te=e.touches[0].pageX,ne=e.touches[0].pageY},contentMoveing(e){var t=1*(te-e.touches[0].pageX),n=1*(ne-e.touches[0].pageY);t>0?this.cutL-t<0&&(t=this.cutL):this.cutR+t<0&&(t=-this.cutR),n>0?this.cutT-n<0&&(n=this.cutT):this.cutB+n<0&&(n=-this.cutB),this.setData({cutL:this.cutL-t,cutT:this.cutT-n,cutR:this.cutR+t,cutB:this.cutB+n}),te=e.touches[0].pageX,ne=e.touches[0].pageY},contentTouchEnd(){},getImageInfo(){var e=this;uni.showLoading({title:"图片生成中..."});const t=uni.createCanvasContext("myCanvas");t.drawImage(e.imageSrc,0,0,he,pe),t.draw(!0,(()=>{var t=(e.cropperW-e.cutL-e.cutR)/e.cropperW*he,n=(e.cropperH-e.cutT-e.cutB)/e.cropperH*pe,i=e.cutL/e.cropperW*he,r=e.cutT/e.cropperH*pe;uni.canvasToTempFilePath({x:i,y:r,width:t,height:n,destWidth:t,destHeight:n,quality:.5,canvasId:"myCanvas",success:function(e){uni.hideLoading(),uni.previewImage({current:"",urls:[e.tempFilePath]})}})}))},dragStart(e){oe=e.touches[0].pageX,se=e.touches[0].pageY,ae=this.cutL,ce=this.cutR,ue=this.cutB,le=this.cutT},dragMove(e){switch(e.target.dataset.drag){case"right":var t=1*(oe-e.touches[0].pageX);ce+t<0&&(t=-ce),this.setData({cutR:ce+t});break;case"left":t=1*(oe-e.touches[0].pageX);ae-t<0&&(t=ae),ae-t>this.cropperW-this.cutR&&(t=ae-(this.cropperW-this.cutR)),this.setData({cutL:ae-t});break;case"top":t=1*(se-e.touches[0].pageY);le-t<0&&(t=le),le-t>this.cropperH-this.cutB&&(t=le-(this.cropperH-this.cutB)),this.setData({cutT:le-t});break;case"bottom":t=1*(se-e.touches[0].pageY);ue+t<0&&(t=-ue),this.setData({cutB:ue+t});break;case"rightBottom":var n=1*(oe-e.touches[0].pageX),i=1*(se-e.touches[0].pageY);ue+i<0&&(i=-ue),ce+n<0&&(n=-ce);let r=ue+i,o=ce+n;this.setData({cutB:r,cutR:o})}}}};const ye=o(ge,[["render",function(t,n,i,r,o,s){const a=e.resolveComponent("page-foot");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"page-body uni-content-info"},[e.createElementVNode("view",{class:"cropper-content"},[o.isShowImg?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-corpper",style:e.normalizeStyle("width:"+o.cropperInitW+"px;height:"+o.cropperInitH+"px;background:#000")},[e.createElementVNode("view",{class:"uni-corpper-content",style:e.normalizeStyle("width:"+o.cropperW+"px;height:"+o.cropperH+"px;left:"+o.cropperL+"px;top:"+o.cropperT+"px")},[e.createElementVNode("image",{src:o.imageSrc,style:e.normalizeStyle("width:"+o.cropperW+"px;height:"+o.cropperH+"px")},null,12,["src"]),e.createElementVNode("view",{class:"uni-corpper-crop-box",onTouchstart:n[19]||(n[19]=e.withModifiers(((...e)=>s.contentStartMove&&s.contentStartMove(...e)),["stop"])),onTouchmove:n[20]||(n[20]=e.withModifiers(((...e)=>s.contentMoveing&&s.contentMoveing(...e)),["stop"])),onTouchend:n[21]||(n[21]=e.withModifiers(((...e)=>s.contentTouchEnd&&s.contentTouchEnd(...e)),["stop"])),style:e.normalizeStyle("left:"+o.cutL+"px;top:"+o.cutT+"px;right:"+o.cutR+"px;bottom:"+o.cutB+"px")},[e.createElementVNode("view",{class:"uni-cropper-view-box"},[e.createElementVNode("view",{class:"uni-cropper-dashed-h"}),e.createElementVNode("view",{class:"uni-cropper-dashed-v"}),e.createElementVNode("view",{class:"uni-cropper-line-t","data-drag":"top",onTouchstart:n[0]||(n[0]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[1]||(n[1]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-line-r","data-drag":"right",onTouchstart:n[2]||(n[2]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[3]||(n[3]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-line-b","data-drag":"bottom",onTouchstart:n[4]||(n[4]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[5]||(n[5]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-line-l","data-drag":"left",onTouchstart:n[6]||(n[6]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[7]||(n[7]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-point point-t","data-drag":"top",onTouchstart:n[8]||(n[8]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[9]||(n[9]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-point point-tr","data-drag":"topTight"}),e.createElementVNode("view",{class:"uni-cropper-point point-r","data-drag":"right",onTouchstart:n[10]||(n[10]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[11]||(n[11]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-point point-rb","data-drag":"rightBottom",onTouchstart:n[12]||(n[12]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[13]||(n[13]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-point point-b","data-drag":"bottom",onTouchstart:n[14]||(n[14]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[15]||(n[15]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"])),onTouchend:n[16]||(n[16]=e.withModifiers(((...e)=>t.dragEnd&&t.dragEnd(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-point point-bl","data-drag":"bottomLeft"}),e.createElementVNode("view",{class:"uni-cropper-point point-l","data-drag":"left",onTouchstart:n[17]||(n[17]=e.withModifiers(((...e)=>s.dragStart&&s.dragStart(...e)),["stop"])),onTouchmove:n[18]||(n[18]=e.withModifiers(((...e)=>s.dragMove&&s.dragMove(...e)),["stop"]))},null,32),e.createElementVNode("view",{class:"uni-cropper-point point-lt","data-drag":"leftTop"})])],36)],4)],4)):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"cropper-config"},[e.createElementVNode("button",{type:"primary reverse",onClick:n[22]||(n[22]=(...e)=>s.getImage&&s.getImage(...e)),style:{"margin-top":"30rpx"}}," 选择图片 "),e.createElementVNode("button",{type:"warn",onClick:n[23]||(n[23]=(...e)=>s.getImageInfo&&s.getImageInfo(...e)),style:{"margin-top":"30rpx"}}," 点击生成图片 ")]),e.createElementVNode("canvas",{"canvas-id":"myCanvas",style:e.normalizeStyle("position:absolute;border: 1px solid red; width:"+o.imageW+"px;height:"+o.imageH+"px;top:-9999px;left:-9999px;")},null,4)]),e.createVNode(a,{name:o.name},null,8,["name"])])}]]);const _e=o({data:()=>({registerModel:{email:"",userName:"",password:"",repassword:"",emailCode:""},emailCode:"123456",loading:!0,rules:{email:{rules:[{required:!0,errorMessage:"必填项"},{validateFunction:function(e,t,n,i){return null==t.match(/^([0-9a-zA-Z_.-])+@([0-9a-zA-Z_.-])+.([a-zA-Z]+)$/)&&i("邮件格式不正确"),!0}}]},userName:{rules:[{required:!0,errorMessage:"必填项"},{validateFunction:function(e,t,n,i){return null==t.match(/^[a-zA-Z0-9_-]{8,20}$/)&&i("用户账号长度8到20位（字母，数字，下划线，减号）"),!0}}]},password:{rules:[{required:!0,errorMessage:"必填项"},{validateFunction:function(e,t,n,i){return null==t.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/)&&i("至少8-16个字符，1个大写字母，1个小写字母和1个数字"),!0}}]},repassword:{rules:[{required:!0,errorMessage:"必填项"},{validateFunction:function(e,t,n,i){return t!==n.password&&i("两次输入密码不一致"),!0}}]},emailCode:{rules:[{required:!0,errorMessage:"必填项"},{validateFunction:function(e,t,n,i){return t==this.emailCode&&i("邮件验证码不一致"),!0}}]}}}),onReady(){this.$refs.myForm.setRules(this.rules)},methods:{btnRegister(){this.$refs.myForm.validate().then((e=>{n("log","at pages/index/register.vue:147",e),X("api/mobile/eregister",this.registerModel).then((e=>{n("log","at pages/index/register.vue:150",e),e.success&&n("log","at pages/index/register.vue:152",e.data)})).catch((e=>{n("log","at pages/index/register.vue:155",e)}))})).catch((e=>{n("log","at pages/index/register.vue:158",e)}))}}},[["render",function(t,n,r,o,s,a){const l=i(e.resolveDynamicComponent("uni-easyinput"),y),c=i(e.resolveDynamicComponent("uni-forms-item"),_),u=i(e.resolveDynamicComponent("uni-forms"),M);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"logo"},[e.createElementVNode("image",{src:V})]),e.createVNode(u,{class:"myForm",ref:"myForm",modelValue:s.registerModel,rules:s.rules,style:{"text-align":"center"}},{default:e.withCtx((()=>[e.createVNode(c,{name:"email",required:""},{default:e.withCtx((()=>[e.createVNode(l,{class:"input",inputmode:"email",modelValue:s.registerModel.email,"onUpdate:modelValue":n[0]||(n[0]=e=>s.registerModel.email=e),placeholder:"请输入电子邮箱","suffix-icon":"email"},null,8,["modelValue"])])),_:1}),e.createVNode(c,{name:"userName",required:""},{default:e.withCtx((()=>[e.createVNode(l,{class:"input",modelValue:s.registerModel.userName,"onUpdate:modelValue":n[1]||(n[1]=e=>s.registerModel.userName=e),placeholder:"请输入用户账号","suffix-icon":"person"},null,8,["modelValue"])])),_:1}),e.createVNode(c,{name:"password",required:""},{default:e.withCtx((()=>[e.createVNode(l,{class:"input",type:"password",modelValue:s.registerModel.password,"onUpdate:modelValue":n[2]||(n[2]=e=>s.registerModel.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),e.createVNode(c,{name:"repassword",required:""},{default:e.withCtx((()=>[e.createVNode(l,{class:"input",type:"password",modelValue:s.registerModel.repassword,"onUpdate:modelValue":n[3]||(n[3]=e=>s.registerModel.repassword=e),placeholder:"请输入确认密码"},null,8,["modelValue"])])),_:1}),e.createElementVNode("button",{type:"primary",onClick:n[4]||(n[4]=(...e)=>a.btnRegister&&a.btnRegister(...e)),size:"mini"},"用户注册")])),_:1},8,["modelValue","rules"])])}]]);const be=o({name:"UniSection",emits:["click"],props:{type:{type:String,default:""},title:{type:String,required:!0,default:""},titleFontSize:{type:String,default:"14px"},titleColor:{type:String,default:"#333"},subTitle:{type:String,default:""},subTitleFontSize:{type:String,default:"12px"},subTitleColor:{type:String,default:"#999"},padding:{type:[Boolean,String],default:!1}},computed:{_padding(){return"string"==typeof this.padding?this.padding:this.padding?"10px":""}},watch:{title(e){uni.report&&""!==e&&uni.report("title",e)}},methods:{onClick(){this.$emit("click")}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-section"},[e.createElementVNode("view",{class:"uni-section-header",onClick:n[0]||(n[0]=(...e)=>s.onClick&&s.onClick(...e))},[i.type?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-section-header__decoration",i.type])},null,2)):e.renderSlot(t.$slots,"decoration",{key:1},void 0,!0),e.createElementVNode("view",{class:"uni-section-header__content"},[e.createElementVNode("text",{style:e.normalizeStyle({"font-size":i.titleFontSize,color:i.titleColor}),class:e.normalizeClass(["uni-section__content-title",{distraction:!i.subTitle}])},e.toDisplayString(i.title),7),i.subTitle?(e.openBlock(),e.createElementBlock("text",{key:0,style:e.normalizeStyle({"font-size":i.subTitleFontSize,color:i.subTitleColor}),class:"uni-section-header__content-sub"},e.toDisplayString(i.subTitle),5)):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"uni-section-header__slot-right"},[e.renderSlot(t.$slots,"right",{},void 0,!0)])]),e.createElementVNode("view",{class:"uni-section-content",style:e.normalizeStyle({padding:s._padding})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)])}],["__scopeId","data-v-62a0b6ae"]]),ve=["{","}"];const we=/^(?:\d)+/,ke=/^(?:\w)+/;const Se="zh-Hans",xe="zh-Hant",Te="en",Ee=Object.prototype.hasOwnProperty,Ce=(e,t)=>Ee.call(e,t),Ie=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,n=ve){if(!t)return[e];let i=this._caches[e];return i||(i=function(e,[t,n]){const i=[];let r=0,o="";for(;r<e.length;){let s=e[r++];if(s===t){o&&i.push({type:"text",value:o}),o="";let t="";for(s=e[r++];void 0!==s&&s!==n;)t+=s,s=e[r++];const a=s===n,l=we.test(t)?"list":a&&ke.test(t)?"named":"unknown";i.push({value:t,type:l})}else o+=s}return o&&i.push({type:"text",value:o}),i}(e,n),this._caches[e]=i),function(e,t){const n=[];let i=0;const r=Array.isArray(t)?"list":(o=t,null!==o&&"object"==typeof o?"named":"unknown");var o;if("unknown"===r)return n;for(;i<e.length;){const o=e[i];switch(o.type){case"text":n.push(o.value);break;case"list":n.push(t[parseInt(o.value,10)]);break;case"named":"named"===r&&n.push(t[o.value])}i++}return n}(i,t)}};function De(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return Se;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?Se:e.indexOf("-hant")>-1?xe:(n=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==n.indexOf(e)))?xe:Se);var n;let i=[Te,"fr","es"];t&&Object.keys(t).length>0&&(i=Object.keys(t));const r=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,i);return r||void 0}class Ne{constructor({locale:e,fallbackLocale:t,messages:n,watcher:i,formater:r}){this.locale=Te,this.fallbackLocale=Te,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=r||Ie,this.messages=n||{},this.setLocale(e||Te),i&&this.watchLocale(i)}setLocale(e){const t=this.locale;this.locale=De(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,n=!0){const i=this.messages[e];i?n?Object.assign(i,t):Object.keys(t).forEach((e=>{Ce(i,e)||(i[e]=t[e])})):this.messages[e]=t}f(e,t,n){return this.formater.interpolate(e,t,n).join("")}t(e,t,n){let i=this.message;return"string"==typeof t?(t=De(t,this.messages))&&(i=this.messages[t]):n=t,Ce(i,e)?this.formater.interpolate(i[e],n).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function Be(e,t={},n,i){"string"!=typeof e&&([e,t]=[t,e]),"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():Te),"string"!=typeof n&&(n="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||Te);const r=new Ne({locale:e,fallbackLocale:n,messages:t,watcher:i});let o=(e,t)=>{if("function"!=typeof getApp)o=function(e,t){return r.t(e,t)};else{let e=!1;o=function(t,n){const i=getApp().$vm;return i&&(i.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(i,r))),r.t(t,n)}}return o(e,t)};return{i18n:r,f:(e,t,n)=>r.f(e,t,n),t:(e,t)=>o(e,t),add:(e,t,n=!0)=>r.add(e,t,n),watch:e=>r.watchLocale(e),getLocale:()=>r.getLocale(),setLocale:e=>r.setLocale(e)}}const Ae={pages:[{path:"pages/index/index",style:{navigationBarTitleText:"uni-app"}},{path:"pages/my/my",style:{navigationBarTitleText:"用户中心",enablePullDownRefresh:!1}},{path:"pages/index/login",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/index/crop",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/index/register",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/index/mqtt",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/index/wiki",style:{navigationBarTitleText:"wiki",enablePullDownRefresh:!1}},{path:"pages/article/article",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/my/mor",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/my/addMor",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}}],globalStyle:{navigationBarTextStyle:"white",navigationBarTitleText:"uni-app",navigationBarBackgroundColor:"#1296db",backgroundColor:"#F8F8F8","app-plus":{background:"#efeff4"}},tabBar:{color:"#7A7E83",selectedColor:"#3cc51f",borderStyle:"black",backgroundColor:"#ffffff",list:[{pagePath:"pages/index/index",iconPath:"static/tabbar/home.png",selectedIconPath:"static/tabbar/home-active.png",text:"首页"},{pagePath:"pages/index/wiki",iconPath:"static/tabbar/wiki.png",selectedIconPath:"static/tabbar/wiki-active.png",text:"知识库"},{pagePath:"pages/my/my",iconPath:"static/tabbar/my.png",selectedIconPath:"static/tabbar/my-active.png",text:"用户"}]}};function Pe(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var Me=Pe((function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},r=i.lib={},o=r.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else for(o=0;o<r;o+=4)t[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,i=[],r=function(t){var n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=r(4294967296*(n||e.random()));n=987654071*a(),i.push(4294967296*a()|0)}return new s.init(i,t)}}),a=i.enc={},l=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=r/(4*o),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,c=e.min(4*l,r);if(l){for(var u=0;u<l;u+=o)this._doProcessBlock(i,u);var d=i.splice(0,l);n.sigBytes-=c}return new s.init(d,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=i.algo={};return i}(Math),n)})),Ve=Me,Oe=(Pe((function(e,t){var n;e.exports=(n=Ve,function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=s.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,s=e[t+0],l=e[t+1],p=e[t+2],f=e[t+3],m=e[t+4],g=e[t+5],y=e[t+6],_=e[t+7],b=e[t+8],v=e[t+9],w=e[t+10],k=e[t+11],S=e[t+12],x=e[t+13],T=e[t+14],E=e[t+15],C=o[0],I=o[1],D=o[2],N=o[3];C=c(C,I,D,N,s,7,a[0]),N=c(N,C,I,D,l,12,a[1]),D=c(D,N,C,I,p,17,a[2]),I=c(I,D,N,C,f,22,a[3]),C=c(C,I,D,N,m,7,a[4]),N=c(N,C,I,D,g,12,a[5]),D=c(D,N,C,I,y,17,a[6]),I=c(I,D,N,C,_,22,a[7]),C=c(C,I,D,N,b,7,a[8]),N=c(N,C,I,D,v,12,a[9]),D=c(D,N,C,I,w,17,a[10]),I=c(I,D,N,C,k,22,a[11]),C=c(C,I,D,N,S,7,a[12]),N=c(N,C,I,D,x,12,a[13]),D=c(D,N,C,I,T,17,a[14]),C=u(C,I=c(I,D,N,C,E,22,a[15]),D,N,l,5,a[16]),N=u(N,C,I,D,y,9,a[17]),D=u(D,N,C,I,k,14,a[18]),I=u(I,D,N,C,s,20,a[19]),C=u(C,I,D,N,g,5,a[20]),N=u(N,C,I,D,w,9,a[21]),D=u(D,N,C,I,E,14,a[22]),I=u(I,D,N,C,m,20,a[23]),C=u(C,I,D,N,v,5,a[24]),N=u(N,C,I,D,T,9,a[25]),D=u(D,N,C,I,f,14,a[26]),I=u(I,D,N,C,b,20,a[27]),C=u(C,I,D,N,x,5,a[28]),N=u(N,C,I,D,p,9,a[29]),D=u(D,N,C,I,_,14,a[30]),C=d(C,I=u(I,D,N,C,S,20,a[31]),D,N,g,4,a[32]),N=d(N,C,I,D,b,11,a[33]),D=d(D,N,C,I,k,16,a[34]),I=d(I,D,N,C,T,23,a[35]),C=d(C,I,D,N,l,4,a[36]),N=d(N,C,I,D,m,11,a[37]),D=d(D,N,C,I,_,16,a[38]),I=d(I,D,N,C,w,23,a[39]),C=d(C,I,D,N,x,4,a[40]),N=d(N,C,I,D,s,11,a[41]),D=d(D,N,C,I,f,16,a[42]),I=d(I,D,N,C,y,23,a[43]),C=d(C,I,D,N,v,4,a[44]),N=d(N,C,I,D,S,11,a[45]),D=d(D,N,C,I,E,16,a[46]),C=h(C,I=d(I,D,N,C,p,23,a[47]),D,N,s,6,a[48]),N=h(N,C,I,D,_,10,a[49]),D=h(D,N,C,I,T,15,a[50]),I=h(I,D,N,C,g,21,a[51]),C=h(C,I,D,N,S,6,a[52]),N=h(N,C,I,D,f,10,a[53]),D=h(D,N,C,I,w,15,a[54]),I=h(I,D,N,C,l,21,a[55]),C=h(C,I,D,N,b,6,a[56]),N=h(N,C,I,D,E,10,a[57]),D=h(D,N,C,I,y,15,a[58]),I=h(I,D,N,C,x,21,a[59]),C=h(C,I,D,N,m,6,a[60]),N=h(N,C,I,D,k,10,a[61]),D=h(D,N,C,I,p,15,a[62]),I=h(I,D,N,C,v,21,a[63]),o[0]=o[0]+C|0,o[1]=o[1]+I|0,o[2]=o[2]+D|0,o[3]=o[3]+N|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var o=e.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,l=a.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,i,r,o,s){var a=e+(t&n|~t&i)+r+s;return(a<<o|a>>>32-o)+t}function u(e,t,n,i,r,o,s){var a=e+(t&i|n&~i)+r+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,i,r,o,s){var a=e+(t^n^i)+r+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,i,r,o,s){var a=e+(n^(t|~i))+r+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(l),t.HmacMD5=o._createHmacHelper(l)}(Math),n.MD5)})),Pe((function(e,t){var n,i,r;e.exports=(i=(n=Ve).lib.Base,r=n.enc.Utf8,void(n.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,l=s.words,c=0;c<n;c++)a[c]^=1549556828,l[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))})),Pe((function(e,t){e.exports=Ve.HmacMD5}))),Re=Pe((function(e,t){e.exports=Ve.enc.Utf8})),Le=Pe((function(e,t){var n,i,r;e.exports=(r=(i=n=Ve).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var r=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)r.push(i.charAt(s>>>6*(3-a)&63));var l=i.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var i=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,l=n[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=(a|l)<<24-o%4*8,o++}return r.create(i,o)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)}));const je="FUNCTION",Ue="pending",Fe="rejected";function ze(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function qe(e){return"object"===ze(e)}function $e(e){return"function"==typeof e}function He(e){return function(){try{return e.apply(e,arguments)}catch(t){console.error(t)}}}const We="REJECTED",Ke="NOT_PENDING";class Je{constructor({createPromise:e,retryRule:t=We}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=t}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case We:return this.status===Fe;case Ke:return this.status!==Ue}}exec(){return this.needRetry?(this.status=Ue,this.promise=this.createPromise().then((e=>(this.status="fullfilled",Promise.resolve(e))),(e=>(this.status=Fe,Promise.reject(e)))),this.promise):this.promise}}function Ye(e){return e&&"string"==typeof e?JSON.parse(e):e}const Ge=Ye([]);Ye("");const Qe=Ye("[]")||[];let Ze="";try{Ze="__UNI__BBA6A92"}catch(zt){}let Xe={};function et(e,t={}){var n,i;return n=Xe,i=e,Object.prototype.hasOwnProperty.call(n,i)||(Xe[e]=t),Xe[e]}Xe=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};const tt=["invoke","success","fail","complete"],nt=et("_globalUniCloudInterceptor");function it(e,t){nt[e]||(nt[e]={}),qe(t)&&Object.keys(t).forEach((n=>{tt.indexOf(n)>-1&&function(e,t,n){let i=nt[e][t];i||(i=nt[e][t]=[]),-1===i.indexOf(n)&&$e(n)&&i.push(n)}(e,n,t[n])}))}function rt(e,t){nt[e]||(nt[e]={}),qe(t)?Object.keys(t).forEach((n=>{tt.indexOf(n)>-1&&function(e,t,n){const i=nt[e][t];if(!i)return;const r=i.indexOf(n);r>-1&&i.splice(r,1)}(e,n,t[n])})):delete nt[e]}function ot(e,t){return e&&0!==e.length?e.reduce(((e,n)=>e.then((()=>n(t)))),Promise.resolve()):Promise.resolve()}function st(e,t){return nt[e]&&nt[e][t]||[]}function at(e){it("callObject",e)}const lt=et("_globalUniCloudListener"),ct="response",ut="needLogin",dt="refreshToken",ht="clientdb",pt="cloudfunction",ft="cloudobject";function mt(e){return lt[e]||(lt[e]=[]),lt[e]}function gt(e,t){const n=mt(e);n.includes(t)||n.push(t)}function yt(e,t){const n=mt(e),i=n.indexOf(t);-1!==i&&n.splice(i,1)}function _t(e,t){const n=mt(e);for(let i=0;i<n.length;i++)(0,n[i])(t)}let bt,vt=!1;function wt(){return bt||(bt=new Promise((e=>{vt&&e(),function t(){if("function"==typeof getCurrentPages){const t=getCurrentPages();t&&t[0]&&(vt=!0,e())}vt||setTimeout((()=>{t()}),30)}()})),bt)}function kt(e){const t={};for(const n in e){const i=e[n];$e(i)&&(t[n]=He(i))}return t}class St extends Error{constructor(e){super(e.message),this.errMsg=e.message||e.errMsg||"unknown system error",this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}}var xt={request:e=>uni.request(e),uploadFile:e=>uni.uploadFile(e),setStorageSync:(e,t)=>uni.setStorageSync(e,t),getStorageSync:e=>uni.getStorageSync(e),removeStorageSync:e=>uni.removeStorageSync(e),clearStorageSync:()=>uni.clearStorageSync()};function Tt(e){return e&&Tt(e.__v_raw)||e}function Et(){return{token:xt.getStorageSync("uni_id_token")||xt.getStorageSync("uniIdToken"),tokenExpired:xt.getStorageSync("uni_id_token_expired")}}function Ct({token:e,tokenExpired:t}={}){e&&xt.setStorageSync("uni_id_token",e),t&&xt.setStorageSync("uni_id_token_expired",t)}let It,Dt;function Nt(){return It||(It=uni.getSystemInfoSync()),It}function Bt(){let e,t;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;const{scene:n,channel:i}=uni.getLaunchOptionsSync();e=i,t=n}}catch(n){}return{channel:e,scene:t}}function At(){const e=uni.getLocale&&uni.getLocale()||"en";if(Dt)return{...Dt,locale:e,LOCALE:e};const t=Nt(),{deviceId:n,osName:i,uniPlatform:r,appId:o}=t,s=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSetting"];for(let a=0;a<s.length;a++)delete t[s[a]];return Dt={PLATFORM:r,OS:i,APPID:o,DEVICEID:n,...Bt(),...t},{...Dt,locale:e,LOCALE:e}}var Pt=function(e,t){let n="";return Object.keys(e).sort().forEach((function(t){e[t]&&(n=n+"&"+t+"="+e[t])})),n=n.slice(1),Oe(n,t).toString()},Mt=function(e,t){return new Promise(((n,i)=>{t(Object.assign(e,{complete(e){e||(e={});const t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400)return i(new St({code:"SYS_ERR",message:e.errMsg||"request:fail",requestId:t}));const r=e.data;if(r.error)return i(new St({code:r.error.code,message:r.error.message,requestId:t}));r.result=r.data,r.requestId=t,delete r.data,n(r)}}))}))},Vt=function(e){return Le.stringify(Re.parse(e))},Ot={"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"};const{t:Rt}=Be({"zh-Hans":{"uniCloud.init.paramRequired":"缺少参数：{param}","uniCloud.uploadFile.fileError":"filePath应为File对象"},"zh-Hant":{"uniCloud.init.paramRequired":"缺少参数：{param}","uniCloud.uploadFile.fileError":"filePath应为File对象"},en:Ot,fr:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},es:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},ja:Ot},"zh-Hans");var Lt=class{constructor(e){["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(Rt("uniCloud.init.paramRequired",{param:t}))})),this.config=Object.assign({},{endpoint:0===e.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},e),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=xt,this._getAccessTokenPromiseHub=new Je({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((e=>{if(!e.result||!e.result.accessToken)throw new St({code:"AUTH_FAILED",message:"获取accessToken失败"});this.setAccessToken(e.result.accessToken)})),retryRule:Ke})}get hasAccessToken(){return!!this.accessToken}setAccessToken(e){this.accessToken=e}requestWrapped(e){return Mt(e,this.adapter.request)}requestAuth(e){return this.requestWrapped(e)}request(e,t){return Promise.resolve().then((()=>this.hasAccessToken?t?this.requestWrapped(e):this.requestWrapped(e).catch((t=>new Promise(((e,n)=>{!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?n(t):e()})).then((()=>this.getAccessToken())).then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)})))):this.getAccessToken().then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)}))))}rebuildRequest(e){const t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=Pt(t.data,this.config.clientSecret),t}setupRequest(e,t){const n=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};return"auth"!==t&&(n.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=Pt(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:i}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}async authorize(){await this.getAccessToken()}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(this.setupRequest(t))}getOSSUploadOptionsFromPath(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}uploadFileToOSS({url:e,formData:t,name:n,filePath:i,fileType:r,onUploadProgress:o}){return new Promise(((s,a)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:n,filePath:i,fileType:r,header:{"X-OSS-server-side-encrpytion":"AES256"},success(e){e&&e.statusCode<400?s(e):a(new St({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){a(new St({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof o&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{o({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}reportOSSUpload(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}async uploadFile({filePath:e,cloudPath:t,fileType:n="image",cloudPathAsRealPath:i=!1,onUploadProgress:r,config:o}){if("string"!==ze(t))throw new St({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new St({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new St({code:"INVALID_PARAM",message:"cloudPath不合法"});const s=o&&o.envType||this.config.envType;if(i&&("/"!==t[0]&&(t="/"+t),t.indexOf("\\")>-1))throw new St({code:"INVALID_PARAM",message:"使用cloudPath作为路径时，cloudPath不可包含“\\”"});const a=(await this.getOSSUploadOptionsFromPath({env:s,filename:i?t.split("/").pop():t,fileId:i?t:void 0})).result,l="https://"+a.cdnDomain+"/"+a.ossPath,{securityToken:c,accessKeyId:u,signature:d,host:h,ossPath:p,id:f,policy:m,ossCallbackUrl:g}=a,y={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:u,Signature:d,host:h,id:f,key:p,policy:m,success_action_status:200};if(c&&(y["x-oss-security-token"]=c),g){const e=JSON.stringify({callbackUrl:g,callbackBody:JSON.stringify({fileId:f,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});y.callback=Vt(e)}const _={url:"https://"+a.host,formData:y,fileName:"file",name:"file",filePath:e,fileType:n};if(await this.uploadFileToOSS(Object.assign({},_,{onUploadProgress:r})),g)return{success:!0,filePath:e,fileID:l};if((await this.reportOSSUpload({id:f})).success)return{success:!0,filePath:e,fileID:l};throw new St({code:"UPLOAD_FAILED",message:"文件上传失败"})}getTempFileURL({fileList:e}={}){return new Promise(((t,n)=>{Array.isArray(e)&&0!==e.length||n(new St({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),t({fileList:e.map((e=>({fileID:e,tempFileURL:e})))})}))}async getFileInfo({fileList:e}={}){if(!Array.isArray(e)||0===e.length)throw new St({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const t={method:"serverless.file.resource.info",params:JSON.stringify({id:e.map((e=>e.split("?")[0])).join(",")})};return{fileList:(await this.request(this.setupRequest(t))).result}}},jt={init(e){const t=new Lt(e),n={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return n},t.customAuth=t.auth,t}};const Ut="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";var Ft,zt;(zt=Ft||(Ft={})).local="local",zt.none="none",zt.session="session";var qt=function(){};const $t=()=>{let e;if(!Promise){e=()=>{},e.promise={};const t=()=>{throw new St({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}const t=new Promise(((t,n)=>{e=(e,i)=>e?n(e):t(i)}));return e.promise=t,e};function Ht(e){return void 0===e}function Wt(e){return"[object Null]"===Object.prototype.toString.call(e)}var Kt;!function(e){e.WEB="web",e.WX_MP="wx_mp"}(Kt||(Kt={}));const Jt={adapter:null,runtime:void 0},Yt=["anonymousUuidKey"];class Gt extends qt{constructor(){super(),Jt.adapter.root.tcbObject||(Jt.adapter.root.tcbObject={})}setItem(e,t){Jt.adapter.root.tcbObject[e]=t}getItem(e){return Jt.adapter.root.tcbObject[e]}removeItem(e){delete Jt.adapter.root.tcbObject[e]}clear(){delete Jt.adapter.root.tcbObject}}function Qt(e,t){switch(e){case"local":return t.localStorage||new Gt;case"none":return new Gt;default:return t.sessionStorage||new Gt}}class Zt{constructor(e){if(!this._storage){this._persistence=Jt.adapter.primaryStorage||e.persistence,this._storage=Qt(this._persistence,Jt.adapter);const t=`access_token_${e.env}`,n=`access_token_expire_${e.env}`,i=`refresh_token_${e.env}`,r=`anonymous_uuid_${e.env}`,o=`login_type_${e.env}`,s=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:n,refreshTokenKey:i,anonymousUuidKey:r,loginTypeKey:o,userInfoKey:s}}}updatePersistence(e){if(e===this._persistence)return;const t="local"===this._persistence;this._persistence=e;const n=Qt(e,Jt.adapter);for(const i in this.keys){const e=this.keys[i];if(t&&Yt.includes(i))continue;const r=this._storage.getItem(e);Ht(r)||Wt(r)||(n.setItem(e,r),this._storage.removeItem(e))}this._storage=n}setStore(e,t,n){if(!this._storage)return;const i={version:n||"localCachev1",content:t},r=JSON.stringify(i);try{this._storage.setItem(e,r)}catch(o){throw o}}getStore(e,t){try{if(!this._storage)return}catch(i){return""}t=t||"localCachev1";const n=this._storage.getItem(e);return n&&n.indexOf(t)>=0?JSON.parse(n).content:""}removeStore(e){this._storage.removeItem(e)}}const Xt={},en={};function tn(e){return Xt[e]}class nn{constructor(e,t){this.data=t||null,this.name=e}}class rn extends nn{constructor(e,t){super("error",{error:e,data:t}),this.error=e}}const on=new class{constructor(){this._listeners={}}on(e,t){return n=e,i=t,(r=this._listeners)[n]=r[n]||[],r[n].push(i),this;var n,i,r}off(e,t){return function(e,t,n){if(n&&n[e]){const i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}(e,t,this._listeners),this}fire(e,t){if(e instanceof rn)return console.error(e.error),this;const n="string"==typeof e?new nn(e,t||{}):e,i=n.name;if(this._listens(i)){n.target=this;const e=this._listeners[i]?[...this._listeners[i]]:[];for(const t of e)t.call(this,n)}return this}_listens(e){return this._listeners[e]&&this._listeners[e].length>0}};function sn(e,t){on.on(e,t)}function an(e,t={}){on.fire(e,t)}function ln(e,t){on.off(e,t)}const cn="loginStateChanged",un="loginStateExpire",dn="loginTypeChanged",hn="anonymousConverted",pn="refreshAccessToken";var fn;!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(fn||(fn={}));const mn=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],gn={"X-SDK-Version":"1.3.5"};function yn(e,t,n){const i=e[t];e[t]=function(t){const r={},o={};n.forEach((n=>{const{data:i,headers:s}=n.call(e,t);Object.assign(r,i),Object.assign(o,s)}));const s=t.data;return s&&(()=>{var e;if(e=s,"[object FormData]"!==Object.prototype.toString.call(e))t.data={...s,...r};else for(const t in r)s.append(t,r[t])})(),t.headers={...t.headers||{},...o},i.call(e,t)}}function _n(){const e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:{...gn,"x-seqid":e}}}class bn{constructor(e={}){var t;this.config=e,this._reqClass=new Jt.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`请求在${this.config.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]}),this._cache=tn(this.config.env),this._localCache=(t=this.config.env,en[t]),yn(this._reqClass,"post",[_n]),yn(this._reqClass,"upload",[_n]),yn(this._reqClass,"download",[_n])}async post(e){return await this._reqClass.post(e)}async upload(e){return await this._reqClass.upload(e)}async download(e){return await this._reqClass.download(e)}async refreshAccessToken(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=await this._refreshAccessTokenPromise}catch(n){t=n}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e}async _refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:n,loginTypeKey:i,anonymousUuidKey:r}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let o=this._cache.getStore(n);if(!o)throw new St({message:"未登录CloudBase"});const s={refresh_token:o},a=await this.request("auth.fetchAccessTokenWithRefreshToken",s);if(a.data.code){const{code:e}=a.data;if("SIGN_PARAM_INVALID"===e||"REFRESH_TOKEN_EXPIRED"===e||"INVALID_REFRESH_TOKEN"===e){if(this._cache.getStore(i)===fn.ANONYMOUS&&"INVALID_REFRESH_TOKEN"===e){const e=this._cache.getStore(r),t=this._cache.getStore(n),i=await this.send("auth.signInAnonymously",{anonymous_uuid:e,refresh_token:t});return this.setRefreshToken(i.refresh_token),this._refreshAccessToken()}an(un),this._cache.removeStore(n)}throw new St({code:a.data.code,message:`刷新access token失败：${a.data.code}`})}if(a.data.access_token)return an(pn),this._cache.setStore(e,a.data.access_token),this._cache.setStore(t,a.data.access_token_expire+Date.now()),{accessToken:a.data.access_token,accessTokenExpire:a.data.access_token_expire};a.data.refresh_token&&(this._cache.removeStore(n),this._cache.setStore(n,a.data.refresh_token),this._refreshAccessToken())}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:n}=this._cache.keys;if(!this._cache.getStore(n))throw new St({message:"refresh token不存在，登录状态异常"});let i=this._cache.getStore(e),r=this._cache.getStore(t),o=!0;return this._shouldRefreshAccessTokenHook&&!(await this._shouldRefreshAccessTokenHook(i,r))&&(o=!1),(!i||!r||r<Date.now())&&o?this.refreshAccessToken():{accessToken:i,accessTokenExpire:r}}async request(e,t,n){const i=`x-tcb-trace_${this.config.env}`;let r="application/x-www-form-urlencoded";const o={action:e,env:this.config.env,dataVersion:"2019-08-16",...t};if(-1===mn.indexOf(e)){const{refreshTokenKey:e}=this._cache.keys;this._cache.getStore(e)&&(o.access_token=(await this.getAccessToken()).accessToken)}let s;if("storage.uploadFile"===e){s=new FormData;for(let e in s)s.hasOwnProperty(e)&&void 0!==s[e]&&s.append(e,o[e]);r="multipart/form-data"}else{r="application/json",s={};for(let e in o)void 0!==o[e]&&(s[e]=o[e])}let a={headers:{"content-type":r}};n&&n.onUploadProgress&&(a.onUploadProgress=n.onUploadProgress);const l=this._localCache.getStore(i);l&&(a.headers["X-TCB-Trace"]=l);const{parse:c,inQuery:u,search:d}=t;let h={env:this.config.env};c&&(h.parse=!0),u&&(h={...u,...h});let p=function(e,t,n={}){const i=/\?/.test(t);let r="";for(let o in n)""===r?!i&&(t+="?"):r+="&",r+=`${o}=${encodeURIComponent(n[o])}`;return/^http(s)?\:\/\//.test(t+=r)?t:`${e}${t}`}(Ut,"//tcb-api.tencentcloudapi.com/web",h);d&&(p+=d);const f=await this.post({url:p,data:s,...a}),m=f.header&&f.header["x-tcb-trace"];if(m&&this._localCache.setStore(i,m),200!==Number(f.status)&&200!==Number(f.statusCode)||!f.data)throw new St({code:"NETWORK_ERROR",message:"network request error"});return f}async send(e,t={}){const n=await this.request(e,t,{onUploadProgress:t.onUploadProgress});if("ACCESS_TOKEN_EXPIRED"===n.data.code&&-1===mn.indexOf(e)){await this.refreshAccessToken();const n=await this.request(e,t,{onUploadProgress:t.onUploadProgress});if(n.data.code)throw new St({code:n.data.code,message:n.data.message});return n.data}if(n.data.code)throw new St({code:n.data.code,message:n.data.message});return n.data}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:n,refreshTokenKey:i}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(n),this._cache.setStore(i,e)}}const vn={};function wn(e){return vn[e]}class kn{constructor(e){this.config=e,this._cache=tn(e.env),this._request=wn(e.env)}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:n,refreshTokenKey:i}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(n),this._cache.setStore(i,e)}setAccessToken(e,t){const{accessTokenKey:n,accessTokenExpireKey:i}=this._cache.keys;this._cache.setStore(n,e),this._cache.setStore(i,t)}async refreshUserInfo(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}}class Sn{constructor(e){if(!e)throw new St({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=tn(this._envId),this._request=wn(this._envId),this.setUserInfo()}linkWithTicket(e){if("string"!=typeof e)throw new St({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if("string"!=typeof e)throw new St({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}async getLinkedUidList(){const{data:e}=await this._request.send("auth.getLinkedUidList",{});let t=!1;const{users:n}=e;return n.forEach((e=>{e.wxOpenId&&e.wxPublicId&&(t=!0)})),{users:n,hasPrimaryUid:t}}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}async update(e){const{nickName:t,gender:n,avatarUrl:i,province:r,country:o,city:s}=e,{data:a}=await this._request.send("auth.updateUserInfo",{nickName:t,gender:n,avatarUrl:i,province:r,country:o,city:s});this.setLocalUserInfo(a)}async refresh(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setUserInfo(){const{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((e=>{this[e]=t[e]})),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}}class xn{constructor(e){if(!e)throw new St({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=tn(e);const{refreshTokenKey:t,accessTokenKey:n,accessTokenExpireKey:i}=this._cache.keys,r=this._cache.getStore(t),o=this._cache.getStore(n),s=this._cache.getStore(i);this.credential={refreshToken:r,accessToken:o,accessTokenExpire:s},this.user=new Sn(e)}get isAnonymousAuth(){return this.loginType===fn.ANONYMOUS}get isCustomAuth(){return this.loginType===fn.CUSTOM}get isWeixinAuth(){return this.loginType===fn.WECHAT||this.loginType===fn.WECHAT_OPEN||this.loginType===fn.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}class Tn extends kn{async signIn(){this._cache.updatePersistence("local");const{anonymousUuidKey:e,refreshTokenKey:t}=this._cache.keys,n=this._cache.getStore(e)||void 0,i=this._cache.getStore(t)||void 0,r=await this._request.send("auth.signInAnonymously",{anonymous_uuid:n,refresh_token:i});if(r.uuid&&r.refresh_token){this._setAnonymousUUID(r.uuid),this.setRefreshToken(r.refresh_token),await this._request.refreshAccessToken(),an(cn),an(dn,{env:this.config.env,loginType:fn.ANONYMOUS,persistence:"local"});const e=new xn(this.config.env);return await e.user.refresh(),e}throw new St({message:"匿名登录失败"})}async linkAndRetrieveDataWithTicket(e){const{anonymousUuidKey:t,refreshTokenKey:n}=this._cache.keys,i=this._cache.getStore(t),r=this._cache.getStore(n),o=await this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:i,refresh_token:r,ticket:e});if(o.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(o.refresh_token),await this._request.refreshAccessToken(),an(hn,{env:this.config.env}),an(dn,{loginType:fn.CUSTOM,persistence:"local"}),{credential:{refreshToken:o.refresh_token}};throw new St({message:"匿名转化失败"})}_setAnonymousUUID(e){const{anonymousUuidKey:t,loginTypeKey:n}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(n,fn.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}class En extends kn{async signIn(e){if("string"!=typeof e)throw new St({code:"PARAM_ERROR",message:"ticket must be a string"});const{refreshTokenKey:t}=this._cache.keys,n=await this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(n.refresh_token)return this.setRefreshToken(n.refresh_token),await this._request.refreshAccessToken(),an(cn),an(dn,{env:this.config.env,loginType:fn.CUSTOM,persistence:this.config.persistence}),await this.refreshUserInfo(),new xn(this.config.env);throw new St({message:"自定义登录失败"})}}class Cn extends kn{async signIn(e,t){if("string"!=typeof e)throw new St({code:"PARAM_ERROR",message:"email must be a string"});const{refreshTokenKey:n}=this._cache.keys,i=await this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(n)||""}),{refresh_token:r,access_token:o,access_token_expire:s}=i;if(r)return this.setRefreshToken(r),o&&s?this.setAccessToken(o,s):await this._request.refreshAccessToken(),await this.refreshUserInfo(),an(cn),an(dn,{env:this.config.env,loginType:fn.EMAIL,persistence:this.config.persistence}),new xn(this.config.env);throw i.code?new St({code:i.code,message:`邮箱登录失败: ${i.message}`}):new St({message:"邮箱登录失败"})}async activate(e){return this._request.send("auth.activateEndUserMail",{token:e})}async resetPasswordWithToken(e,t){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})}}class In extends kn{async signIn(e,t){if("string"!=typeof e)throw new St({code:"PARAM_ERROR",message:"username must be a string"});"string"!=typeof t&&(t="",console.warn("password is empty"));const{refreshTokenKey:n}=this._cache.keys,i=await this._request.send("auth.signIn",{loginType:fn.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(n)||""}),{refresh_token:r,access_token_expire:o,access_token:s}=i;if(r)return this.setRefreshToken(r),s&&o?this.setAccessToken(s,o):await this._request.refreshAccessToken(),await this.refreshUserInfo(),an(cn),an(dn,{env:this.config.env,loginType:fn.USERNAME,persistence:this.config.persistence}),new xn(this.config.env);throw i.code?new St({code:i.code,message:`用户名密码登录失败: ${i.message}`}):new St({message:"用户名密码登录失败"})}}class Dn{constructor(e){this.config=e,this._cache=tn(e.env),this._request=wn(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),sn(dn,this._onLoginTypeChanged)}get currentUser(){const e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new Tn(this.config)}customAuthProvider(){return new En(this.config)}emailAuthProvider(){return new Cn(this.config)}usernameAuthProvider(){return new In(this.config)}async signInAnonymously(){return new Tn(this.config).signIn()}async signInWithEmailAndPassword(e,t){return new Cn(this.config).signIn(e,t)}signInWithUsernameAndPassword(e,t){return new In(this.config).signIn(e,t)}async linkAndRetrieveDataWithTicket(e){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new Tn(this.config)),sn(hn,this._onAnonymousConverted),await this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)}async signOut(){if(this.loginType===fn.ANONYMOUS)throw new St({message:"匿名用户不支持登出操作"});const{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:n}=this._cache.keys,i=this._cache.getStore(e);if(!i)return;const r=await this._request.send("auth.logout",{refresh_token:i});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(n),an(cn),an(dn,{env:this.config.env,loginType:fn.NULL,persistence:this.config.persistence}),r}async signUpWithEmailAndPassword(e,t){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})}async sendPasswordResetEmail(e){return this._request.send("auth.sendPasswordResetEmail",{email:e})}onLoginStateChanged(e){sn(cn,(()=>{const t=this.hasLoginState();e.call(this,t)}));const t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){sn(un,e.bind(this))}onAccessTokenRefreshed(e){sn(pn,e.bind(this))}onAnonymousConverted(e){sn(hn,e.bind(this))}onLoginTypeChanged(e){sn(dn,(()=>{const t=this.hasLoginState();e.call(this,t)}))}async getAccessToken(){return{accessToken:(await this._request.getAccessToken()).accessToken,env:this.config.env}}hasLoginState(){const{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new xn(this.config.env):null}async isUsernameRegistered(e){if("string"!=typeof e)throw new St({code:"PARAM_ERROR",message:"username must be a string"});const{data:t}=await this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered}getLoginState(){return Promise.resolve(this.hasLoginState())}async signInWithTicket(e){return new En(this.config).signIn(e)}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then((e=>e.code?e:{...e.data,requestId:e.seqId}))}getAuthHeader(){const{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,n=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+n}}_onAnonymousConverted(e){const{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){const{loginType:t,persistence:n,env:i}=e.data;i===this.config.env&&(this._cache.updatePersistence(n),this._cache.setStore(this._cache.keys.loginTypeKey,t))}}const Nn=function(e,t){t=t||$t();const n=wn(this.config.env),{cloudPath:i,filePath:r,onUploadProgress:o,fileType:s="image"}=e;return n.send("storage.getUploadMetadata",{path:i}).then((e=>{const{data:{url:a,authorization:l,token:c,fileId:u,cosFileId:d},requestId:h}=e,p={key:i,signature:l,"x-cos-meta-fileid":d,success_action_status:"201","x-cos-security-token":c};n.upload({url:a,data:p,file:r,name:i,fileType:s,onUploadProgress:o}).then((e=>{201===e.statusCode?t(null,{fileID:u,requestId:h}):t(new St({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${e.data}`}))})).catch((e=>{t(e)}))})).catch((e=>{t(e)})),t.promise},Bn=function(e,t){t=t||$t();const n=wn(this.config.env),{cloudPath:i}=e;return n.send("storage.getUploadMetadata",{path:i}).then((e=>{t(null,e)})).catch((e=>{t(e)})),t.promise},An=function({fileList:e},t){if(t=t||$t(),!e||!Array.isArray(e))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(let i of e)if(!i||"string"!=typeof i)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"};const n={fileid_list:e};return wn(this.config.env).send("storage.batchDeleteFile",n).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Pn=function({fileList:e},t){t=t||$t(),e&&Array.isArray(e)||t(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});let n=[];for(let r of e)"object"==typeof r?(r.hasOwnProperty("fileID")&&r.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),n.push({fileid:r.fileID,max_age:r.maxAge})):"string"==typeof r?n.push({fileid:r}):t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"});const i={file_list:n};return wn(this.config.env).send("storage.batchGetDownloadUrl",i).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Mn=async function({fileID:e},t){const n=(await Pn.call(this,{fileList:[{fileID:e,maxAge:600}]})).fileList[0];if("SUCCESS"!==n.code)return t?t(n):new Promise((e=>{e(n)}));const i=wn(this.config.env);let r=n.download_url;if(r=encodeURI(r),!t)return i.download({url:r});t(await i.download({url:r}))},Vn=function({name:e,data:t,query:n,parse:i,search:r},o){const s=o||$t();let a;try{a=t?JSON.stringify(t):""}catch(c){return Promise.reject(c)}if(!e)return Promise.reject(new St({code:"PARAM_ERROR",message:"函数名不能为空"}));const l={inQuery:n,parse:i,search:r,function_name:e,request_data:a};return wn(this.config.env).send("functions.invokeFunction",l).then((e=>{if(e.code)s(null,e);else{let n=e.data.response_data;if(i)s(null,{result:n,requestId:e.requestId});else try{n=JSON.parse(e.data.response_data),s(null,{result:n,requestId:e.requestId})}catch(t){s(new St({message:"response data must be json"}))}}return s.promise})).catch((e=>{s(e)})),s.promise},On={timeout:15e3,persistence:"session"},Rn={};class Ln{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(Jt.adapter||(this.requestClient=new Jt.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`请求在${(e.timeout||5e3)/1e3}s内未完成，已中断`})),this.config={...On,...e},!0){case this.config.timeout>6e5:console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"),this.config.timeout=100}return new Ln(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;const t=e||Jt.adapter.primaryStorage||On.persistence;var n;return t!==this.config.persistence&&(this.config.persistence=t),function(e){const{env:t}=e;Xt[t]=new Zt(e),en[t]=new Zt({...e,persistence:"local"})}(this.config),n=this.config,vn[n.env]=new bn(n),this.authObj=new Dn(this.config),this.authObj}on(e,t){return sn.apply(this,[e,t])}off(e,t){return ln.apply(this,[e,t])}callFunction(e,t){return Vn.apply(this,[e,t])}deleteFile(e,t){return An.apply(this,[e,t])}getTempFileURL(e,t){return Pn.apply(this,[e,t])}downloadFile(e,t){return Mn.apply(this,[e,t])}uploadFile(e,t){return Nn.apply(this,[e,t])}getUploadMetadata(e,t){return Bn.apply(this,[e,t])}registerExtension(e){Rn[e.name]=e}async invokeExtension(e,t){const n=Rn[e];if(!n)throw new St({message:`扩展${e} 必须先注册`});return await n.invoke(t,this)}useAdapters(e){const{adapter:t,runtime:n}=function(e){const t=(n=e,"[object Array]"===Object.prototype.toString.call(n)?e:[e]);var n;for(const i of t){const{isMatch:e,genAdapter:t,runtime:n}=i;if(e())return{adapter:t(),runtime:n}}}(e)||{};t&&(Jt.adapter=t),n&&(Jt.runtime=n)}}var jn=new Ln;function Un(e,t,n){void 0===n&&(n={});var i=/\?/.test(t),r="";for(var o in n)""===r?!i&&(t+="?"):r+="&",r+=o+"="+encodeURIComponent(n[o]);return/^http(s)?:\/\//.test(t+=r)?t:""+e+t}class Fn{post(e){const{url:t,data:n,headers:i}=e;return new Promise(((e,r)=>{xt.request({url:Un("https:",t),data:n,method:"POST",header:i,success(t){e(t)},fail(e){r(e)}})}))}upload(e){return new Promise(((t,n)=>{const{url:i,file:r,data:o,headers:s,fileType:a}=e,l=xt.uploadFile({url:Un("https:",i),name:"file",formData:Object.assign({},o),filePath:r,fileType:a,header:s,success(e){const n={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&o.success_action_status&&(n.statusCode=parseInt(o.success_action_status,10)),t(n)},fail(e){n(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((t=>{e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}const zn={setItem(e,t){xt.setStorageSync(e,t)},getItem:e=>xt.getStorageSync(e),removeItem(e){xt.removeStorageSync(e)},clear(){xt.clearStorageSync()}};var qn={genAdapter:function(){return{root:{},reqClass:Fn,localStorage:zn,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};jn.useAdapters(qn);const $n=jn,Hn=$n.init;$n.init=function(e){e.env=e.spaceId;const t=Hn.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;const n=t.auth;return t.auth=function(e){const t=n.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((e=>{var n;t[e]=(n=t[e],function(e){e=e||{};const{success:t,fail:i,complete:r}=kt(e);if(!(t||i||r))return n.call(this,e);n.call(this,e).then((e=>{t&&t(e),r&&r(e)}),(e=>{i&&i(e),r&&r(e)}))}).bind(t)})),t},t.customAuth=t.auth,t};var Wn=$n,Kn=class extends Lt{getAccessToken(){return new Promise(((e,t)=>{const n="Anonymous_Access_token";this.setAccessToken(n),e(n)}))}setupRequest(e,t){const n=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};"auth"!==t&&(n.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=Pt(n,this.config.clientSecret);const r=At();i["x-client-info"]=encodeURIComponent(JSON.stringify(r));const{token:o}=Et();return i["x-client-token"]=o,{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:JSON.parse(JSON.stringify(i))}}uploadFileToOSS({url:e,formData:t,name:n,filePath:i,fileType:r,onUploadProgress:o}){return new Promise(((s,a)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:n,filePath:i,fileType:r,success(e){e&&e.statusCode<400?s(e):a(new St({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){a(new St({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof o&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{o({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}uploadFile({filePath:e,cloudPath:t,fileType:n="image",onUploadProgress:i}){if(!t)throw new St({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});let r;return this.getOSSUploadOptionsFromPath({cloudPath:t}).then((t=>{const{url:o,formData:s,name:a}=t.result;r=t.result.fileUrl;const l={url:o,formData:s,name:a,filePath:e,fileType:n};return this.uploadFileToOSS(Object.assign({},l,{onUploadProgress:i}))})).then((()=>this.reportOSSUpload({cloudPath:t}))).then((t=>new Promise(((n,i)=>{t.success?n({success:!0,filePath:e,fileID:r}):i(new St({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))))}deleteFile({fileList:e}){const t={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:e})};return this.request(this.setupRequest(t)).then((e=>{if(e.success)return e.result;throw new St({code:"DELETE_FILE_FAILED",message:"删除文件失败"})}))}getTempFileURL({fileList:e}={}){if(!Array.isArray(e)||0===e.length)throw new St({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const t={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:e})};return this.request(this.setupRequest(t)).then((e=>{if(e.success)return{fileList:e.result.fileList.map((e=>({fileID:e.fileID,tempFileURL:e.tempFileURL})))};throw new St({code:"GET_TEMP_FILE_URL_FAILED",message:"获取临时文件链接失败"})}))}},Jn={init(e){const t=new Kn(e),n={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return n},t.customAuth=t.auth,t}};function Yn({data:e}){let t;t=At();const n=JSON.parse(JSON.stringify(e||{}));if(Object.assign(n,{clientInfo:t}),!n.uniIdToken){const{token:e}=Et();e&&(n.uniIdToken=e)}return n}const Gn=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}];var Qn=/[\\^$.*+?()[\]{}|]/g,Zn=RegExp(Qn.source);function Xn(e,t,n){return e.replace(new RegExp((i=t)&&Zn.test(i)?i.replace(Qn,"\\$&"):i,"g"),n);var i}const ei=2e4,ti={code:20101,message:"Invalid client"};function ni(e){const{errSubject:t,subject:n,errCode:i,errMsg:r,code:o,message:s,cause:a}=e||{};return new St({subject:t||n||"uni-secure-network",code:i||o||ei,message:r||s,cause:a})}let ii;function ri({secretType:e}={}){return"request"===e||"response"===e||"both"===e}function oi({name:e,data:t={}}={}){return"DCloud-clientDB"===e&&"encryption"===t.redirectTo&&"getAppClientKey"===t.action}function si({functionName:e,result:t,logPvd:n}){}function ai(e){const t=e.callFunction,n=function(n){const i=n.name;n.data=Yn.call(e,{data:n.data});const r={aliyun:"aliyun",tencent:"tcb",tcb:"tcb"}[this.config.provider],o=ri(n),s=oi(n),a=o||s;return t.call(this,n).then((e=>(e.errCode=0,!a&&si.call(this,{functionName:i,result:e,logPvd:r}),Promise.resolve(e))),(e=>(!a&&si.call(this,{functionName:i,result:e,logPvd:r}),e&&e.message&&(e.message=function({message:e="",extraInfo:t={},formatter:n=[]}={}){for(let i=0;i<n.length;i++){const{rule:r,content:o,mode:s}=n[i],a=e.match(r);if(!a)continue;let l=o;for(let e=1;e<a.length;e++)l=Xn(l,`{$${e}}`,a[e]);for(const e in t)l=Xn(l,`{${e}}`,t[e]);return"replace"===s?l:e+l}return e}({message:`[${n.name}]: ${e.message}`,formatter:Gn,extraInfo:{functionName:i}})),Promise.reject(e))))};e.callFunction=function(t){const{provider:i,spaceId:r}=e.config,o=t.name;let s,a;return t.data=t.data||{},s=n,s=s.bind(e),a=oi(t)?n.call(e,t):ri(t)?new ii({secretType:t.secretType,uniCloudIns:e}).wrapEncryptDataCallFunction(n.bind(e))(t):function({provider:e,spaceId:t,functionName:n}={}){const{appId:i,uniPlatform:r,osName:o}=Nt();let s=r;"app"===r&&(s=o);const a=function({provider:e,spaceId:t}={}){if(!Ge)return{};var n;e="tencent"===(n=e)?"tcb":n;const i=Ge.find((n=>n.provider===e&&n.spaceId===t));return i&&i.config}({provider:e,spaceId:t});if(!a||!a.accessControl||!a.accessControl.enable)return!1;const l=a.accessControl.function||{},c=Object.keys(l);if(0===c.length)return!0;const u=function(e,t){let n,i,r;for(let o=0;o<e.length;o++){const s=e[o];s!==t?"*"!==s?s.split(",").map((e=>e.trim())).indexOf(t)>-1&&(i=s):r=s:n=s}return n||i||r}(c,n);if(!u)return!1;if((l[u]||[]).find(((e={})=>e.appId===i&&(e.platform||"").toLowerCase()===s.toLowerCase())))return!0;throw console.error(`此应用[appId: ${i}, platform: ${s}]不在云端配置的允许访问的应用列表内，参考：https://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),ni(ti)}({provider:i,spaceId:r,functionName:o})?new ii({secretType:t.secretType,uniCloudIns:e}).wrapVerifyClientCallFunction(n.bind(e))(t):s(t),Object.defineProperty(a,"result",{get:()=>(console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),a}}ii=class{constructor(){throw ni({message:"Platform app is not enabled, please check whether secure network module is enabled in your manifest.json"})}};const li=Symbol("CLIENT_DB_INTERNAL");function ci(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=li,e.inspect=null,e.__v_raw=void 0,new Proxy(e,{get(e,n,i){if("_uniClient"===n)return null;if("symbol"==typeof n)return e[n];if(n in e||"string"!=typeof n){const t=e[n];return"function"==typeof t?t.bind(e):t}return t.get(e,n,i)}})}function ui(e){return{on:(t,n)=>{e[t]=e[t]||[],e[t].indexOf(n)>-1||e[t].push(n)},off:(t,n)=>{e[t]=e[t]||[];const i=e[t].indexOf(n);-1!==i&&e[t].splice(i,1)}}}const di=["db.Geo","db.command","command.aggregate"];function hi(e,t){return di.indexOf(`${e}.${t}`)>-1}function pi(e){switch(ze(e=Tt(e))){case"array":return e.map((e=>pi(e)));case"object":return e._internalType===li||Object.keys(e).forEach((t=>{e[t]=pi(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}function fi(e){return e&&e.content&&e.content.$method}class mi{constructor(e,t,n){this.content=e,this.prevStage=t||null,this.udb=null,this._database=n}toJSON(){let e=this;const t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((e=>({$method:e.$method,$param:pi(e.$param)})))}}toString(){return JSON.stringify(this.toJSON())}getAction(){const e=this.toJSON().$db.find((e=>"action"===e.$method));return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter((e=>"action"!==e.$method))}}get isAggregate(){let e=this;for(;e;){const t=fi(e),n=fi(e.prevStage);if("aggregate"===t&&"collection"===n||"pipeline"===t)return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if("command"===fi(e))return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){const t=fi(e),n=fi(e.prevStage);if("aggregate"===t&&"command"===n)return!0;e=e.prevStage}return!1}getNextStageFn(e){const t=this;return function(){return gi({$method:e,$param:pi(Array.from(arguments))},t,t._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL禁止使用set方法")}}_send(e,t){const n=this.getAction(),i=this.getCommand();return i.$db.push({$method:e,$param:pi(t)}),this._database._callCloudFunction({action:n,command:i})}}function gi(e,t,n){return ci(new mi(e,t,n),{get(e,t){let i="db";return e&&e.content&&(i=e.content.$method),hi(i,t)?gi({$method:t},e,n):function(){return gi({$method:t,$param:pi(Array.from(arguments))},e,n)}}})}function yi({path:e,method:t}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...e.map((e=>({$method:e}))),{$method:t,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function _i(e,t={}){return ci(new e(t),{get:(e,t)=>hi("db",t)?gi({$method:t},null,e):function(){return gi({$method:t,$param:pi(Array.from(arguments))},null,e)}})}class bi extends class{constructor({uniClient:e={},isJQL:t=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=et("_globalUniCloudDatabaseCallback")),t||(this.auth=ui(this._authCallBacks)),this._isJQL=t,Object.assign(this,ui(this._dbCallBacks)),this.env=ci({},{get:(e,t)=>({$env:t})}),this.Geo=ci({},{get:(e,t)=>yi({path:["Geo"],method:t})}),this.serverDate=yi({path:[],method:"serverDate"}),this.RegExp=yi({path:[],method:"RegExp"})}getCloudEnv(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv参数错误");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){const n=this._dbCallBacks;n[e]&&n[e].forEach((e=>{e(...t)}))}_callbackAuth(e,t){const n=this._authCallBacks;n[e]&&n[e].forEach((e=>{e(...t)}))}multiSend(){const e=Array.from(arguments),t=e.map((e=>{const t=e.getAction(),n=e.getCommand();if("getTemp"!==n.$db[n.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:t,command:n}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:t,multiCommand:n,queryList:i}){function r(e,t){if(n&&i)for(let n=0;n<i.length;n++){const r=i[n];r.udb&&"function"==typeof r.udb.setResult&&(t?r.udb.setResult(t):r.udb.setResult(e.result.dataList[n]))}}const o=this,s=this._isJQL?"databaseForJQL":"database";function a(e){return o._callback("error",[e]),ot(st(s,"fail"),e).then((()=>ot(st(s,"complete"),e))).then((()=>(r(null,e),_t(ct,{type:ht,content:e}),Promise.reject(e))))}const l=ot(st(s,"invoke")),c=this._uniClient;return l.then((()=>c.callFunction({name:"DCloud-clientDB",type:"CLIENT_DB",data:{action:e,command:t,multiCommand:n}}))).then((e=>{const{code:t,message:n,token:i,tokenExpired:l,systemInfo:c=[]}=e.result;if(c)for(let r=0;r<c.length;r++){const{level:e,message:t,detail:n}=c[r],i=console["warn"===e?"error":e]||console.log;let o="[System Info]"+t;n&&(o=`${o}\n详细信息：${n}`),i(o)}if(t)return a(new St({code:t,message:n,requestId:e.requestId}));e.result.errCode=e.result.errCode||e.result.code,e.result.errMsg=e.result.errMsg||e.result.message,i&&l&&(Ct({token:i,tokenExpired:l}),this._callbackAuth("refreshToken",[{token:i,tokenExpired:l}]),this._callback("refreshToken",[{token:i,tokenExpired:l}]),_t(dt,{token:i,tokenExpired:l}));const u=[{prop:"affectedDocs",tips:"affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"},{prop:"code",tips:"code不再推荐使用，请使用errCode替代"},{prop:"message",tips:"message不再推荐使用，请使用errMsg替代"}];for(let r=0;r<u.length;r++){const{prop:t,tips:n}=u[r];if(t in e.result){const i=e.result[t];Object.defineProperty(e.result,t,{get:()=>(console.warn(n),i)})}}return d=e,ot(st(s,"success"),d).then((()=>ot(st(s,"complete"),d))).then((()=>{r(d,null);const e=o._parseResult(d);return _t(ct,{type:ht,content:e}),Promise.resolve(e)}));var d}),(e=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB"),a(new St({code:e.code||"SYSTEM_ERROR",message:e.message,requestId:e.requestId})))))}}const vi="token无效，跳转登录页面",wi="token过期，跳转登录页面",ki={TOKEN_INVALID_TOKEN_EXPIRED:wi,TOKEN_INVALID_INVALID_CLIENTID:vi,TOKEN_INVALID:vi,TOKEN_INVALID_WRONG_TOKEN:vi,TOKEN_INVALID_ANONYMOUS_USER:vi},Si={"uni-id-token-expired":wi,"uni-id-check-token-failed":vi,"uni-id-token-not-exist":vi,"uni-id-check-device-feature-failed":vi};function xi(e,t){let n="";return n=e?`${e}/${t}`:t,n.replace(/^\//,"")}function Ti(e=[],t=""){const n=[],i=[];return e.forEach((e=>{!0===e.needLogin?n.push(xi(t,e.path)):!1===e.needLogin&&i.push(xi(t,e.path))})),{needLoginPage:n,notNeedLoginPage:i}}function Ei(e){return e.split("?")[0].replace(/^\//,"")}function Ci(){return function(e){let t=e&&e.$page&&e.$page.fullPath||"";return t?("/"!==t.charAt(0)&&(t="/"+t),t):t}(function(){const e=getCurrentPages();return e[e.length-1]}())}function Ii(){return Ei(Ci())}function Di(e="",t={}){if(!e)return!1;if(!(t&&t.list&&t.list.length))return!1;const n=t.list,i=Ei(e);return n.some((e=>e.pagePath===i))}const Ni=!!Ae.uniIdRouter,{loginPage:Bi,routerNeedLogin:Ai,resToLogin:Pi,needLoginPage:Mi,notNeedLoginPage:Vi,loginPageInTabBar:Oi}=function({pages:e=[],subPackages:t=[],uniIdRouter:n={},tabBar:i={}}=Ae){const{loginPage:r,needLogin:o=[],resToLogin:s=!0}=n,{needLoginPage:a,notNeedLoginPage:l}=Ti(e),{needLoginPage:c,notNeedLoginPage:u}=function(e=[]){const t=[],n=[];return e.forEach((e=>{const{root:i,pages:r=[]}=e,{needLoginPage:o,notNeedLoginPage:s}=Ti(r,i);t.push(...o),n.push(...s)})),{needLoginPage:t,notNeedLoginPage:n}}(t);return{loginPage:r,routerNeedLogin:o,resToLogin:s,needLoginPage:[...a,...c],notNeedLoginPage:[...l,...u],loginPageInTabBar:Di(r,i)}}();if(Mi.indexOf(Bi)>-1)throw new Error(`Login page [${Bi}] should not be "needLogin", please check your pages.json`);function Ri(e){const t=Ii();if("/"===e.charAt(0))return e;const[n,i]=e.split("?"),r=n.replace(/^\//,"").split("/"),o=t.split("/");o.pop();for(let s=0;s<r.length;s++){const e=r[s];".."===e?o.pop():"."!==e&&o.push(e)}return""===o[0]&&o.shift(),"/"+o.join("/")+(i?"?"+i:"")}function Li({redirect:e}){const t=Ei(e),n=Ei(Bi);return Ii()!==n&&t!==n}function ji({api:e,redirect:t}={}){if(!t||!Li({redirect:t}))return;const n=(r=t,"/"!==(i=Bi).charAt(0)&&(i="/"+i),r?i.indexOf("?")>-1?i+`&uniIdRedirectUrl=${encodeURIComponent(r)}`:i+`?uniIdRedirectUrl=${encodeURIComponent(r)}`:i);var i,r;Oi?"navigateTo"!==e&&"redirectTo"!==e||(e="switchTab"):"switchTab"===e&&(e="navigateTo");const o={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout((()=>{o[e]({url:n})}))}function Ui({url:e}={}){const t={abortLoginPageJump:!1,autoToLoginPage:!1},n=function(){const{token:e,tokenExpired:t}=Et();let n;if(e){if(t<Date.now()){const e="uni-id-token-expired";n={errCode:e,errMsg:Si[e]}}}else{const e="uni-id-check-token-failed";n={errCode:e,errMsg:Si[e]}}return n}();if(function(e){const t=Ei(Ri(e));return!(Vi.indexOf(t)>-1)&&(Mi.indexOf(t)>-1||Ai.some((t=>{return n=e,new RegExp(t).test(n);var n})))}(e)&&n){if(n.uniIdRedirectUrl=e,mt(ut).length>0)return setTimeout((()=>{_t(ut,n)}),0),t.abortLoginPageJump=!0,t;t.autoToLoginPage=!0}return t}function Fi(){!function(){const e=Ci(),{abortLoginPageJump:t,autoToLoginPage:n}=Ui({url:e});t||n&&ji({api:"redirectTo",redirect:e})}();const e=["navigateTo","redirectTo","reLaunch","switchTab"];for(let t=0;t<e.length;t++){const n=e[t];uni.addInterceptor(n,{invoke(e){const{abortLoginPageJump:t,autoToLoginPage:i}=Ui({url:e.url});return t?e:i?(ji({api:n,redirect:Ri(e.url)}),!1):e}})}}function zi(){this.onResponse((e=>{const{type:t,content:n}=e;let i=!1;switch(t){case"cloudobject":i=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in Si}(n);break;case"clientdb":i=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in ki}(n)}i&&function(e={}){const t=mt(ut);wt().then((()=>{const n=Ci();if(n&&Li({redirect:n}))return t.length>0?_t(ut,Object.assign({uniIdRedirectUrl:n},e)):void(Bi&&ji({api:"navigateTo",redirect:n}))}))}(n)}))}function qi(e){var t;(t=e).onResponse=function(e){gt(ct,e)},t.offResponse=function(e){yt(ct,e)},function(e){e.onNeedLogin=function(e){gt(ut,e)},e.offNeedLogin=function(e){yt(ut,e)},Ni&&(et("_globalUniCloudStatus").needLoginInit||(et("_globalUniCloudStatus").needLoginInit=!0,wt().then((()=>{Fi.call(e)})),Pi&&zi.call(e)))}(e),function(e){e.onRefreshToken=function(e){gt(dt,e)},e.offRefreshToken=function(e){yt(dt,e)}}(e)}let $i;const Hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Wi=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function Ki(){const e=Et().token||"",t=e.split(".");if(!e||3!==t.length)return{uid:null,role:[],permission:[],tokenExpired:0};let n;try{n=JSON.parse((i=t[1],decodeURIComponent($i(i).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(r){throw new Error("获取当前用户信息出错，详细错误信息为："+r.message)}var i;return n.tokenExpired=1e3*n.exp,delete n.exp,delete n.iat,n}$i="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!Wi.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,i,r="",o=0;o<e.length;)t=Hi.indexOf(e.charAt(o++))<<18|Hi.indexOf(e.charAt(o++))<<12|(n=Hi.indexOf(e.charAt(o++)))<<6|(i=Hi.indexOf(e.charAt(o++))),r+=64===n?String.fromCharCode(t>>16&255):64===i?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return r}:atob;var Ji=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n="chooseAndUploadFile:ok",i="chooseAndUploadFile:fail";function r(e,t){return e.tempFiles.forEach(((e,n)=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+n+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function o(e,t,{onChooseFile:i,onUploadProgress:r}){return t.then((e=>{if(i){const t=i(e);if(void 0!==t)return Promise.resolve(t).then((t=>void 0===t?e:t))}return e})).then((t=>!1===t?{errMsg:n,tempFilePaths:[],tempFiles:[]}:function(e,t,i=5,r){(t=Object.assign({},t)).errMsg=n;const o=t.tempFiles,s=o.length;let a=0;return new Promise((n=>{for(;a<i;)l();function l(){const i=a++;if(i>=s)return void(!o.find((e=>!e.url&&!e.errMsg))&&n(t));const c=o[i];e.uploadFile({filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,onUploadProgress(e){e.index=i,e.tempFile=c,e.tempFilePath=c.path,r&&r(e)}}).then((e=>{c.url=e.fileID,i<s&&l()})).catch((e=>{c.errMsg=e.errMsg||e.message,i<s&&l()}))}}))}(e,t,5,r)))}t.initChooseAndUploadFile=function(e){return function(t={type:"all"}){return"image"===t.type?o(e,function(e){const{count:t,sizeType:n,sourceType:o=["album","camera"],extension:s}=e;return new Promise(((e,a)=>{uni.chooseImage({count:t,sizeType:n,sourceType:o,extension:s,success(t){e(r(t,"image"))},fail(e){a({errMsg:e.errMsg.replace("chooseImage:fail",i)})}})}))}(t),t):"video"===t.type?o(e,function(e){const{camera:t,compressed:n,maxDuration:o,sourceType:s=["album","camera"],extension:a}=e;return new Promise(((e,l)=>{uni.chooseVideo({camera:t,compressed:n,maxDuration:o,sourceType:s,extension:a,success(t){const{tempFilePath:n,duration:i,size:o,height:s,width:a}=t;e(r({errMsg:"chooseVideo:ok",tempFilePaths:[n],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:n,size:o,type:t.tempFile&&t.tempFile.type||"",width:a,height:s,duration:i,fileType:"video",cloudPath:""}]},"video"))},fail(e){l({errMsg:e.errMsg.replace("chooseVideo:fail",i)})}})}))}(t),t):o(e,function(e){const{count:t,extension:n}=e;return new Promise(((e,o)=>{let s=uni.chooseFile;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(s=wx.chooseMessageFile),"function"!=typeof s)return o({errMsg:i+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});s({type:"all",count:t,extension:n,success(t){e(r(t))},fail(e){o({errMsg:e.errMsg.replace("chooseFile:fail",i)})}})}))}(t),t)}}})));function Yi(e){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{}}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{if("manual"===this.loadtime)return;let n=!1;const i=[];for(let r=2;r<e.length;r++)e[r]!==t[r]&&(i.push(e[r]),n=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(n,i)}))},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:n}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomGet().then((n=>{this.mixinDatacomLoading=!1;const{data:i,count:r}=n.result;this.getcount&&(this.mixinDatacomPage.count=r),this.mixinDatacomHasMore=i.length<this.pageSize;const o=e?i.length?i[0]:void 0:i;this.mixinDatacomResData=o,t&&t(o)})).catch((e=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=e,n&&n(e)})))},mixinDatacomGet(t={}){let n=e.database(this.spaceInfo);const i=t.action||this.action;i&&(n=n.action(i));const r=t.collection||this.collection;n=Array.isArray(r)?n.collection(...r):n.collection(r);const o=t.where||this.where;o&&Object.keys(o).length&&(n=n.where(o));const s=t.field||this.field;s&&(n=n.field(s));const a=t.foreignKey||this.foreignKey;a&&(n=n.foreignKey(a));const l=t.groupby||this.groupby;l&&(n=n.groupBy(l));const c=t.groupField||this.groupField;c&&(n=n.groupField(c)),!0===(void 0!==t.distinct?t.distinct:this.distinct)&&(n=n.distinct());const u=t.orderby||this.orderby;u&&(n=n.orderBy(u));const d=void 0!==t.pageCurrent?t.pageCurrent:this.mixinDatacomPage.current,h=void 0!==t.pageSize?t.pageSize:this.mixinDatacomPage.size,p=void 0!==t.getcount?t.getcount:this.getcount,f=void 0!==t.gettree?t.gettree:this.gettree,m=void 0!==t.gettreepath?t.gettreepath:this.gettreepath,g={getCount:p},y={limitLevel:void 0!==t.limitlevel?t.limitlevel:this.limitlevel,startWith:void 0!==t.startwith?t.startwith:this.startwith};return f&&(g.getTree=y),m&&(g.getTreePath=y),n=n.skip(h*(d-1)).limit(h).get(g),n}}}}function Gi(e){return et("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",e.config.spaceId))}async function Qi({openid:e,callLoginByWeixin:t=!1}={}){throw Gi(this),new Error("[SecureNetwork] API `initSecureNetworkByWeixin` is not supported on platform `app`")}async function Zi(e){const t=Gi(this);return t.initPromise||(t.initPromise=Qi.call(this,e)),t.initPromise}function Xi(e){const t={getSystemInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(n){return new Promise(((i,r)=>{t[e]({...n,success(e){i(e)},fail(e){r(e)}})}))}}class er extends class{constructor(){this._callback={}}addListener(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}on(e,t){return this.addListener(e,t)}removeListener(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');const n=this._callback[e];if(!n)return;const i=function(e,t){for(let n=e.length-1;n>=0;n--)if(e[n]===t)return n;return-1}(n,t);n.splice(i,1)}off(e,t){return this.removeListener(e,t)}removeAllListener(e){delete this._callback[e]}emit(e,...t){const n=this._callback[e];if(n)for(let i=0;i<n.length;i++)n[i](...t)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([Xi("getSystemInfo")(),Xi("getPushClientId")()]).then((([{appId:e}={},{cid:t}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!t)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=t,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()}),(e=>{throw this.emit("error",e),this.close(),e}))}async open(){return this.init()}_isUniCloudSSE(e){if("receive"!==e.type)return!1;const t=e&&e.data&&e.data.payload;return!(!t||"UNI_CLOUD_SSE"!==t.channel||t.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;const t=e&&e.data&&e.data.payload,{action:n,messageId:i,message:r}=t;this._payloadQueue.push({action:n,messageId:i,message:r}),this._consumMessage()}_consumMessage(){for(;;){const e=this._payloadQueue.find((e=>e.messageId===this._currentMessageId+1));if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){const{action:t,messageId:n,message:i}=e;"end"===t?this._end({messageId:n,message:i}):"message"===t&&this._appendMessage({messageId:n,message:i})}_appendMessage({messageId:e,message:t}={}){this.emit("message",t)}_end({messageId:e,message:t}={}){this.emit("end",t),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}}const tr={tcb:Wn,tencent:Wn,aliyun:jt,private:Jn};let nr=new class{init(e){let t={};const n=tr[e.provider];if(!n)throw new Error("未提供正确的provider参数");var i;return t=n.init(e),function(e){e._initPromiseHub||(e._initPromiseHub=new Je({createPromise:function(){let t=Promise.resolve();t=new Promise((e=>{setTimeout((()=>{e()}),1)}));const n=e.auth();return t.then((()=>n.getLoginState())).then((e=>e?Promise.resolve():n.signInAnonymously()))}}))}(t),ai(t),function(e){const t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),(i=t).database=function(e){if(e&&Object.keys(e).length>0)return i.init(e).database();if(this._database)return this._database;const t=_i(bi,{uniClient:i});return this._database=t,t},i.databaseForJQL=function(e){if(e&&Object.keys(e).length>0)return i.init(e).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;const t=_i(bi,{uniClient:i,isJQL:!0});return this._databaseForJQL=t,t},function(e){e.getCurrentUserInfo=Ki,e.chooseAndUploadFile=Ji.initChooseAndUploadFile(e),Object.assign(e,{get mixinDatacom(){return Yi(e)}}),e.SSEChannel=er,e.initSecureNetworkByWeixin=function(e){return function({openid:t,callLoginByWeixin:n=!1}={}){return Zi.call(e,{openid:t,callLoginByWeixin:n})}}(e),e.importObject=function(t){return function(n,i={}){i=function(e,t={}){return e.customUI=t.customUI||e.customUI,e.parseSystemError=t.parseSystemError||e.parseSystemError,Object.assign(e.loadingOptions,t.loadingOptions),Object.assign(e.errorOptions,t.errorOptions),"object"==typeof t.secretMethods&&(e.secretMethods=t.secretMethods),e}({customUI:!1,loadingOptions:{title:"加载中...",mask:!0},errorOptions:{type:"modal",retry:!1}},i);const{customUI:r,loadingOptions:o,errorOptions:s,parseSystemError:a}=i,l=!r;return new Proxy({},{get:(r,c)=>function({fn:e,interceptorName:t,getCallbackArgs:n}={}){return async function(...i){const r=n?n({params:i}):{};let o,s;try{return await ot(st(t,"invoke"),{...r}),o=await e(...i),await ot(st(t,"success"),{...r,result:o}),o}catch(a){throw s=a,await ot(st(t,"fail"),{...r,error:s}),s}finally{await ot(st(t,"complete"),s?{...r,error:s}:{...r,result:o})}}}({fn:async function r(...u){let d;l&&uni.showLoading({title:o.title,mask:o.mask});const h={name:n,type:"OBJECT",data:{method:c,params:u}};"object"==typeof i.secretMethods&&function(e,t){const n=t.data.method,i=e.secretMethods||{},r=i[n]||i["*"];r&&(t.secretType=r)}(i,h);let p=!1;try{d=await t.callFunction(h)}catch(e){p=!0,d={result:new St(e)}}const{errSubject:f,errCode:m,errMsg:g,newToken:y}=d.result||{};if(l&&uni.hideLoading(),y&&y.token&&y.tokenExpired&&(Ct(y),_t(dt,{...y})),m){let e=g;if(p&&a&&(e=(await a({objectName:n,methodName:c,params:u,errSubject:f,errCode:m,errMsg:g})).errMsg||g),l)if("toast"===s.type)uni.showToast({title:e,icon:"none"});else{if("modal"!==s.type)throw new Error(`Invalid errorOptions.type: ${s.type}`);{const{confirm:t}=await async function({title:e,content:t,showCancel:n,cancelText:i,confirmText:r}={}){return new Promise(((o,s)=>{uni.showModal({title:e,content:t,showCancel:n,cancelText:i,confirmText:r,success(e){o(e)},fail(){o({confirm:!1,cancel:!0})}})}))}({title:"提示",content:e,showCancel:s.retry,cancelText:"取消",confirmText:s.retry?"重试":"确定"});if(s.retry&&t)return r(...u)}}const t=new St({subject:f,code:m,message:g,requestId:d.requestId});throw t.detail=d.result,_t(ct,{type:ft,content:t}),t}return _t(ct,{type:ft,content:d.result}),d.result},interceptorName:"callObject",getCallbackArgs:function({params:e}={}){return{objectName:n,methodName:c,params:e}}})})}}(e)}(t),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((e=>{if(!t[e])return;const n=t[e];var i,r;t[e]=function(){return n.apply(t,Array.from(arguments))},t[e]=(i=t[e],r=e,function(e){let t=!1;if("callFunction"===r){const n=e&&e.type||je;t=n!==je}const n="callFunction"===r&&!t,o=this._initPromiseHub.exec();e=e||{};const{success:s,fail:a,complete:l}=kt(e),c=o.then((()=>t?Promise.resolve():ot(st(r,"invoke"),e))).then((()=>i.call(this,e))).then((e=>t?Promise.resolve(e):ot(st(r,"success"),e).then((()=>ot(st(r,"complete"),e))).then((()=>(n&&_t(ct,{type:pt,content:e}),Promise.resolve(e))))),(e=>t?Promise.reject(e):ot(st(r,"fail"),e).then((()=>ot(st(r,"complete"),e))).then((()=>(_t(ct,{type:pt,content:e}),Promise.reject(e))))));if(!(s||a||l))return c;c.then((e=>{s&&s(e),l&&l(e),n&&_t(ct,{type:pt,content:e})}),(e=>{a&&a(e),l&&l(e),n&&_t(ct,{type:pt,content:e})}))}).bind(t)})),t.init=this.init,t}};(()=>{const e=Qe;let t={};if(e&&1===e.length)t=e[0],nr=nr.init(t),nr._isDefault=!0;else{const t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"];let n;n=e&&e.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"应用未关联服务空间，请在uniCloud目录右键关联服务空间",t.forEach((e=>{nr[e]=function(){return console.error(n),Promise.reject(new St({code:"SYS_ERR",message:n}))}}))}Object.assign(nr,{get mixinDatacom(){return Yi(nr)}}),qi(nr),nr.addInterceptor=it,nr.removeInterceptor=rt,nr.interceptObject=at})();var ir=nr;const rr={en:{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},"zh-Hans":{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},"zh-Hant":{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}};let or;setTimeout((()=>{or=uni.getSystemInfoSync().platform}),16);const{t:sr}=Be(rr);const ar=o({name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:or,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||sr("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||sr("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||sr("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1].$getAppWebview();t.addEventListener("hide",(()=>{this.webviewHide=!0})),t.addEventListener("show",(()=>{this.webviewHide=!1}))},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-load-more",onClick:n[0]||(n[0]=(...e)=>s.onClick&&s.onClick(...e))},[!o.webviewHide&&("circle"===i.iconType||"auto"===i.iconType&&"android"===o.platform)&&"loading"===i.status&&i.showIcon?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle({width:i.iconSize+"px",height:i.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-MP"},[e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:i.color,borderTopWidth:i.iconSize/12})},null,4),e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:i.color,borderTopWidth:i.iconSize/12})},null,4),e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:i.color,borderTopWidth:i.iconSize/12})},null,4)],4)):!o.webviewHide&&"loading"===i.status&&i.showIcon?(e.openBlock(),e.createElementBlock("view",{key:1,style:e.normalizeStyle({width:i.iconSize+"px",height:i.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},[e.createElementVNode("image",{src:o.imgBase64,mode:"widthFix"},null,8,["src"])],4)):e.createCommentVNode("",!0),i.showText?(e.openBlock(),e.createElementBlock("text",{key:2,class:"uni-load-more__text",style:e.normalizeStyle({color:i.color})},e.toDisplayString("more"===i.status?s.contentdownText:"loading"===i.status?s.contentrefreshText:s.contentnomoreText),5)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-b9147751"]]),lr={name:"uniDataChecklist",mixins:[ir.mixinDatacom||{}],emits:["input","update:modelValue","change"],props:{mode:{type:String,default:"default"},multiple:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>""},modelValue:{type:[Array,String,Number],default:()=>""},localdata:{type:Array,default:()=>[]},min:{type:[Number,String],default:""},max:{type:[Number,String],default:""},wrap:{type:Boolean,default:!1},icon:{type:String,default:"left"},selectedColor:{type:String,default:""},selectedTextColor:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},disabled:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},watch:{localdata:{handler(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},deep:!0},mixinDatacomResData(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},value(e){this.dataList=this.getDataList(e)},modelValue(e){this.dataList=this.getDataList(e)}},data:()=>({dataList:[],range:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},isLocal:!0,styles:{selectedColor:"#2979ff",selectedTextColor:"#666"},isTop:0}),computed:{dataValue(){return""===this.value?this.modelValue:(this.modelValue,this.value)}},created(){this.localdata&&0!==this.localdata.length?(this.isLocal=!0,this.range=this.localdata,this.dataList=this.getDataList(this.getSelectedValue(this.range))):this.collection&&(this.isLocal=!1,this.loadData())},methods:{loadData(){this.mixinDatacomGet().then((e=>{this.mixinDatacomResData=e.result.data,0===this.mixinDatacomResData.length?(this.isLocal=!1,this.mixinDatacomErrorMessage=this.emptyText):this.isLocal=!0})).catch((e=>{this.mixinDatacomErrorMessage=e.message}))},getForm(e="uniForms"){let t=this.$parent,n=t.$options.name;for(;n!==e;){if(t=t.$parent,!t)return!1;n=t.$options.name}return t},chagne(e){const t=e.detail.value;let n={value:[],data:[]};if(this.multiple)this.range.forEach((e=>{t.includes(e[this.map.value]+"")&&(n.value.push(e[this.map.value]),n.data.push(e))}));else{const e=this.range.find((e=>e[this.map.value]+""===t));e&&(n={value:e[this.map.value],data:e})}this.$emit("input",n.value),this.$emit("update:modelValue",n.value),this.$emit("change",{detail:n}),this.multiple?this.dataList=this.getDataList(n.value,!0):this.dataList=this.getDataList(n.value)},getDataList(e){let t=JSON.parse(JSON.stringify(this.range)),n=[];return this.multiple&&(Array.isArray(e)||(e=[])),t.forEach(((t,i)=>{if(t.disabled=t.disable||t.disabled||!1,this.multiple)if(e.length>0){let n=e.find((e=>e===t[this.map.value]));t.selected=void 0!==n}else t.selected=!1;else t.selected=e===t[this.map.value];n.push(t)})),this.setRange(n)},setRange(e){let t=e.filter((e=>e.selected)),n=Number(this.min)||0,i=Number(this.max)||"";return e.forEach(((r,o)=>{if(this.multiple){if(t.length<=n){void 0!==t.find((e=>e[this.map.value]===r[this.map.value]))&&(r.disabled=!0)}if(t.length>=i&&""!==i){void 0===t.find((e=>e[this.map.value]===r[this.map.value]))&&(r.disabled=!0)}}this.setStyles(r,o),e[o]=r})),e},setStyles(e,t){e.styleBackgroud=this.setStyleBackgroud(e),e.styleIcon=this.setStyleIcon(e),e.styleIconText=this.setStyleIconText(e),e.styleRightIcon=this.setStyleRightIcon(e)},getSelectedValue(e){if(!this.multiple)return this.dataValue;let t=[];return e.forEach((e=>{e.selected&&t.push(e[this.map.value])})),this.dataValue.length>0?this.dataValue:t},setStyleBackgroud(e){let t={},n=this.selectedColor?this.selectedColor:"#2979ff";this.selectedColor&&("list"!==this.mode&&(t["border-color"]=e.selected?n:"#DCDFE6"),"tag"===this.mode&&(t["background-color"]=e.selected?n:"#f5f5f5"));let i="";for(let r in t)i+=`${r}:${t[r]};`;return i},setStyleIcon(e){let t={},n="";if(this.selectedColor){let n=this.selectedColor?this.selectedColor:"#2979ff";t["background-color"]=e.selected?n:"#fff",t["border-color"]=e.selected?n:"#DCDFE6",!e.selected&&e.disabled&&(t["background-color"]="#F2F6FC",t["border-color"]=e.selected?n:"#DCDFE6")}for(let i in t)n+=`${i}:${t[i]};`;return n},setStyleIconText(e){let t={},n="";if(this.selectedColor){let n=this.selectedColor?this.selectedColor:"#2979ff";"tag"===this.mode?t.color=e.selected?this.selectedTextColor?this.selectedTextColor:"#fff":"#666":t.color=e.selected?this.selectedTextColor?this.selectedTextColor:n:"#666",!e.selected&&e.disabled&&(t.color="#999")}for(let i in t)n+=`${i}:${t[i]};`;return n},setStyleRightIcon(e){let t={},n="";"list"===this.mode&&(t["border-color"]=e.selected?this.styles.selectedColor:"#DCDFE6");for(let i in t)n+=`${i}:${t[i]};`;return n}}};const cr=o(lr,[["render",function(t,n,r,o,s,a){const l=i(e.resolveDynamicComponent("uni-load-more"),ar);return e.openBlock(),e.createElementBlock("view",{class:"uni-data-checklist",style:e.normalizeStyle({"margin-top":s.isTop+"px"})},[s.isLocal?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[r.multiple?(e.openBlock(),e.createElementBlock("checkbox-group",{key:0,class:e.normalizeClass(["checklist-group",{"is-list":"list"===r.mode||r.wrap}]),onChange:n[0]||(n[0]=(...e)=>a.chagne&&a.chagne(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.dataList,((t,n)=>(e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(["checklist-box",["is--"+r.mode,t.selected?"is-checked":"",r.disabled||t.disabled?"is-disable":"",0!==n&&"list"===r.mode?"is-list-border":""]]),style:e.normalizeStyle(t.styleBackgroud),key:n},[e.createElementVNode("checkbox",{class:"hidden",hidden:"",disabled:r.disabled||!!t.disabled,value:t[r.map.value]+"",checked:t.selected},null,8,["disabled","value","checked"]),"tag"!==r.mode&&"list"!==r.mode||"list"===r.mode&&"left"===r.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"checkbox__inner",style:e.normalizeStyle(t.styleIcon)},[e.createElementVNode("view",{class:"checkbox__inner-icon"})],4)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["checklist-content",{"list-content":"list"===r.mode&&"left"===r.icon}])},[e.createElementVNode("text",{class:"checklist-text",style:e.normalizeStyle(t.styleIconText)},e.toDisplayString(t[r.map.text]),5),"list"===r.mode&&"right"===r.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"checkobx__list",style:e.normalizeStyle(t.styleBackgroud)},null,4)):e.createCommentVNode("",!0)],2)],6)))),128))],34)):(e.openBlock(),e.createElementBlock("radio-group",{key:1,class:e.normalizeClass(["checklist-group",{"is-list":"list"===r.mode,"is-wrap":r.wrap}]),onChange:n[1]||(n[1]=(...e)=>a.chagne&&a.chagne(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.dataList,((t,n)=>(e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(["checklist-box",["is--"+r.mode,t.selected?"is-checked":"",r.disabled||t.disabled?"is-disable":"",0!==n&&"list"===r.mode?"is-list-border":""]]),style:e.normalizeStyle(t.styleBackgroud),key:n},[e.createElementVNode("radio",{class:"hidden",hidden:"",disabled:r.disabled||t.disabled,value:t[r.map.value]+"",checked:t.selected},null,8,["disabled","value","checked"]),"tag"!==r.mode&&"list"!==r.mode||"list"===r.mode&&"left"===r.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"radio__inner",style:e.normalizeStyle(t.styleBackgroud)},[e.createElementVNode("view",{class:"radio__inner-icon",style:e.normalizeStyle(t.styleIcon)},null,4)],4)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["checklist-content",{"list-content":"list"===r.mode&&"left"===r.icon}])},[e.createElementVNode("text",{class:"checklist-text",style:e.normalizeStyle(t.styleIconText)},e.toDisplayString(t[r.map.text]),5),"list"===r.mode&&"right"===r.icon?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle(t.styleRightIcon),class:"checkobx__list"},null,4)):e.createCommentVNode("",!0)],2)],6)))),128))],34))],64)):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-data-loading"},[t.mixinDatacomErrorMessage?(e.openBlock(),e.createElementBlock("text",{key:1},e.toDisplayString(t.mixinDatacomErrorMessage),1)):(e.openBlock(),e.createBlock(l,{key:0,status:"loading",iconType:"snow",iconSize:18,"content-text":s.contentText},null,8,["content-text"]))]))],4)}],["__scopeId","data-v-1168c07c"]]);const ur=o({name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:e,type:t,size:n,absolute:i}=this;return[e?"uni-badge--"+t+"-inverted":"","uni-badge--"+t,"uni-badge--"+n,i?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let e=this.width/2,t=10;this.isDot&&(e=5,t=5);const n=`${-e+this.offset[0]}px`,i=`${-t+this.offset[1]}px`,r={rightTop:{right:n,top:i},rightBottom:{right:n,bottom:i},leftBottom:{left:n,bottom:i},leftTop:{left:n,top:i}},o=r[this.absolute];return o||r.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){const{isDot:e,text:t,maxNum:n}=this;return e?"":Number(t)>n?`${n}+`:t}},methods:{onClick(){this.$emit("click")}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-badge--x"},[e.renderSlot(t.$slots,"default",{},void 0,!0),i.text?(e.openBlock(),e.createElementBlock("text",{key:0,class:e.normalizeClass([s.classNames,"uni-badge"]),style:e.normalizeStyle([s.positionStyle,i.customStyle,s.dotStyle]),onClick:n[0]||(n[0]=e=>s.onClick())},e.toDisplayString(s.displayValue),7)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-4aa7629c"]]),dr={name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default:()=>({})},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:()=>({type:"",color:"#000000",size:20})},border:{type:Boolean,default:!0}},data:()=>({isFirstChild:!1}),mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(e="uniList"){let t=this.$parent,n=t.$options.name;for(;n!==e;){if(t=t.$parent,!t)return!1;n=t.$options.name}return t},onClick(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},onSwitchChange(e){this.$emit("switchChange",e.detail)},openPage(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(e){let t={url:this.to,success:e=>{this.$emit("click",{data:e})},fail:e=>{this.$emit("click",{data:e})}};switch(e){case"navigateTo":default:uni.navigateTo(t);break;case"redirectTo":uni.redirectTo(t);break;case"reLaunch":uni.reLaunch(t);break;case"switchTab":uni.switchTab(t)}}}};const hr=o(dr,[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-icons"),s),u=i(e.resolveDynamicComponent("uni-badge"),ur);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass([{"uni-list-item--disabled":r.disabled},"uni-list-item"]),"hover-class":!r.clickable&&!r.link||r.disabled||r.showSwitch?"":"uni-list-item--hover",onClick:n[1]||(n[1]=(...e)=>l.onClick&&l.onClick(...e))},[a.isFirstChild?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["border--left",{"uni-list--border":r.border}])},null,2)),e.createElementVNode("view",{class:e.normalizeClass(["uni-list-item__container",{"container--right":r.showArrow||r.link,"flex--direction":"column"===r.direction}])},[e.renderSlot(t.$slots,"header",{},(()=>[e.createElementVNode("view",{class:"uni-list-item__header"},[r.thumb?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-list-item__icon"},[e.createElementVNode("image",{src:r.thumb,class:e.normalizeClass(["uni-list-item__icon-img",["uni-list--"+r.thumbSize]])},null,10,["src"])])):r.showExtraIcon?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-list-item__icon"},[e.createVNode(c,{color:r.extraIcon.color,size:r.extraIcon.size,type:r.extraIcon.type},null,8,["color","size","type"])])):e.createCommentVNode("",!0)])]),!0),e.renderSlot(t.$slots,"body",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-list-item__content",{"uni-list-item__content--center":r.thumb||r.showExtraIcon||r.showBadge||r.showSwitch}])},[r.title?(e.openBlock(),e.createElementBlock("text",{key:0,class:e.normalizeClass(["uni-list-item__content-title",[0!==r.ellipsis&&r.ellipsis<=2?"uni-ellipsis-"+r.ellipsis:""]])},e.toDisplayString(r.title),3)):e.createCommentVNode("",!0),r.note?(e.openBlock(),e.createElementBlock("text",{key:1,class:"uni-list-item__content-note"},e.toDisplayString(r.note),1)):e.createCommentVNode("",!0)],2)]),!0),e.renderSlot(t.$slots,"footer",{},(()=>[r.rightText||r.showBadge||r.showSwitch?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-list-item__extra",{"flex--justify":"column"===r.direction}])},[r.rightText?(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-list-item__extra-text"},e.toDisplayString(r.rightText),1)):e.createCommentVNode("",!0),r.showBadge?(e.openBlock(),e.createBlock(u,{key:1,type:r.badgeType,text:r.badgeText,"custom-style":r.badgeStyle},null,8,["type","text","custom-style"])):e.createCommentVNode("",!0),r.showSwitch?(e.openBlock(),e.createElementBlock("switch",{key:2,disabled:r.disabled,checked:r.switchChecked,onChange:n[0]||(n[0]=(...e)=>l.onSwitchChange&&l.onSwitchChange(...e))},null,40,["disabled","checked"])):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)]),!0)],2),r.showArrow||r.link?(e.openBlock(),e.createBlock(c,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):e.createCommentVNode("",!0)],10,["hover-class"])}],["__scopeId","data-v-19252fe4"]]);const pr=o({name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0}},created(){this.firstChildAppend=!1},methods:{loadMore(e){this.$emit("scrolltolower")}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-list uni-border-top-bottom"},[i.border?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-list--border-top"})):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"default",{},void 0,!0),i.border?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-list--border-bottom"})):e.createCommentVNode("",!0)])}],["__scopeId","data-v-fbd5ef3c"]]),fr={data:()=>({}),created(){this.popup=this.getParent()},methods:{getParent(e="uniPopup"){let t=this.$parent,n=t.$options.name;for(;n!==e;){if(t=t.$parent,!t)return!1;n=t.$options.name}return t}}};const mr=o({name:"uniPopupMessage",mixins:[fr],props:{type:{type:String,default:"success"},message:{type:String,default:""},duration:{type:Number,default:3e3},maskShow:{type:Boolean,default:!1}},data:()=>({}),created(){this.popup.maskShow=this.maskShow,this.popup.messageChild=this},methods:{timerClose(){0!==this.duration&&(clearTimeout(this.timer),this.timer=setTimeout((()=>{this.popup.close()}),this.duration))}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-popup-message"},[e.createElementVNode("view",{class:e.normalizeClass(["uni-popup-message__box fixforpc-width","uni-popup__"+i.type])},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("text",{class:e.normalizeClass(["uni-popup-message-text","uni-popup__"+i.type+"-text"])},e.toDisplayString(i.message),3)]),!0)],2)])}],["__scopeId","data-v-ec73a802"]]);class gr{constructor(e,t){this.options=e,this.animation=uni.createAnimation(e),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let n=this.currentStepAnimates[this.next],i={};if(i=n||{styles:{},config:{}},yr.includes(e)){i.styles.transform||(i.styles.transform="");let n="";"rotate"===e&&(n="deg"),i.styles.transform+=`${e}(${t+n}) `}else i.styles[e]=`${t}`;this.currentStepAnimates[this.next]=i}_animateRun(e={},t={}){let n=this.$.$refs.ani.ref;if(n)return new Promise(((i,r)=>{nvueAnimation.transition(n,{styles:e,...t},(e=>{i()}))}))}_nvueNextAnimate(e,t=0,n){let i=e[t];if(i){let{styles:r,config:o}=i;this._animateRun(r,o).then((()=>{t+=1,this._nvueNextAnimate(e,t,n)}))}else this.currentStepAnimates={},"function"==typeof n&&n(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const yr=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function _r(e,t){if(t)return clearTimeout(t.timer),new gr(e,t)}yr.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{gr.prototype[e]=function(...t){return this.animation[e](...t),this}}));const br=o({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let n in e){t+=this.toLine(n)+":"+e[n]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=_r(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(zt){n("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:143",`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=_r(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},n=(e,n)=>{"fade"===n?t.opacity=this.animationType(e)[n]:t.transform+=this.animationType(e)[n]+" "};return"string"==typeof this.modeClass?n(e,this.modeClass):this.modeClass.forEach((t=>{n(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let n=null;"fade"===t?n=e?0:1:(n=e?"-100%":"0","zoom-in"===t&&(n=e?.8:1),"zoom-out"===t&&(n=e?1.2:1),"slide-right"===t&&(n=e?"100%":"0"),"slide-bottom"===t&&(n=e?"100%":"0")),this.animation[this.animationMode()[t]](n)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((n=>{t(e,n)})),this.animation},animationType:e=>({fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(t,n,i,r,o,s){return o.isShow||i.onceRender?e.withDirectives((e.openBlock(),e.createElementBlock("view",{key:0,ref:"ani",animation:o.animationData,class:e.normalizeClass(i.customClass),style:e.normalizeStyle(s.transformStyles),onClick:n[0]||(n[0]=(...e)=>s.onClick&&s.onClick(...e))},[e.renderSlot(t.$slots,"default")],14,["animation"])),[[e.vShow,o.isShow]]):e.createCommentVNode("",!0)}]]),vr={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},onceRender:{type:Boolean,default:!1}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:n,safeArea:i,screenHeight:r,safeAreaInsets:o}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+(n||0),i&&this.safeArea?this.safeAreaInsets=o.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){this.showPopup&&(clearTimeout(this.timer),this.showPopup=!1);e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):n("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:285","缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}};const wr=o(vr,[["render",function(t,n,r,o,s,a){const l=i(e.resolveDynamicComponent("uni-transition"),br);return s.showPopup||r.onceRender?e.withDirectives((e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-popup",[s.popupstyle,a.isDesktop?"fixforpc-z-index":""]])},[e.createElementVNode("view",{onTouchstart:n[1]||(n[1]=(...e)=>a.touchstart&&a.touchstart(...e))},[s.maskShow?(e.openBlock(),e.createBlock(l,{key:"1",name:"mask","mode-class":"fade",styles:s.maskClass,duration:s.duration,show:s.showTrans,onClick:a.onTap},null,8,["styles","duration","show","onClick"])):e.createCommentVNode("",!0),e.createVNode(l,{key:"2","mode-class":s.ani,name:"content",styles:s.transClass,duration:s.duration,show:s.showTrans,onClick:a.onTap,"once-render":r.onceRender},{default:e.withCtx((()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-popup__wrapper",[s.popupstyle]]),style:e.normalizeStyle({backgroundColor:a.bg}),onClick:n[0]||(n[0]=(...e)=>a.clear&&a.clear(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)])),_:3},8,["mode-class","styles","duration","show","onClick","once-render"])],32)],2)),[[e.vShow,s.showPopup]]):e.createCommentVNode("",!0)}],["__scopeId","data-v-208f7fff"]]),kr={en:{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},"zh-Hans":{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"},"zh-Hant":{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}},{t:Sr}=Be(kr);const xr=o({name:"uniPopupDialog",mixins:[fr],emits:["confirm","close"],props:{value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""}},data:()=>({dialogType:"error",focus:!1,val:""}),computed:{okText(){return this.confirmText||Sr("uni-popup.ok")},closeText(){return this.cancelText||Sr("uni-popup.cancel")},placeholderText(){return this.placeholder||Sr("uni-popup.placeholder")},titleText(){return this.title||Sr("uni-popup.title")}},watch:{type(e){this.dialogType=e},mode(e){"input"===e&&(this.dialogType="info")},value(e){this.val=e}},created(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted(){this.focus=!0},methods:{onOk(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog(){this.$emit("close"),this.beforeClose||this.popup.close()},close(){this.popup.close()}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-popup-dialog"},[e.createElementVNode("view",{class:"uni-dialog-title"},[e.createElementVNode("text",{class:e.normalizeClass(["uni-dialog-title-text",["uni-popup__"+o.dialogType]])},e.toDisplayString(s.titleText),3)]),"base"===i.mode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-dialog-content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("text",{class:"uni-dialog-content-text"},e.toDisplayString(i.content),1)]),!0)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-dialog-content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-dialog-input","onUpdate:modelValue":n[0]||(n[0]=e=>o.val=e),type:"text",placeholder:s.placeholderText,focus:o.focus},null,8,["placeholder","focus"]),[[e.vModelText,o.val]])]),!0)])),e.createElementVNode("view",{class:"uni-dialog-button-group"},[e.createElementVNode("view",{class:"uni-dialog-button",onClick:n[1]||(n[1]=(...e)=>s.closeDialog&&s.closeDialog(...e))},[e.createElementVNode("text",{class:"uni-dialog-button-text"},e.toDisplayString(s.closeText),1)]),e.createElementVNode("view",{class:"uni-dialog-button uni-border-left",onClick:n[2]||(n[2]=(...e)=>s.onOk&&s.onOk(...e))},[e.createElementVNode("text",{class:"uni-dialog-button-text uni-button-color"},e.toDisplayString(s.okText),1)])])])}],["__scopeId","data-v-90d75db5"]]);var Tr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,62,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,63,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];const Er={getRandomValues(e){if(!(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8ClampedArray))throw new Error("Expected an integer array");if(e.byteLength>65536)throw new Error("Can only request a maximum of 65536 bytes");var t;return function(e,t){for(var n,i=e.length,r="="===e[i-2]?2:"="===e[i-1]?1:0,o=0,s=i-r&4294967292,a=0;a<s;a+=4)n=Tr[e.charCodeAt(a)]<<18|Tr[e.charCodeAt(a+1)]<<12|Tr[e.charCodeAt(a+2)]<<6|Tr[e.charCodeAt(a+3)],t[o++]=n>>16&255,t[o++]=n>>8&255,t[o++]=255&n;1===r&&(n=Tr[e.charCodeAt(a)]<<10|Tr[e.charCodeAt(a+1)]<<4|Tr[e.charCodeAt(a+2)]>>2,t[o++]=n>>8&255,t[o++]=255&n),2===r&&(n=Tr[e.charCodeAt(a)]<<2|Tr[e.charCodeAt(a+1)]>>4,t[o++]=255&n)}((t="DCloud-Crypto",weex.requireModule(t)).getRandomValues(e.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e}};let Cr;const Ir=new Uint8Array(16);function Dr(){if(!Cr&&(Cr=void 0!==Er&&Er.getRandomValues&&Er.getRandomValues.bind(Er),!Cr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cr(Ir)}const Nr=[];for(let So=0;So<256;++So)Nr.push((So+256).toString(16).slice(1));const Br={randomUUID:void 0!==Er&&Er.randomUUID&&Er.randomUUID.bind(Er)};function Ar(e,t,n){if(Br.randomUUID&&!t&&!e)return Br.randomUUID();const i=(e=e||{}).random||(e.rng||Dr)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return Nr[e[t+0]]+Nr[e[t+1]]+Nr[e[t+2]]+Nr[e[t+3]]+"-"+Nr[e[t+4]]+Nr[e[t+5]]+"-"+Nr[e[t+6]]+Nr[e[t+7]]+"-"+Nr[e[t+8]]+Nr[e[t+9]]+"-"+Nr[e[t+10]]+Nr[e[t+11]]+Nr[e[t+12]]+Nr[e[t+13]]+Nr[e[t+14]]+Nr[e[t+15]]}(i)}var Pr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Mr(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vr={};({get exports(){return Vr},set exports(e){Vr=e}}).exports=function(){function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){if(!a&&Mr)return Mr(s);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return r(t[s][1][e]||e)}),c,c.exports,e,t,n,i)}return n[s].exports}for(var o=Mr,s=0;s<i.length;s++)r(i[s]);return r}return e}()({1:[function(e,t,n){(function(n,i){var r=e("events"),o=e("./store"),s=e("mqtt-packet"),a=e("readable-stream").Writable,l=e("inherits"),c=e("reinterval"),u=e("./validations"),d=e("xtend"),h=i.setImmediate||function(e){n.nextTick(e)},p={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},f={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function m(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function g(e,t,n){e.emit("packetsend",t),!s.writeToStream(t,e.stream,e.options)&&n?e.stream.once("drain",n):n&&n()}function y(e){e&&Object.keys(e).forEach((function(t){"function"==typeof e[t].cb&&(e[t].cb(new Error("Connection closed")),delete e[t])}))}function _(e){e&&Object.keys(e).forEach((function(t){e[t].volatile&&"function"==typeof e[t].cb&&(e[t].cb(new Error("Connection closed")),delete e[t])}))}function b(e,t,n,i){e.outgoingStore.put(t,(function(r){if(r)return n&&n(r);i(),g(e,t,n)}))}function v(){}function w(e,t){var n,i=this;if(!(this instanceof w))return new w(e,t);for(n in this.options=t||{},p)void 0===this.options[n]?this.options[n]=p[n]:this.options[n]=t[n];this.options.clientId="string"==typeof t.clientId?t.clientId:m(),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=e,this.outgoingStore=t.outgoingStore||new o,this.incomingStore=t.incomingStore||new o,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this._firstConnection=!0,this.on("close",(function(){this.connected=!1,clearTimeout(this.connackTimer)})),this.on("connect",(function(){var e=this.queue;function t(){var n=e.shift(),r=null;n&&(r=n.packet,i._sendPacket(r,(function(e){n.cb&&n.cb(e),t()})))}t()})),this.on("close",(function(){null!==i.pingTimer&&(i.pingTimer.clear(),i.pingTimer=null)})),this.on("close",this._setupReconnect),r.EventEmitter.call(this),this._setupStream()}l(w,r.EventEmitter),w.prototype._setupStream=function(){var e,t=this,i=new a,r=s.parser(this.options),o=null,l=[];function c(){if(l.length)n.nextTick(u);else{var e=o;o=null,e()}}function u(){var e=l.shift();if(e)t._handlePacket(e,c);else{var n=o;o=null,n&&n()}}if(this._clearReconnect(),this.stream=this.streamBuilder(this),r.on("packet",(function(e){l.push(e)})),i._write=function(e,t,n){o=n,r.parse(e),u()},this.stream.pipe(i),this.stream.on("error",v),this.stream.on("close",(function(){_(t.outgoing),t.emit("close")})),(e=Object.create(this.options)).cmd="connect",g(this,e),r.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.emit("error",new Error("Packet has no Authentication Method")),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&g(this,d({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){t._cleanUp(!0)}),this.options.connectTimeout)},w.prototype._handlePacket=function(e,t){var n=this.options;if(5===n.protocolVersion&&n.properties&&n.properties.maximumPacketSize&&n.properties.maximumPacketSize<e.length)return this.emit("error",new Error("exceeding packets size "+e.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"pingresp":this._handlePingresp(e),t();break;case"disconnect":this._handleDisconnect(e),t()}},w.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},w.prototype.publish=function(e,t,n,i){var r,o=this.options;if("function"==typeof n&&(i=n,n=null),n=d({qos:0,retain:!1,dup:!1},n),this._checkDisconnecting(i))return this;switch(r={cmd:"publish",topic:e,payload:t,qos:n.qos,retain:n.retain,messageId:this._nextId(),dup:n.dup},5===o.protocolVersion&&(r.properties=n.properties,(!o.properties&&r.properties&&r.properties.topicAlias||n.properties&&o.properties&&(n.properties.topicAlias&&o.properties.topicAliasMaximum&&n.properties.topicAlias>o.properties.topicAliasMaximum||!o.properties.topicAliasMaximum&&n.properties.topicAlias))&&delete r.properties.topicAlias),n.qos){case 1:case 2:this.outgoing[r.messageId]={volatile:!1,cb:i||v},this._storeProcessing?(this._packetIdsDuringStoreProcessing[r.messageId]=!1,this._storePacket(r,void 0,n.cbStorePut)):this._sendPacket(r,void 0,n.cbStorePut);break;default:this._storeProcessing?this._storePacket(r,i,n.cbStorePut):this._sendPacket(r,i,n.cbStorePut)}return this},w.prototype.subscribe=function(){for(var e,t=new Array(arguments.length),n=0;n<arguments.length;n++)t[n]=arguments[n];var i,r=[],o=t.shift(),s=o.resubscribe,a=t.pop()||v,l=t.pop(),c=this,p=this.options.protocolVersion;if(delete o.resubscribe,"string"==typeof o&&(o=[o]),"function"!=typeof a&&(l=a,a=v),null!==(i=u.validateTopics(o)))return h(a,new Error("Invalid topic "+i)),this;if(this._checkDisconnecting(a))return this;var f={qos:0};if(5===p&&(f.nl=!1,f.rap=!1,f.rh=0),l=d(f,l),Array.isArray(o)?o.forEach((function(e){if(!c._resubscribeTopics.hasOwnProperty(e)||c._resubscribeTopics[e].qos<l.qos||s){var t={topic:e,qos:l.qos};5===p&&(t.nl=l.nl,t.rap=l.rap,t.rh=l.rh,t.properties=l.properties),r.push(t)}})):Object.keys(o).forEach((function(e){if(!c._resubscribeTopics.hasOwnProperty(e)||c._resubscribeTopics[e].qos<o[e].qos||s){var t={topic:e,qos:o[e].qos};5===p&&(t.nl=o[e].nl,t.rap=o[e].rap,t.rh=o[e].rh,t.properties=l.properties),r.push(t)}})),e={cmd:"subscribe",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:this._nextId()},l.properties&&(e.properties=l.properties),r.length){if(this.options.resubscribe){var m=[];r.forEach((function(e){if(c.options.reconnectPeriod>0){var t={qos:e.qos};5===p&&(t.nl=e.nl||!1,t.rap=e.rap||!1,t.rh=e.rh||0,t.properties=e.properties),c._resubscribeTopics[e.topic]=t,m.push(e.topic)}})),c.messageIdToTopic[e.messageId]=m}return this.outgoing[e.messageId]={volatile:!0,cb:function(e,t){if(!e)for(var n=t.granted,i=0;i<n.length;i+=1)r[i].qos=n[i];a(e,r)}},this._sendPacket(e),this}a(null,[])},w.prototype.unsubscribe=function(){for(var e={cmd:"unsubscribe",qos:1,messageId:this._nextId()},t=this,n=new Array(arguments.length),i=0;i<arguments.length;i++)n[i]=arguments[i];var r=n.shift(),o=n.pop()||v,s=n.pop();return"string"==typeof r&&(r=[r]),"function"!=typeof o&&(s=o,o=v),this._checkDisconnecting(o)||("string"==typeof r?e.unsubscriptions=[r]:"object"==typeof r&&r.length&&(e.unsubscriptions=r),this.options.resubscribe&&e.unsubscriptions.forEach((function(e){delete t._resubscribeTopics[e]})),"object"==typeof s&&s.properties&&(e.properties=s.properties),this.outgoing[e.messageId]={volatile:!0,cb:o},this._sendPacket(e)),this},w.prototype.end=function(){var e=this,t=arguments[0],n=arguments[1],i=arguments[2];function r(){e.disconnected=!0,e.incomingStore.close((function(){e.outgoingStore.close((function(){i&&i.apply(null,arguments),e.emit("end")}))})),e._deferredReconnect&&e._deferredReconnect()}function o(){e._cleanUp(t,h.bind(null,r),n)}return null!=t&&"boolean"==typeof t||(i=n||v,n=t,t=!1,"object"!=typeof n&&(i=n,n=null,"function"!=typeof i&&(i=v))),"object"!=typeof n&&(i=n,n=null),i=i||v,this.disconnecting||(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,o,10)):o()),this},w.prototype.removeOutgoingMessage=function(e){var t=this.outgoing[e]?this.outgoing[e].cb:null;return delete this.outgoing[e],this.outgoingStore.del({messageId:e},(function(){t(new Error("Message removed"))})),this},w.prototype.reconnect=function(e){var t=this,n=function(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new o,t.outgoingStore=t.options.outgoingStore||new o,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=n:n(),this},w.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},w.prototype._setupReconnect=function(){var e=this;!e.disconnecting&&!e.reconnectTimer&&e.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),e.reconnectTimer=setInterval((function(){e._reconnect()}),e.options.reconnectPeriod))},w.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},w.prototype._cleanUp=function(e,t){var n=arguments[2];if(t&&this.stream.on("close",t),e)0===this.options.reconnectPeriod&&this.options.clean&&y(this.outgoing),this.stream.destroy();else{var i=d({cmd:"disconnect"},n);this._sendPacket(i,h.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(this.stream.removeListener("close",t),t())},w.prototype._sendPacket=function(e,t,n){if(n=n||v,this.connected){switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void b(this,e,t,n);default:return void g(this,e,t)}switch(e.qos){case 2:case 1:b(this,e,t,n);break;default:g(this,e,t)}}else this._storePacket(e,t,n)},w.prototype._storePacket=function(e,t,n){n=n||v,0===(e.qos||0)&&this.queueQoSZero||"publish"!==e.cmd?this.queue.push({packet:e,cb:t}):e.qos>0?(t=this.outgoing[e.messageId]?this.outgoing[e.messageId].cb:null,this.outgoingStore.put(e,(function(e){if(e)return t&&t(e);n()}))):t&&t(new Error("No connection to broker"))},w.prototype._setupPingTimer=function(){var e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=c((function(){e._checkPing()}),1e3*this.options.keepalive))},w.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},w.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},w.prototype._handlePingresp=function(){this.pingResp=!0},w.prototype._handleConnack=function(e){var t=this.options,n=5===t.protocolVersion?e.reasonCode:e.returnCode;if(clearTimeout(this.connackTimer),e.properties&&(e.properties.topicAliasMaximum&&(t.properties||(t.properties={}),t.properties.topicAliasMaximum=e.properties.topicAliasMaximum),e.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=e.properties.serverKeepAlive,this._shiftPingInterval()),e.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=e.properties.maximumPacketSize)),0===n)this.reconnecting=!1,this._onConnect(e);else if(n>0){var i=new Error("Connection refused: "+f[n]);i.code=n,this.emit("error",i)}},w.prototype._handlePublish=function(e,t){t=void 0!==t?t:v;var n=e.topic.toString(),i=e.payload,r=e.qos,o=e.messageId,s=this,a=this.options,l=[0,16,128,131,135,144,145,151,153];switch(r){case 2:a.customHandleAcks(n,i,e,(function(n,i){return n instanceof Error||(i=n,n=null),n?s.emit("error",n):-1===l.indexOf(i)?s.emit("error",new Error("Wrong reason code for pubrec")):void(i?s._sendPacket({cmd:"pubrec",messageId:o,reasonCode:i},t):s.incomingStore.put(e,(function(){s._sendPacket({cmd:"pubrec",messageId:o},t)})))}));break;case 1:a.customHandleAcks(n,i,e,(function(r,a){return r instanceof Error||(a=r,r=null),r?s.emit("error",r):-1===l.indexOf(a)?s.emit("error",new Error("Wrong reason code for puback")):(a||s.emit("message",n,i,e),void s.handleMessage(e,(function(e){if(e)return t&&t(e);s._sendPacket({cmd:"puback",messageId:o,reasonCode:a},t)})))}));break;case 0:this.emit("message",n,i,e),this.handleMessage(e,t)}},w.prototype.handleMessage=function(e,t){t()},w.prototype._handleAck=function(e){var t,n=e.messageId,i=e.cmd,r=null,o=this.outgoing[n]?this.outgoing[n].cb:null,s=this;if(o){switch(i){case"pubcomp":case"puback":var a=e.reasonCode;a&&a>0&&16!==a&&((t=new Error("Publish error: "+f[a])).code=a,o(t,e)),delete this.outgoing[n],this.outgoingStore.del(e,o);break;case"pubrec":r={cmd:"pubrel",qos:2,messageId:n};var l=e.reasonCode;l&&l>0&&16!==l?((t=new Error("Publish error: "+f[l])).code=l,o(t,e)):this._sendPacket(r);break;case"suback":delete this.outgoing[n];for(var c=0;c<e.granted.length;c++)if(0!=(128&e.granted[c])){var u=this.messageIdToTopic[n];u&&u.forEach((function(e){delete s._resubscribeTopics[e]}))}o(null,e);break;case"unsuback":delete this.outgoing[n],o(null);break;default:s.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},w.prototype._handlePubrel=function(e,t){t=void 0!==t?t:v;var n=e.messageId,i=this,r={cmd:"pubcomp",messageId:n};i.incomingStore.get(e,(function(e,n){e?i._sendPacket(r,t):(i.emit("message",n.topic,n.payload,n),i.handleMessage(n,(function(e){if(e)return t(e);i.incomingStore.del(n,v),i._sendPacket(r,t)})))}))},w.prototype._handleDisconnect=function(e){this.emit("disconnect",e)},w.prototype._nextId=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},w.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},w.prototype._resubscribe=function(e){var t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!e.sessionPresent)&&t.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion)for(var n=0;n<t.length;n++){var i={};i[t[n]]=this._resubscribeTopics[t[n]],i.resubscribe=!0,this.subscribe(i,{properties:i[t[n]].properties})}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},w.prototype._onConnect=function(e){if(this.disconnected)this.emit("connect",e);else{var t=this;this._setupPingTimer(),this._resubscribe(e),this.connected=!0,n()}function n(){var i=t.outgoingStore.createStream();function r(){t._storeProcessing=!1,t._packetIdsDuringStoreProcessing={}}function o(){i.destroy(),i=null,r()}function s(){if(i){t._storeProcessing=!0;var e,n=i.read(1);n?t._packetIdsDuringStoreProcessing[n.messageId]?s():t.disconnecting||t.reconnectTimer?i.destroy&&i.destroy():(e=t.outgoing[n.messageId]?t.outgoing[n.messageId].cb:null,t.outgoing[n.messageId]={volatile:!1,cb:function(t,n){e&&e(t,n),s()}},t._packetIdsDuringStoreProcessing[n.messageId]=!0,t._sendPacket(n)):i.once("readable",s)}}t.once("close",o),i.on("error",(function(e){r(),t.removeListener("close",o),t.emit("error",e)})),i.on("end",(function(){var i=!0;for(var s in t._packetIdsDuringStoreProcessing)if(!t._packetIdsDuringStoreProcessing[s]){i=!1;break}i?(r(),t.removeListener("close",o),t.emit("connect",e)):n()})),s()}},t.exports=w}).call(this,e("_process"),void 0!==Pr?Pr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./store":7,"./validations":8,_process:92,events:13,inherits:80,"mqtt-packet":84,"readable-stream":108,reinterval:109,xtend:121}],2:[function(e,t,n){(function(n){var i,r,o,s=e("readable-stream").Transform,a=e("duplexify"),l=e("base64-js"),c=!1;function u(){var e=new s;return e._write=function(e,t,n){i.sendSocketMessage({data:e.buffer,success:function(){n()},fail:function(){n(new Error)}})},e._flush=function(e){i.closeSocket({success:function(){e()}})},e}function d(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}function h(e,t){var n="alis"===e.protocol?"wss":"ws",i=n+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(i=n+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(i=e.transformWsUrl(i,e,t)),i}function p(){c||(c=!0,i.onSocketOpen((function(){o.setReadable(r),o.setWritable(r),o.emit("connect")})),i.onSocketMessage((function(e){if("string"==typeof e.data){var t=l.toByteArray(e.data),i=n.from(t);r.push(i)}else{var o=new FileReader;o.addEventListener("load",(function(){var e=o.result;e=e instanceof ArrayBuffer?n.from(e):n.from(e,"utf8"),r.push(e)})),o.readAsArrayBuffer(e.data)}})),i.onSocketClose((function(){o.end(),o.destroy()})),i.onSocketError((function(e){o.destroy(e)})))}function f(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");var n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";d(t);var s=h(t,e);return(i=t.my).connectSocket({url:s,protocols:n}),r=u(),o=a.obj(),p(),o}t.exports=f}).call(this,e("buffer").Buffer)},{"base64-js":10,buffer:12,duplexify:17,"readable-stream":108}],3:[function(e,t,n){var i=e("net");function r(e,t){var n,r;return t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",n=t.port,r=t.hostname,i.createConnection(n,r)}t.exports=r},{net:11}],4:[function(e,t,n){var i=e("tls");function r(e,t){var n;function r(i){t.rejectUnauthorized&&e.emit("error",i),n.end()}return t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,(n=i.connect(t)).on("secureConnect",(function(){t.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",r)})),n.on("error",r),n}t.exports=r},{tls:11}],5:[function(e,t,n){(function(n){var i=e("websocket-stream"),r=e("url"),o=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],s="browser"===n.title;function a(e,t){var n=e.protocol+"://"+e.hostname+":"+e.port+e.path;return"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}function l(e){e.hostname||(e.hostname="localhost"),e.port||("wss"===e.protocol?e.port=443:e.port=80),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={}),s||"wss"!==e.protocol||o.forEach((function(t){e.hasOwnProperty(t)&&!e.wsOptions.hasOwnProperty(t)&&(e.wsOptions[t]=e[t])}))}function c(e,t){var n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";l(t);var r=a(t,e);return i(r,[n],t.wsOptions)}function u(e,t){return c(e,t)}function d(e,t){if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var n=r.parse(document.URL);t.hostname=n.hostname,t.port||(t.port=n.port)}return c(e,t)}t.exports=s?d:u}).call(this,e("_process"))},{_process:92,url:113,"websocket-stream":118}],6:[function(e,t,n){(function(n,i){var r,o,s,a=e("readable-stream").Transform,l=e("duplexify");function c(){var e=new a;return e._write=function(e,t,n){r.send({data:e.buffer,success:function(){n()},fail:function(e){n(new Error(e))}})},e._flush=function(e){r.close({success:function(){e()}})},e}function u(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}function d(e,t){var n="wxs"===e.protocol?"wss":"ws",i=n+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(i=n+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(i=e.transformWsUrl(i,e,t)),i}function h(){r.onOpen((function(){s.setReadable(o),s.setWritable(o),s.emit("connect")})),r.onMessage((function(e){var t=e.data;t=t instanceof ArrayBuffer?i.from(t):i.from(t,"utf8"),o.push(t)})),r.onClose((function(){s.end(),s.destroy()})),r.onError((function(e){s.destroy(new Error(e.errMsg))}))}function p(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");var i="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";u(t);var a=d(t,e);r=wx.connectSocket({url:a,protocols:i}),o=c(),(s=l.obj())._destroy=function(e,t){r.close({success:function(){t&&t(e)}})};var p=s.destroy;return s.destroy=function(){s.destroy=p;var e=this;n.nextTick((function(){r.close({fail:function(){e._destroy(new Error)}})}))}.bind(s),h(),s}t.exports=p}).call(this,e("_process"),e("buffer").Buffer)},{_process:92,buffer:12,duplexify:17,"readable-stream":108}],7:[function(e,t,n){(function(n){var i=e("xtend"),r=e("readable-stream").Readable,o={objectMode:!0},s={clean:!0},a=e("es6-map");function l(e){if(!(this instanceof l))return new l(e);this.options=e||{},this.options=i(s,e),this._inflights=new a}l.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},l.prototype.createStream=function(){var e=new r(o),t=!1,i=[],s=0;return this._inflights.forEach((function(e,t){i.push(e)})),e._read=function(){!t&&s<i.length?this.push(i[s++]):this.push(null)},e.destroy=function(){if(!t){var e=this;t=!0,n.nextTick((function(){e.emit("close")}))}},e},l.prototype.del=function(e,t){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},l.prototype.get=function(e,t){return(e=this._inflights.get(e.messageId))?t(null,e):t&&t(new Error("missing packet")),this},l.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},t.exports=l}).call(this,e("_process"))},{_process:92,"es6-map":67,"readable-stream":108,xtend:121}],8:[function(e,t,n){function i(e){for(var t=e.split("/"),n=0;n<t.length;n++)if("+"!==t[n]){if("#"===t[n])return n===t.length-1;if(-1!==t[n].indexOf("+")||-1!==t[n].indexOf("#"))return!1}return!0}function r(e){if(0===e.length)return"empty_topic_list";for(var t=0;t<e.length;t++)if(!i(e[t]))return e[t];return null}t.exports={validateTopics:r}},{}],9:[function(e,t,n){(function(n){var i=e("../client"),r=e("../store"),o=e("url"),s=e("xtend"),a={};function l(e){var t;e.auth&&((t=e.auth.match(/^(.+):(.+)$/))?(e.username=t[1],e.password=t[2]):e.username=e.auth)}function c(e,t){if("object"!=typeof e||t||(t=e,e=null),t=t||{},e){var n=o.parse(e,!0);if(null!=n.port&&(n.port=Number(n.port)),null===(t=s(n,t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(l(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!a[t.protocol]){var r=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((function(e,t){return(!r||t%2!=0)&&"function"==typeof a[e]}))[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");function c(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),a[t.protocol](e,t)}return t.protocol&&(t.defaultProtocol=t.protocol),new i(c,t)}"browser"!==n.title?(a.mqtt=e("./tcp"),a.tcp=e("./tcp"),a.ssl=e("./tls"),a.tls=e("./tls"),a.mqtts=e("./tls")):(a.wx=e("./wx"),a.wxs=e("./wx"),a.ali=e("./ali"),a.alis=e("./ali")),a.ws=e("./ws"),a.wss=e("./ws"),t.exports=c,t.exports.connect=c,t.exports.MqttClient=i,t.exports.Store=r}).call(this,e("_process"))},{"../client":1,"../store":7,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:92,url:113,xtend:121}],10:[function(e,t,n){n.byteLength=u,n.toByteArray=h,n.fromByteArray=m;for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e){var t=c(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function d(e,t,n){return 3*(t+n)/4-n}function h(e){for(var t,n=c(e),i=n[0],s=n[1],a=new o(d(e,i,s)),l=0,u=s>0?i-4:i,h=0;h<u;h+=4)t=r[e.charCodeAt(h)]<<18|r[e.charCodeAt(h+1)]<<12|r[e.charCodeAt(h+2)]<<6|r[e.charCodeAt(h+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;return 2===s&&(t=r[e.charCodeAt(h)]<<2|r[e.charCodeAt(h+1)]>>4,a[l++]=255&t),1===s&&(t=r[e.charCodeAt(h)]<<10|r[e.charCodeAt(h+1)]<<4|r[e.charCodeAt(h+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t),a}function p(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function f(e,t,n){for(var i,r=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(p(i));return r.join("")}function m(e){for(var t,n=e.length,r=n%3,o=[],s=16383,a=0,l=n-r;a<l;a+=s)o.push(f(e,a,a+s>l?l:a+s));return 1===r?(t=e[n-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],11:[function(e,t,n){},{}],12:[function(e,t,i){var r=e("base64-js"),o=e("ieee754");i.Buffer=c,i.SlowBuffer=b,i.INSPECT_MAX_BYTES=50;var s=2147483647;function a(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(zt){return!1}}function l(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=c.prototype,t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return g(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return c.from(i,t,n);var r=y(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e,t,n){return d(e),e<=0?l(e):void 0!==t?"string"==typeof n?l(e).fill(t,n):l(e).fill(t):l(e)}function p(e){return d(e),l(e<0?0:0|_(e))}function f(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|v(e,t),i=l(n),r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}function m(e){for(var t=e.length<0?0:0|_(e.length),n=l(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function g(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=c.prototype,i}function y(e){if(c.isBuffer(e)){var t=0|_(e.length),n=l(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||X(e.length)?l(0):m(e):"Buffer"===e.type&&Array.isArray(e.data)?m(e.data):void 0}function _(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),c.alloc(+e)}function v(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return i?-1:K(e).length;t=(""+t).toLowerCase(),r=!0}}function w(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return V(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return B(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function k(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function S(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:x(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,i,r){var o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var u=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var d=!0,h=0;h<l;h++)if(c(e,o+h)!==c(t,h)){d=!1;break}if(d)return o}return-1}function T(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(X(a))return s;e[n+s]=a}return s}function E(e,t,n,i){return Q(K(t,e.length-n),e,n,i)}function C(e,t,n,i){return Q(J(t),e,n,i)}function I(e,t,n,i){return C(e,t,n,i)}function D(e,t,n,i){return Q(G(t),e,n,i)}function N(e,t,n,i){return Q(Y(t,e.length-n),e,n,i)}function B(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,s,a,l,c=e[r],u=null,d=c>239?4:c>223?3:c>191?2:1;if(r+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[r+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[r+1],s=e[r+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[r+1],s=e[r+2],a=e[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return M(i)}i.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=a(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||n("error","at node_modules/mqtt/dist/mqtt.js:2450","This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(e,t,n){return h(e,t,n)},c.allocUnsafe=function(e){return p(e)},c.allocUnsafeSlow=function(e){return p(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Z(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(Z(o,Uint8Array)&&(o=c.from(o)),!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},c.byteLength=v,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},c.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):w.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,r){if(Z(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(i,r),u=e.slice(t,n),d=0;d<a;++d)if(l[d]!==u[d]){o=l[d],s=u[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return T(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return I(this,e,t,n);case"base64":return D(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function M(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=P));return n}function V(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function O(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function R(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=W(e[o]);return r}function L(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,n,i,r,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function F(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,i,r){return t=+t,n>>>=0,r||F(e,t,n,4),o.write(e,t,n,i,23,4),n+4}function q(e,t,n,i,r){return t=+t,n>>>=0,r||F(e,t,n,8),o.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=c.prototype,i},c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},c.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||U(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||U(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);U(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);U(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var o=r-1;o>=0;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return r},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var r=e.charCodeAt(0);("utf8"===i&&r<128||"latin1"===i)&&(e=r)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:c.from(e,i),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var $=/[^+/0-9A-Za-z-_]/g;function H(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function J(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(n=e.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}function G(e){return r.toByteArray(H(e))}function Q(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}},{"base64-js":10,ieee754:79}],13:[function(e,t,i){var r=Object.create||T,o=Object.keys||E,s=Function.prototype.bind||C;function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var l,c=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),l=0===u.x}catch(I){l=!1}function d(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,n){if(t)e.call(n);else for(var i=e.length,r=S(e,i),o=0;o<i;++o)r[o].call(n)}function p(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,o=S(e,r),s=0;s<r;++s)o[s].call(n,i)}function f(e,t,n,i,r){if(t)e.call(n,i,r);else for(var o=e.length,s=S(e,o),a=0;a<o;++a)s[a].call(n,i,r)}function m(e,t,n,i,r,o){if(t)e.call(n,i,r,o);else for(var s=e.length,a=S(e,s),l=0;l<s;++l)a[l].call(n,i,r,o)}function g(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,o=S(e,r),s=0;s<r;++s)o[s].apply(n,i)}function y(e,t,i,o){var s,a,l;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),a=e._events),l=a[t]):(a=e._events=r(null),e._eventsCount=0),l){if("function"==typeof l?l=a[t]=o?[i,l]:[l,i]:o?l.unshift(i):l.push(i),!l.warned&&(s=d(e))&&s>0&&l.length>s){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,"object"==typeof console&&console.warn&&n("warn","at node_modules/mqtt/dist/mqtt.js:4451","%s: %s",c.name,c.message)}}else l=a[t]=i,++e._eventsCount;return e}function _(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function b(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=s.call(_,i);return r.listener=n,i.wrapFn=r,r}function v(e,t,n){var i=e._events;if(!i)return[];var r=i[t];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?x(r):S(r,r.length):[]}function w(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function k(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}function S(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function x(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function T(e){var t=function(){};return t.prototype=e,new t}function E(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t);return t}function C(e){var t=this;return function(){return t.apply(e,arguments)}}l?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');c=e}}):a.defaultMaxListeners=c,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(e){var t,n,i,r,o,s,a="error"===e;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=s[e]))return!1;var c="function"==typeof n;switch(i=arguments.length){case 1:h(n,c,this);break;case 2:p(n,c,this,arguments[1]);break;case 3:f(n,c,this,arguments[1],arguments[2]);break;case 4:m(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),o=1;o<i;o++)r[o-1]=arguments[o];g(n,c,this,r)}return!0},a.prototype.addListener=function(e,t){return y(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return y(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,b(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,b(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,o,s,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=r(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():k(n,o),1===n.length&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,i;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=r(null):delete n[e]),this;if(0===arguments.length){var s,a=o(n);for(i=0;i<a.length;++i)"removeListener"!==(s=a[i])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return v(this,e,!0)},a.prototype.rawListeners=function(e){return v(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):w.call(e,t)},a.prototype.listenerCount=w,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],14:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function c(e){return void 0===e}function u(e){return"[object RegExp]"===g(e)}function d(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===g(e)}function p(e){return"[object Error]"===g(e)||e instanceof Error}function f(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function g(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=i,n.isNull=r,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=l,n.isUndefined=c,n.isRegExp=u,n.isObject=d,n.isDate=h,n.isError=p,n.isFunction=f,n.isPrimitive=m,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":81}],15:[function(e,t,n){var i,r=e("es5-ext/object/copy"),o=e("es5-ext/object/normalize-options"),s=e("es5-ext/object/valid-callable"),a=e("es5-ext/object/map"),l=e("es5-ext/object/valid-callable"),c=e("es5-ext/object/valid-value"),u=Function.prototype.bind,d=Object.defineProperty,h=Object.prototype.hasOwnProperty;i=function(e,t,n){var i,o=c(t)&&l(t.value);return delete(i=r(t)).writable,delete i.value,i.get=function(){return!n.overwriteDefinition&&h.call(this,e)?o:(t.value=u.call(o,n.resolveContext?n.resolveContext(this):this),d(this,e,t),this[e])},i},t.exports=function(e){var t=o(arguments[1]);return null!=t.resolveContext&&s(t.resolveContext),a(e,(function(e,n){return i(n,e,t)}))}},{"es5-ext/object/copy":39,"es5-ext/object/map":48,"es5-ext/object/normalize-options":49,"es5-ext/object/valid-callable":54,"es5-ext/object/valid-value":55}],16:[function(e,t,n){var i,r=e("es5-ext/object/assign"),o=e("es5-ext/object/normalize-options"),s=e("es5-ext/object/is-callable"),a=e("es5-ext/string/#/contains");i=t.exports=function(e,t){var n,i,s,l,c;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],null==e?(n=s=!0,i=!1):(n=a.call(e,"c"),i=a.call(e,"e"),s=a.call(e,"w")),c={value:t,configurable:n,enumerable:i,writable:s},l?r(o(l),c):c},i.gs=function(e,t,n){var i,l,c,u;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:s(t)?null==n?n=void 0:s(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(i=!0,l=!1):(i=a.call(e,"c"),l=a.call(e,"e")),u={get:t,set:n,configurable:i,enumerable:l},c?r(o(c),u):u}},{"es5-ext/object/assign":36,"es5-ext/object/is-callable":42,"es5-ext/object/normalize-options":49,"es5-ext/string/#/contains":56}],17:[function(e,t,n){(function(n,i){var r=e("readable-stream"),o=e("end-of-stream"),s=e("inherits"),a=e("stream-shift"),l=i.from&&i.from!==Uint8Array.from?i.from([0]):new i([0]),c=function(e,t){e._corked?e.once("uncork",t):t()},u=function(e,t){e._autoDestroy&&e.destroy(t)},d=function(e,t){return function(n){n?u(e,"premature close"===n.message?null:n):t&&!e._ended&&e.end()}},h=function(e,t){return e?e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),void t()):t()},p=function(e){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(e)},f=function(e,t,n){if(!(this instanceof f))return new f(e,t,n);r.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};s(f,r.Duplex),f.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new f(e,t,n)},f.prototype.cork=function(){1==++this._corked&&this.emit("cork")},f.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},f.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)e&&e.destroy&&e.destroy();else if(null!==e&&!1!==e){var t=this,i=o(e,{writable:!0,readable:!1},d(this,this._forwardEnd)),r=function(){var e=t._ondrain;t._ondrain=null,e&&e()},s=function(){t._writable.removeListener("drain",r),i()};this._unwrite&&n.nextTick(r),this._writable=e,this._writable.on("drain",r),this._unwrite=s,this.uncork()}else this.end()},f.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t=this,n=o(e,{writable:!1,readable:!0},d(this)),i=function(){t._forward()},r=function(){t.push(null)},s=function(){t._readable2.removeListener("readable",i),t._readable2.removeListener("end",r),n()};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:p(e),this._readable2.on("readable",i),this._readable2.on("end",r),this._unread=s,this._forward()}},f.prototype._read=function(){this._drained=!0,this._forward()},f.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=a(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},f.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;n.nextTick((function(){t._destroy(e)}))}},f.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},f.prototype._write=function(e,t,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,e,t,n)):e===l?this._finish(n):this._writable?void(!1===this._writable.write(e)?this._ondrain=n:n()):n()},f.prototype._finish=function(e){var t=this;this.emit("preend"),c(this,(function(){h(t._forwardEnd&&t._writable,(function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),c(t,e)}))}))},f.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(l),r.Writable.prototype.end.call(this,n))},t.exports=f}).call(this,e("_process"),e("buffer").Buffer)},{_process:92,buffer:12,"end-of-stream":18,inherits:80,"readable-stream":108,"stream-shift":111}],18:[function(e,t,n){var i=e("once"),r=function(){},o=function(e){return e.setHeader&&"function"==typeof e.abort},s=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},a=function(e,t,n){if("function"==typeof t)return a(e,null,t);t||(t={}),n=i(n||r);var l=e._writableState,c=e._readableState,u=t.readable||!1!==t.readable&&e.readable,d=t.writable||!1!==t.writable&&e.writable,h=function(){e.writable||p()},p=function(){d=!1,u||n.call(e)},f=function(){u=!1,d||n.call(e)},m=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},g=function(t){n.call(e,t)},y=function(){return(!u||c&&c.ended)&&(!d||l&&l.ended)?void 0:n.call(e,new Error("premature close"))},_=function(){e.req.on("finish",p)};return o(e)?(e.on("complete",p),e.on("abort",y),e.req?_():e.on("request",_)):d&&!l&&(e.on("end",h),e.on("close",h)),s(e)&&e.on("exit",m),e.on("end",f),e.on("finish",p),!1!==t.error&&e.on("error",g),e.on("close",y),function(){e.removeListener("complete",p),e.removeListener("abort",y),e.removeListener("request",_),e.req&&e.req.removeListener("finish",p),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("exit",m),e.removeListener("end",f),e.removeListener("error",g),e.removeListener("close",y)}};t.exports=a},{once:90}],19:[function(e,t,n){var i=e("../../object/valid-value");t.exports=function(){return i(this).length=0,this}},{"../../object/valid-value":55}],20:[function(e,t,n){var i=e("../../number/is-nan"),r=e("../../number/to-pos-integer"),o=e("../../object/valid-value"),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,l=Math.abs,c=Math.floor;t.exports=function(e){var t,n,u,d;if(!i(e))return s.apply(this,arguments);for(n=r(o(this).length),u=arguments[1],t=u=isNaN(u)?0:u>=0?c(u):r(this.length)-c(l(u));t<n;++t)if(a.call(this,t)&&(d=this[t],i(d)))return t;return-1}},{"../../number/is-nan":30,"../../number/to-pos-integer":34,"../../object/valid-value":55}],21:[function(e,t,n){t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":22,"./shim":23}],22:[function(e,t,n){t.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(t=n(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},{}],23:[function(e,t,n){var i=e("es6-symbol").iterator,r=e("../../function/is-arguments"),o=e("../../function/is-function"),s=e("../../number/to-pos-integer"),a=e("../../object/valid-callable"),l=e("../../object/valid-value"),c=e("../../object/is-value"),u=e("../../string/is-string"),d=Array.isArray,h=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;t.exports=function(e){var t,n,m,g,y,_,b,v,w,k,S=arguments[1],x=arguments[2];if(e=Object(l(e)),c(S)&&a(S),this&&this!==Array&&o(this))t=this;else{if(!S){if(r(e))return 1!==(y=e.length)?Array.apply(null,e):((g=new Array(1))[0]=e[0],g);if(d(e)){for(g=new Array(y=e.length),n=0;n<y;++n)g[n]=e[n];return g}}g=[]}if(!d(e))if(void 0!==(w=e[i])){for(b=a(w).call(e),t&&(g=new t),v=b.next(),n=0;!v.done;)k=S?h.call(S,x,v.value,n):v.value,t?(p.value=k,f(g,n,p)):g[n]=k,v=b.next(),++n;y=n}else if(u(e)){for(y=e.length,t&&(g=new t),n=0,m=0;n<y;++n)k=e[n],n+1<y&&(_=k.charCodeAt(0))>=55296&&_<=56319&&(k+=e[++n]),k=S?h.call(S,x,k,m):k,t?(p.value=k,f(g,m,p)):g[m]=k,++m;y=m}if(void 0===y)for(y=s(e.length),t&&(g=new t(y)),n=0;n<y;++n)k=S?h.call(S,x,e[n],n):e[n],t?(p.value=k,f(g,n,p)):g[n]=k;return t&&(p.value=null,g.length=y),g}},{"../../function/is-arguments":24,"../../function/is-function":25,"../../number/to-pos-integer":34,"../../object/is-value":44,"../../object/valid-callable":54,"../../object/valid-value":55,"../../string/is-string":59,"es6-symbol":73}],24:[function(e,t,n){var i=Object.prototype.toString,r=i.call(function(){return arguments}());t.exports=function(e){return i.call(e)===r}},{}],25:[function(e,t,n){var i=Object.prototype.toString,r=i.call(e("./noop"));t.exports=function(e){return"function"==typeof e&&i.call(e)===r}},{"./noop":26}],26:[function(e,t,n){t.exports=function(){}},{}],27:[function(e,t,n){t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":28,"./shim":29}],28:[function(e,t,n){t.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},{}],29:[function(e,t,n){t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],30:[function(e,t,n){t.exports=e("./is-implemented")()?Number.isNaN:e("./shim")},{"./is-implemented":31,"./shim":32}],31:[function(e,t,n){t.exports=function(){var e=Number.isNaN;return"function"==typeof e&&!e({})&&e(NaN)&&!e(34)}},{}],32:[function(e,t,n){t.exports=function(e){return e!=e}},{}],33:[function(e,t,n){var i=e("../math/sign"),r=Math.abs,o=Math.floor;t.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?i(e)*o(r(e)):e}},{"../math/sign":27}],34:[function(e,t,n){var i=e("./to-integer"),r=Math.max;t.exports=function(e){return r(0,i(e))}},{"./to-integer":33}],35:[function(e,t,n){var i=e("./valid-callable"),r=e("./valid-value"),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,l=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(n,c){var u,d=arguments[2],h=arguments[3];return n=Object(r(n)),i(c),u=a(n),h&&u.sort("function"==typeof h?o.call(h,n):void 0),"function"!=typeof e&&(e=u[e]),s.call(e,u,(function(e,i){return l.call(n,e)?s.call(c,d,n[e],e,n,i):t}))}}},{"./valid-callable":54,"./valid-value":55}],36:[function(e,t,n){t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":37,"./shim":38}],37:[function(e,t,n){t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],38:[function(e,t,n){var i=e("../keys"),r=e("../valid-value"),o=Math.max;t.exports=function(e,t){var n,s,a,l=o(arguments.length,2);for(e=Object(r(e)),a=function(i){try{e[i]=t[i]}catch(zt){n||(n=zt)}},s=1;s<l;++s)i(t=arguments[s]).forEach(a);if(void 0!==n)throw n;return e}},{"../keys":45,"../valid-value":55}],39:[function(e,t,n){var i=e("../array/from"),r=e("./assign"),o=e("./valid-value");t.exports=function(e){var t=Object(o(e)),n=arguments[1],s=Object(arguments[2]);if(t!==e&&!n)return t;var a={};return n?i(n,(function(t){(s.ensure||t in e)&&(a[t]=e[t])})):r(a,e),a}},{"../array/from":21,"./assign":36,"./valid-value":55}],40:[function(e,t,n){var i,r,o,s,a=Object.create;e("./set-prototype-of/is-implemented")()||(i=e("./set-prototype-of/shim")),t.exports=i?1!==i.level?a:(r={},o={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(e){o[e]="__proto__"!==e?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(r,o),Object.defineProperty(i,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:r}),function(e,t){return a(null===e?r:e,t)}):a},{"./set-prototype-of/is-implemented":52,"./set-prototype-of/shim":53}],41:[function(e,t,n){t.exports=e("./_iterate")("forEach")},{"./_iterate":35}],42:[function(e,t,n){t.exports=function(e){return"function"==typeof e}},{}],43:[function(e,t,n){var i=e("./is-value"),r={function:!0,object:!0};t.exports=function(e){return i(e)&&r[typeof e]||!1}},{"./is-value":44}],44:[function(e,t,n){var i=e("../function/noop")();t.exports=function(e){return e!==i&&null!==e}},{"../function/noop":26}],45:[function(e,t,n){t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":46,"./shim":47}],46:[function(e,t,n){t.exports=function(){try{return Object.keys("primitive"),!0}catch(zt){return!1}}},{}],47:[function(e,t,n){var i=e("../is-value"),r=Object.keys;t.exports=function(e){return r(i(e)?Object(e):e)}},{"../is-value":44}],48:[function(e,t,n){var i=e("./valid-callable"),r=e("./for-each"),o=Function.prototype.call;t.exports=function(e,t){var n={},s=arguments[2];return i(t),r(e,(function(e,i,r,a){n[i]=o.call(t,s,e,i,r,a)})),n}},{"./for-each":41,"./valid-callable":54}],49:[function(e,t,n){var i=e("./is-value"),r=Array.prototype.forEach,o=Object.create,s=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(e){var t=o(null);return r.call(arguments,(function(e){i(e)&&s(Object(e),t)})),t}},{"./is-value":44}],50:[function(e,t,n){var i=Array.prototype.forEach,r=Object.create;t.exports=function(e){var t=r(null);return i.call(arguments,(function(e){t[e]=!0})),t}},{}],51:[function(e,t,n){t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":52,"./shim":53}],52:[function(e,t,n){var i=Object.create,r=Object.getPrototypeOf,o={};t.exports=function(){var e=Object.setPrototypeOf;return"function"==typeof e&&r(e((arguments[0]||i)(null),o))===o}},{}],53:[function(e,t,n){var i,r,o,s,a=e("../is-object"),l=e("../valid-value"),c=Object.prototype.isPrototypeOf,u=Object.defineProperty,d={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(e,t){if(l(e),null===t||a(t))return e;throw new TypeError("Prototype must be null or an object")},t.exports=(r=function(){var e,t=Object.create(null),n={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{(e=i.set).call(t,n)}catch(r){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:((t={}).__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}(),r?(2===r.level?r.set?(s=r.set,o=function(e,t){return s.call(i(e,t),t),e}):o=function(e,t){return i(e,t).__proto__=t,e}:o=function e(t,n){var r;return i(t,n),(r=c.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,r&&u(e.nullPolyfill,"__proto__",d),t},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:r.level})):null),e("../create")},{"../create":40,"../is-object":43,"../valid-value":55}],54:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],55:[function(e,t,n){var i=e("./is-value");t.exports=function(e){if(!i(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":44}],56:[function(e,t,n){t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":57,"./shim":58}],57:[function(e,t,n){var i="razdwatrzy";t.exports=function(){return"function"==typeof i.contains&&!0===i.contains("dwa")&&!1===i.contains("foo")}},{}],58:[function(e,t,n){var i=String.prototype.indexOf;t.exports=function(e){return i.call(this,e,arguments[1])>-1}},{}],59:[function(e,t,n){var i=Object.prototype.toString,r=i.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||i.call(e)===r)||!1}},{}],60:[function(e,t,n){var i,r=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/string/#/contains"),s=e("d"),a=e("es6-symbol"),l=e("./"),c=Object.defineProperty;i=t.exports=function(e,t){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");l.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",c(this,"__kind__",s("",t))},r&&r(i,l),delete i.prototype.constructor,i.prototype=Object.create(l.prototype,{_resolve:s((function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e}))}),c(i.prototype,a.toStringTag,s("c","Array Iterator"))},{"./":63,d:16,"es5-ext/object/set-prototype-of":51,"es5-ext/string/#/contains":56,"es6-symbol":73}],61:[function(e,t,n){var i=e("es5-ext/function/is-arguments"),r=e("es5-ext/object/valid-callable"),o=e("es5-ext/string/is-string"),s=e("./get"),a=Array.isArray,l=Function.prototype.call,c=Array.prototype.some;t.exports=function(e,t){var n,u,d,h,p,f,m,g,y=arguments[2];if(a(e)||i(e)?n="array":o(e)?n="string":e=s(e),r(t),d=function(){h=!0},"array"!==n)if("string"!==n)for(u=e.next();!u.done;){if(l.call(t,y,u.value,d),h)return;u=e.next()}else for(f=e.length,p=0;p<f&&(m=e[p],p+1<f&&(g=m.charCodeAt(0))>=55296&&g<=56319&&(m+=e[++p]),l.call(t,y,m,d),!h);++p);else c.call(e,(function(e){return l.call(t,y,e,d),h}))}},{"./get":62,"es5-ext/function/is-arguments":24,"es5-ext/object/valid-callable":54,"es5-ext/string/is-string":59}],62:[function(e,t,n){var i=e("es5-ext/function/is-arguments"),r=e("es5-ext/string/is-string"),o=e("./array"),s=e("./string"),a=e("./valid-iterable"),l=e("es6-symbol").iterator;t.exports=function(e){return"function"==typeof a(e)[l]?e[l]():i(e)?new o(e):r(e)?new s(e):new o(e)}},{"./array":60,"./string":65,"./valid-iterable":66,"es5-ext/function/is-arguments":24,"es5-ext/string/is-string":59,"es6-symbol":73}],63:[function(e,t,n){var i,r=e("es5-ext/array/#/clear"),o=e("es5-ext/object/assign"),s=e("es5-ext/object/valid-callable"),a=e("es5-ext/object/valid-value"),l=e("d"),c=e("d/auto-bind"),u=e("es6-symbol"),d=Object.defineProperty,h=Object.defineProperties;t.exports=i=function(e,t){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");h(this,{__list__:l("w",a(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete i.prototype.constructor,h(i.prototype,o({_next:l((function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:l((function(){return this._createResult(this._next())})),_createResult:l((function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}})),_resolve:l((function(e){return this.__list__[e]})),_unBind:l((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:l((function(){return"[object "+(this[u.toStringTag]||"Object")+"]"}))},c({_onAdd:l((function(e){e>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(t,n){t>=e&&(this.__redo__[n]=++t)}),this),this.__redo__.push(e)):d(this,"__redo__",l("c",[e])))})),_onDelete:l((function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach((function(t,n){t>e&&(this.__redo__[n]=--t)}),this)))})),_onClear:l((function(){this.__redo__&&r.call(this.__redo__),this.__nextIndex__=0}))}))),d(i.prototype,u.iterator,l((function(){return this})))},{d:16,"d/auto-bind":15,"es5-ext/array/#/clear":19,"es5-ext/object/assign":36,"es5-ext/object/valid-callable":54,"es5-ext/object/valid-value":55,"es6-symbol":73}],64:[function(e,t,n){var i=e("es5-ext/function/is-arguments"),r=e("es5-ext/object/is-value"),o=e("es5-ext/string/is-string"),s=e("es6-symbol").iterator,a=Array.isArray;t.exports=function(e){return!(!r(e)||!a(e)&&!o(e)&&!i(e)&&"function"!=typeof e[s])}},{"es5-ext/function/is-arguments":24,"es5-ext/object/is-value":44,"es5-ext/string/is-string":59,"es6-symbol":73}],65:[function(e,t,n){var i,r=e("es5-ext/object/set-prototype-of"),o=e("d"),s=e("es6-symbol"),a=e("./"),l=Object.defineProperty;i=t.exports=function(e){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),l(this,"__length__",o("",e.length))},r&&r(i,a),delete i.prototype.constructor,i.prototype=Object.create(a.prototype,{_next:o((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:o((function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0))>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n}))}),l(i.prototype,s.toStringTag,o("c","String Iterator"))},{"./":63,d:16,"es5-ext/object/set-prototype-of":51,"es6-symbol":73}],66:[function(e,t,n){var i=e("./is-iterable");t.exports=function(e){if(!i(e))throw new TypeError(e+" is not iterable");return e}},{"./is-iterable":64}],67:[function(e,t,n){t.exports=e("./is-implemented")()?Map:e("./polyfill")},{"./is-implemented":68,"./polyfill":72}],68:[function(e,t,n){t.exports=function(){var e,t;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(zt){return!1}return"[object Map]"===String(e)&&3===e.size&&"function"==typeof e.clear&&"function"==typeof e.delete&&"function"==typeof e.entries&&"function"==typeof e.forEach&&"function"==typeof e.get&&"function"==typeof e.has&&"function"==typeof e.keys&&"function"==typeof e.set&&"function"==typeof e.values&&!1===(t=e.entries().next()).done&&!!t.value&&"raz"===t.value[0]&&"one"===t.value[1]}},{}],69:[function(e,t,n){t.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},{}],70:[function(e,t,n){t.exports=e("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":50}],71:[function(e,t,n){var i,r=e("es5-ext/object/set-prototype-of"),o=e("d"),s=e("es6-iterator"),a=e("es6-symbol").toStringTag,l=e("./iterator-kinds"),c=Object.defineProperties,u=s.prototype._unBind;i=t.exports=function(e,t){if(!(this instanceof i))return new i(e,t);s.call(this,e.__mapKeysData__,e),t&&l[t]||(t="key+value"),c(this,{__kind__:o("",t),__values__:o("w",e.__mapValuesData__)})},r&&r(i,s),i.prototype=Object.create(s.prototype,{constructor:o(i),_resolve:o((function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]})),_unBind:o((function(){this.__values__=null,u.call(this)})),toString:o((function(){return"[object Map Iterator]"}))}),Object.defineProperty(i.prototype,a,o("c","Map Iterator"))},{"./iterator-kinds":70,d:16,"es5-ext/object/set-prototype-of":51,"es6-iterator":63,"es6-symbol":73}],72:[function(e,t,n){var i,r=e("es5-ext/array/#/clear"),o=e("es5-ext/array/#/e-index-of"),s=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/object/valid-callable"),l=e("es5-ext/object/valid-value"),c=e("d"),u=e("event-emitter"),d=e("es6-symbol"),h=e("es6-iterator/valid-iterable"),p=e("es6-iterator/for-of"),f=e("./lib/iterator"),m=e("./is-native-implemented"),g=Function.prototype.call,y=Object.defineProperties,_=Object.getPrototypeOf;t.exports=i=function(){var e,t,n,r=arguments[0];if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");return n=m&&s&&Map!==i?s(new Map,_(this)):this,null!=r&&h(r),y(n,{__mapKeysData__:c("c",e=[]),__mapValuesData__:c("c",t=[])}),r?(p(r,(function(n){var i=l(n)[0];n=n[1],-1===o.call(e,i)&&(e.push(i),t.push(n))}),n),n):n},m&&(s&&s(i,Map),i.prototype=Object.create(Map.prototype,{constructor:c(i)})),u(y(i.prototype,{clear:c((function(){this.__mapKeysData__.length&&(r.call(this.__mapKeysData__),r.call(this.__mapValuesData__),this.emit("_clear"))})),delete:c((function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)})),entries:c((function(){return new f(this,"key+value")})),forEach:c((function(e){var t,n,i=arguments[1];for(a(e),n=(t=this.entries())._next();void 0!==n;)g.call(e,i,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=t._next()})),get:c((function(e){var t=o.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]})),has:c((function(e){return-1!==o.call(this.__mapKeysData__,e)})),keys:c((function(){return new f(this,"key")})),set:c((function(e,t){var n,i=o.call(this.__mapKeysData__,e);return-1===i&&(i=this.__mapKeysData__.push(e)-1,n=!0),this.__mapValuesData__[i]=t,n&&this.emit("_add",i,e),this})),size:c.gs((function(){return this.__mapKeysData__.length})),values:c((function(){return new f(this,"value")})),toString:c((function(){return"[object Map]"}))})),Object.defineProperty(i.prototype,d.iterator,c((function(){return this.entries()}))),Object.defineProperty(i.prototype,d.toStringTag,c("c","Map"))},{"./is-native-implemented":69,"./lib/iterator":71,d:16,"es5-ext/array/#/clear":19,"es5-ext/array/#/e-index-of":20,"es5-ext/object/set-prototype-of":51,"es5-ext/object/valid-callable":54,"es5-ext/object/valid-value":55,"es6-iterator/for-of":61,"es6-iterator/valid-iterable":66,"es6-symbol":73,"event-emitter":78}],73:[function(e,t,n){t.exports=e("./is-implemented")()?Symbol:e("./polyfill")},{"./is-implemented":74,"./polyfill":76}],74:[function(e,t,n){var i={object:!0,symbol:!0};t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(zt){return!1}return!!i[typeof Symbol.iterator]&&!!i[typeof Symbol.toPrimitive]&&!!i[typeof Symbol.toStringTag]}},{}],75:[function(e,t,n){t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},{}],76:[function(e,t,n){var i,r,o,s,a=e("d"),l=e("./validate-symbol"),c=Object.create,u=Object.defineProperties,d=Object.defineProperty,h=Object.prototype,p=c(null);if("function"==typeof Symbol){i=Symbol;try{String(i()),s=!0}catch(g){}}var f,m=(f=c(null),function(e){for(var t,n,i=0;f[e+(i||"")];)++i;return f[e+=i||""]=!0,d(h,t="@@"+e,a.gs(null,(function(e){n||(n=!0,d(this,t,a(e)),n=!1)}))),t});o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return r(e)},t.exports=r=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return s?i(t):(n=c(o.prototype),t=void 0===t?"":String(t),u(n,{__description__:a("",t),__name__:a("",m(t))}))},u(r,{for:a((function(e){return p[e]?p[e]:p[e]=r(String(e))})),keyFor:a((function(e){var t;for(t in l(e),p)if(p[t]===e)return t})),hasInstance:a("",i&&i.hasInstance||r("hasInstance")),isConcatSpreadable:a("",i&&i.isConcatSpreadable||r("isConcatSpreadable")),iterator:a("",i&&i.iterator||r("iterator")),match:a("",i&&i.match||r("match")),replace:a("",i&&i.replace||r("replace")),search:a("",i&&i.search||r("search")),species:a("",i&&i.species||r("species")),split:a("",i&&i.split||r("split")),toPrimitive:a("",i&&i.toPrimitive||r("toPrimitive")),toStringTag:a("",i&&i.toStringTag||r("toStringTag")),unscopables:a("",i&&i.unscopables||r("unscopables"))}),u(o.prototype,{constructor:a(r),toString:a("",(function(){return this.__name__}))}),u(r.prototype,{toString:a((function(){return"Symbol ("+l(this).__description__+")"})),valueOf:a((function(){return l(this)}))}),d(r.prototype,r.toPrimitive,a("",(function(){var e=l(this);return"symbol"==typeof e?e:e.toString()}))),d(r.prototype,r.toStringTag,a("c","Symbol")),d(o.prototype,r.toStringTag,a("c",r.prototype[r.toStringTag])),d(o.prototype,r.toPrimitive,a("c",r.prototype[r.toPrimitive]))},{"./validate-symbol":77,d:16}],77:[function(e,t,n){var i=e("./is-symbol");t.exports=function(e){if(!i(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":75}],78:[function(e,t,n){var i,r,o,s,a,l,c,u=e("d"),d=e("es5-ext/object/valid-callable"),h=Function.prototype.apply,p=Function.prototype.call,f=Object.create,m=Object.defineProperty,g=Object.defineProperties,y=Object.prototype.hasOwnProperty,_={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n,r;return d(t),r=this,i.call(this,e,n=function(){o.call(r,e,n),h.call(t,this,arguments)}),n.__eeOnceListener__=t,this},s=function(e){var t,n,i,r,o;if(y.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"==typeof r){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(r=r.slice(),t=0;i=r[t];++t)h.call(i,this,o)}else switch(arguments.length){case 1:p.call(r,this);break;case 2:p.call(r,this,arguments[1]);break;case 3:p.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];h.call(r,this,o)}},a={on:i=function(e,t){var n;return d(t),y.call(this,"__ee__")?n=this.__ee__:(n=_.value=f(null),m(this,"__ee__",_),_.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:r,off:o=function(e,t){var n,i,r,o;if(d(t),!y.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(i=n[e]))for(o=0;r=i[o];++o)r!==t&&r.__eeOnceListener__!==t||(2===i.length?n[e]=i[o?0:1]:i.splice(o,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:s},l={on:u(i),once:u(r),off:u(o),emit:u(s)},c=g({},l),t.exports=n=function(e){return null==e?f(c):g(Object(e),l)},n.methods=a},{d:16,"es5-ext/object/valid-callable":54}],79:[function(e,t,n){n.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+p]=255&s,p+=f,s/=256,c-=8);e[n+p-f]|=128*m}},{}],80:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],81:[function(e,t,n){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}
/*!
         * Determine if an object is a Buffer
         *
         * @author   Feross Aboukhadijeh <https://feross.org>
         * @license  MIT
         */
t.exports=function(e){return null!=e&&(i(e)||r(e)||!!e._isBuffer)}},{}],82:[function(e,t,n){var i=e("safe-buffer").Buffer,r=t.exports;for(var o in r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.codes={},r.types){var s=r.types[o];r.codes[s]=o}for(var a in r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.LENGTH_MASK=127,r.LENGTH_FIN_MASK=128,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=i.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=i.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=i.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={},r.properties){var l=r.properties[a];r.propertiesCodes[l]=a}function c(e){return[0,1,2].map((function(t){return[0,1].map((function(n){return[0,1].map((function(o){var s=new i(1);return s.writeUInt8(r.codes[e]<<r.CMD_SHIFT|(n?r.DUP_MASK:0)|t<<r.QOS_SHIFT|o,0,!0),s}))}))}))}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int32",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},r.PUBLISH_HEADER=c("publish"),r.SUBSCRIBE_HEADER=c("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=c("unsubscribe"),r.ACKS={unsuback:c("unsuback"),puback:c("puback"),pubcomp:c("pubcomp"),pubrel:c("pubrel"),pubrec:c("pubrec")},r.SUBACK_HEADER=i.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=i.from([3]),r.VERSION4=i.from([4]),r.VERSION5=i.from([5]),r.QOS=[0,1,2].map((function(e){return i.from([e])})),r.EMPTY={pingreq:i.from([r.codes.pingreq<<4,0]),pingresp:i.from([r.codes.pingresp<<4,0]),disconnect:i.from([r.codes.disconnect<<4,0])}},{"safe-buffer":110}],83:[function(e,t,n){var i=e("safe-buffer").Buffer,r=e("./writeToStream"),o=e("events").EventEmitter;function s(e,t){var n=new a;return r(e,n,t),n.concat()}function a(){this._array=new Array(20),this._i=0}e("inherits")(a,o),a.prototype.write=function(e){return this._array[this._i++]=e,!0},a.prototype.concat=function(){var e,t,n=0,r=new Array(this._array.length),o=this._array,s=0;for(e=0;e<o.length&&void 0!==o[e];e++)"string"!=typeof o[e]?r[e]=o[e].length:r[e]=i.byteLength(o[e]),n+=r[e];for(t=i.allocUnsafe(n),e=0;e<o.length&&void 0!==o[e];e++)"string"!=typeof o[e]?(o[e].copy(t,s),s+=r[e]):(t.write(o[e],s),s+=r[e]);return t},t.exports=s},{"./writeToStream":89,events:13,inherits:80,"safe-buffer":110}],84:[function(e,t,n){n.parser=e("./parser"),n.generate=e("./generate"),n.writeToStream=e("./writeToStream")},{"./generate":83,"./parser":88,"./writeToStream":89}],85:[function(e,t,n){var i=e("readable-stream/duplex"),r=e("util"),o=e("safe-buffer").Buffer;function s(e){if(!(this instanceof s))return new s(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)}))}else this.append(e);i.call(this)}r.inherits(s,i),s.prototype._offset=function(e){var t,n=0,i=0;if(0===e)return[0,0];for(;i<this._bufs.length;i++){if(e<(t=n+this._bufs[i].length)||i==this._bufs.length-1)return[i,e-n];n=t}},s.prototype.append=function(e){var t=0;if(o.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof s)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(o.from(e)));return this},s.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},s.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype.get=function(e){return this.slice(e,e+1)[0]},s.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},s.prototype.copy=function(e,t,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return e||o.alloc(0);if(i<=0)return e||o.alloc(0);var r,s,a=!!e,l=this._offset(n),c=i-n,u=c,d=a&&t||0,h=l[1];if(0===n&&i==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(e,d),d+=this._bufs[s].length;return e}if(u<=this._bufs[l[0]].length-h)return a?this._bufs[l[0]].copy(e,t,h,h+u):this._bufs[l[0]].slice(h,h+u);for(a||(e=o.allocUnsafe(c)),s=l[0];s<this._bufs.length;s++){if(!(u>(r=this._bufs[s].length-h))){this._bufs[s].copy(e,d,h,h+u);break}this._bufs[s].copy(e,d,h),d+=r,u-=r,h&&(h=0)}return e},s.prototype.shallowSlice=function(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var n=this._offset(e),i=this._offset(t),r=this._bufs.slice(n[0],i[0]+1);return 0==i[1]?r.pop():r[r.length-1]=r[r.length-1].slice(0,i[1]),0!=n[1]&&(r[0]=r[0].slice(n[1])),new s(r)},s.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},s.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){for(var e=0,t=new s;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},s.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){s.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),t.exports=s},{"readable-stream/duplex":97,"safe-buffer":110,util:117}],86:[function(e,t,n){var i=e("safe-buffer").Buffer,r=65536,o={};function s(e){var t=i.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}function a(){for(var e=0;e<r;e++)o[e]=s(e)}function l(e){return e>=0&&e<128?1:e>=128&&e<16384?2:e>=16384&&e<2097152?3:e>=2097152&&e<268435456?4:0}function c(e){var t=0,n=0,r=l(e),o=i.allocUnsafe(r);do{t=e%128|0,(e=e/128|0)>0&&(t|=128),o.writeUInt8(t,n++)}while(e>0);return{data:o,length:r}}function u(e){var t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}t.exports={cache:o,generateCache:a,generateNumber:s,genBufVariableByteInt:c,generate4ByteBuffer:u}},{"safe-buffer":110}],87:[function(e,t,n){function i(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}t.exports=i},{}],88:[function(e,t,n){var i=e("bl"),r=e("inherits"),o=e("events").EventEmitter,s=e("./packet"),a=e("./constants");function l(e){if(!(this instanceof l))return new l(e);this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}r(l,o),l.prototype._resetState=function(){this.packet=new s,this.error=null,this._list=i(),this._stateCounter=0},l.prototype.parse=function(e){for(this.error&&this._resetState(),this._list.append(e);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},l.prototype._parseHeader=function(){var e=this._list.readUInt8(0);return this.packet.cmd=a.types[e>>a.CMD_SHIFT],this.packet.retain=0!=(e&a.RETAIN_MASK),this.packet.qos=e>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(e&a.DUP_MASK),this._list.consume(1),!0},l.prototype._parseLength=function(){var e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),!!e},l.prototype._parsePayload=function(){var e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return e},l.prototype._parseConnect=function(){var e,t,n,i,r,o,s={},l=this.packet;if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==e&&"MQIsdp"!==e)return this._emitError(new Error("Invalid protocolId"));if(l.protocolId=e,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(l.protocolVersion=this._list.readUInt8(this._pos),3!==l.protocolVersion&&4!==l.protocolVersion&&5!==l.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,s.will&&(l.will={},l.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),l.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),l.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,l.keepalive=this._parseNum(),-1===l.keepalive)return this._emitError(new Error("Packet too short"));if(5===l.protocolVersion){var c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(null===(t=this._parseString()))return this._emitError(new Error("Packet too short"));if(l.clientId=t,s.will){if(5===l.protocolVersion){var u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(l.will.properties=u)}if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(l.will.topic=n,null===(i=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));l.will.payload=i}if(s.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));l.username=o}if(s.password){if(null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));l.password=r}return this.settings=l,l},l.prototype._parseConnack=function(){var e=this.packet;if(this._list.length<2)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),5===this.settings.protocolVersion?e.reasonCode=this._list.readUInt8(this._pos++):e.returnCode=this._list.readUInt8(this._pos++),-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){var t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}},l.prototype._parsePublish=function(){var e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){var t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length)}},l.prototype._parseSubscribe=function(){var e,t,n,i,r,o,s,l=this.packet;if(1!==l.qos)return this._emitError(new Error("Wrong subscribe header"));if(l.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){var c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}for(;this._pos<l.length;){if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));n=(t=this._parseByte())&a.SUBSCRIBE_OPTIONS_QOS_MASK,o=0!=(t>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK),r=0!=(t>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK),i=t>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,s={topic:e,qos:n},5===this.settings.protocolVersion&&(s.nl=o,s.rap=r,s.rh=i),l.subscriptions.push(s)}}},l.prototype._parseSuback=function(){var e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){var t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}},l.prototype._parseUnsubscribe=function(){var e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){var t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}for(;this._pos<e.length;){var n;if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse topic"));e.unsubscriptions.push(n)}}},l.prototype._parseUnsuback=function(){var e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){var t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}},l.prototype._parseConfirmation=function(){var e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&e.length>2){e.reasonCode=this._parseByte();var t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return!0},l.prototype._parseDisconnect=function(){var e=this.packet;if(5===this.settings.protocolVersion){e.reasonCode=this._parseByte();var t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return!0},l.prototype._parseAuth=function(){var e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();var t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),!0},l.prototype._parseMessageId=function(){var e=this.packet;return e.messageId=this._parseNum(),null!==e.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},l.prototype._parseString=function(e){var t,n=this._parseNum(),i=n+this._pos;return-1===n||i>this._list.length||i>this.packet.length?null:(t=this._list.toString("utf8",this._pos,i),this._pos+=n,t)},l.prototype._parseStringPair=function(){return{name:this._parseString(),value:this._parseString()}},l.prototype._parseBuffer=function(){var e,t=this._parseNum(),n=t+this._pos;return-1===t||n>this._list.length||n>this.packet.length?null:(e=this._list.slice(this._pos,n),this._pos+=t,e)},l.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var e=this._list.readUInt16BE(this._pos);return this._pos+=2,e},l.prototype._parse4ByteNum=function(){if(this._list.length-this._pos<4)return-1;var e=this._list.readUInt32BE(this._pos);return this._pos+=4,e},l.prototype._parseVarByteNum=function(e){for(var t,n=0,i=1,r=0,o=!0,s=this._pos?this._pos:0;n<5&&(r+=i*((t=this._list.readUInt8(s+n++))&a.LENGTH_MASK),i*=128,0!=(t&a.LENGTH_FIN_MASK));)if(this._list.length<=n){o=!1;break}return s&&(this._pos+=n),o=!!o&&(e?{bytes:n,value:r}:r)},l.prototype._parseByte=function(){var e=this._list.readUInt8(this._pos);return this._pos++,e},l.prototype._parseByType=function(e){switch(e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}},l.prototype._parseProperties=function(){for(var e=this._parseVarByteNum(),t=this._pos+e,n={};this._pos<t;){var i=this._parseByte(),r=a.propertiesCodes[i];if(!r)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==r)n[r]=this._parseByType(a.propertiesTypes[r]);else{n[r]||(n[r]={});var o=this._parseByType(a.propertiesTypes[r]);n[r][o.name]=o.value}}return n},l.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new s,this._pos=0,!0},l.prototype._emitError=function(e){this.error=e,this.emit("error",e)},t.exports=l},{"./constants":82,"./packet":87,bl:85,events:13,inherits:80}],89:[function(e,t,n){var i=e("./constants"),r=e("safe-buffer").Buffer,o=r.allocUnsafe(0),s=r.from([0]),a=e("./numbers"),l=e("process-nextick-args").nextTick,c=a.cache,u=a.generateNumber,d=a.generateCache,h=a.genBufVariableByteInt,p=a.generate4ByteBuffer,f=P,m=!0;function g(e,t,n){switch(t.cork&&(t.cork(),l(y,t)),m&&(m=!1,d()),e.cmd){case"connect":return _(e,t);case"connack":return b(e,t,n);case"publish":return v(e,t,n);case"puback":case"pubrec":case"pubrel":case"pubcomp":return w(e,t,n);case"subscribe":return k(e,t,n);case"suback":return S(e,t,n);case"unsubscribe":return x(e,t,n);case"unsuback":return T(e,t,n);case"pingreq":case"pingresp":return E(e,t);case"disconnect":return C(e,t,n);case"auth":return I(e,t,n);default:return t.emit("error",new Error("Unknown command")),!1}}function y(e){e.uncork()}function _(e,t,n){var o=e||{},s=o.protocolId||"MQTT",a=o.protocolVersion||4,l=o.will,c=o.clean,u=o.keepalive||0,d=o.clientId||"",h=o.username,p=o.password,m=o.properties;void 0===c&&(c=!0);var g=0;if(!s||"string"!=typeof s&&!r.isBuffer(s))return t.emit("error",new Error("Invalid protocolId")),!1;if(g+=s.length+2,3!==a&&4!==a&&5!==a)return t.emit("error",new Error("Invalid protocol version")),!1;if(g+=1,"string"!=typeof d&&!r.isBuffer(d)||!d&&4!==a||!d&&!c){if(a<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*c==0)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else g+=d.length+2;if("number"!=typeof u||u<0||u>65535||u%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;if(g+=2,g+=1,5===a){var y=R(t,m);g+=y.length}if(l){if("object"!=typeof l)return t.emit("error",new Error("Invalid will")),!1;if(!l.topic||"string"!=typeof l.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(g+=r.byteLength(l.topic)+2,l.payload){if(!(l.payload.length>=0))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof l.payload?g+=r.byteLength(l.payload)+2:g+=l.payload.length+2;var _={};5===a&&(g+=(_=R(t,l.properties)).length)}}var b=!1;if(null!=h){if(!F(h))return t.emit("error",new Error("Invalid username")),!1;b=!0,g+=r.byteLength(h)+2}if(null!=p){if(!b)return t.emit("error",new Error("Username is required to use password")),!1;if(!F(p))return t.emit("error",new Error("Invalid password")),!1;g+=U(p)+2}t.write(i.CONNECT_HEADER),N(t,g),O(t,s),t.write(4===a?i.VERSION4:5===a?i.VERSION5:i.VERSION3);var v=0;return v|=null!=h?i.USERNAME_MASK:0,v|=null!=p?i.PASSWORD_MASK:0,v|=l&&l.retain?i.WILL_RETAIN_MASK:0,v|=l&&l.qos?l.qos<<i.WILL_QOS_SHIFT:0,v|=l?i.WILL_FLAG_MASK:0,v|=c?i.CLEAN_SESSION_MASK:0,t.write(r.from([v])),f(t,u),5===a&&y.write(),O(t,d),l&&(5===a&&_.write(),B(t,l.topic),O(t,l.payload)),null!=h&&O(t,h),null!=p&&O(t,p),!0}function b(e,t,n){var o=n?n.protocolVersion:4,a=e||{},l=5===o?a.reasonCode:a.returnCode,c=a.properties,u=2;if("number"!=typeof l)return t.emit("error",new Error("Invalid return code")),!1;var d=null;return 5===o&&(u+=(d=R(t,c)).length),t.write(i.CONNACK_HEADER),N(t,u),t.write(a.sessionPresent?i.SESSIONPRESENT_HEADER:s),t.write(r.from([l])),null!=d&&d.write(),!0}function v(e,t,n){var s=n?n.protocolVersion:4,a=e||{},l=a.qos||0,c=a.retain?i.RETAIN_MASK:0,u=a.topic,d=a.payload||o,h=a.messageId,p=a.properties,m=0;if("string"==typeof u)m+=r.byteLength(u)+2;else{if(!r.isBuffer(u))return t.emit("error",new Error("Invalid topic")),!1;m+=u.length+2}if(r.isBuffer(d)?m+=d.length:m+=r.byteLength(d),l&&"number"!=typeof h)return t.emit("error",new Error("Invalid messageId")),!1;l&&(m+=2);var g=null;return 5===s&&(m+=(g=R(t,p)).length),t.write(i.PUBLISH_HEADER[l][a.dup?1:0][c?1:0]),N(t,m),f(t,U(u)),t.write(u),l>0&&f(t,h),null!=g&&g.write(),t.write(d)}function w(e,t,n){var o=n?n.protocolVersion:4,s=e||{},a=s.cmd||"puback",l=s.messageId,c=s.dup&&"pubrel"===a?i.DUP_MASK:0,u=0,d=s.reasonCode,h=s.properties,p=5===o?3:2;if("pubrel"===a&&(u=1),"number"!=typeof l)return t.emit("error",new Error("Invalid messageId")),!1;var m=null;if(5===o){if(!(m=L(t,h,n,p)))return!1;p+=m.length}return t.write(i.ACKS[a][u][c][0]),N(t,p),f(t,l),5===o&&t.write(r.from([d])),null!==m&&m.write(),!0}function k(e,t,n){var o=n?n.protocolVersion:4,s=e||{},a=s.dup?i.DUP_MASK:0,l=s.messageId,c=s.subscriptions,u=s.properties,d=0;if("number"!=typeof l)return t.emit("error",new Error("Invalid messageId")),!1;d+=2;var h=null;if(5===o&&(d+=(h=R(t,u)).length),"object"!=typeof c||!c.length)return t.emit("error",new Error("Invalid subscriptions")),!1;for(var p=0;p<c.length;p+=1){var m=c[p].topic,g=c[p].qos;if("string"!=typeof m)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof g)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===o){if("boolean"!=typeof(c[p].nl||!1))return t.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(c[p].rap||!1))return t.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;var y=c[p].rh||0;if("number"!=typeof y||y>2)return t.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}d+=r.byteLength(m)+2+1}t.write(i.SUBSCRIBE_HEADER[1][a?1:0][0]),N(t,d),f(t,l),null!==h&&h.write();for(var _=!0,b=0;b<c.length;b++){var v,w=c[b],k=w.topic,S=w.qos,x=+w.nl,T=+w.rap,E=w.rh;B(t,k),v=i.SUBSCRIBE_OPTIONS_QOS[S],5===o&&(v|=x?i.SUBSCRIBE_OPTIONS_NL:0,v|=T?i.SUBSCRIBE_OPTIONS_RAP:0,v|=E?i.SUBSCRIBE_OPTIONS_RH[E]:0),_=t.write(r.from([v]))}return _}function S(e,t,n){var o=n?n.protocolVersion:4,s=e||{},a=s.messageId,l=s.granted,c=s.properties,u=0;if("number"!=typeof a)return t.emit("error",new Error("Invalid messageId")),!1;if(u+=2,"object"!=typeof l||!l.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var d=0;d<l.length;d+=1){if("number"!=typeof l[d])return t.emit("error",new Error("Invalid qos vector")),!1;u+=1}var h=null;if(5===o){if(!(h=L(t,c,n,u)))return!1;u+=h.length}return t.write(i.SUBACK_HEADER),N(t,u),f(t,a),null!==h&&h.write(),t.write(r.from(l))}function x(e,t,n){var o=n?n.protocolVersion:4,s=e||{},a=s.messageId,l=s.dup?i.DUP_MASK:0,c=s.unsubscriptions,u=s.properties,d=0;if("number"!=typeof a)return t.emit("error",new Error("Invalid messageId")),!1;if(d+=2,"object"!=typeof c||!c.length)return t.emit("error",new Error("Invalid unsubscriptions")),!1;for(var h=0;h<c.length;h+=1){if("string"!=typeof c[h])return t.emit("error",new Error("Invalid unsubscriptions")),!1;d+=r.byteLength(c[h])+2}var p=null;5===o&&(d+=(p=R(t,u)).length),t.write(i.UNSUBSCRIBE_HEADER[1][l?1:0][0]),N(t,d),f(t,a),null!==p&&p.write();for(var m=!0,g=0;g<c.length;g++)m=B(t,c[g]);return m}function T(e,t,n){var o=n?n.protocolVersion:4,s=e||{},a=s.messageId,l=s.dup?i.DUP_MASK:0,c=s.granted,u=s.properties,d=s.cmd,h=0,p=2;if("number"!=typeof a)return t.emit("error",new Error("Invalid messageId")),!1;if(5===o){if("object"!=typeof c||!c.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var m=0;m<c.length;m+=1){if("number"!=typeof c[m])return t.emit("error",new Error("Invalid qos vector")),!1;p+=1}}var g=null;if(5===o){if(!(g=L(t,u,n,p)))return!1;p+=g.length}return t.write(i.ACKS[d][h][l][0]),N(t,p),f(t,a),null!==g&&g.write(),5===o&&t.write(r.from(c)),!0}function E(e,t,n){return t.write(i.EMPTY[e.cmd])}function C(e,t,n){var o=n?n.protocolVersion:4,s=e||{},a=s.reasonCode,l=s.properties,c=5===o?1:0,u=null;if(5===o){if(!(u=L(t,l,n,c)))return!1;c+=u.length}return t.write(r.from([i.codes.disconnect<<4])),N(t,c),5===o&&t.write(r.from([a])),null!==u&&u.write(),!0}function I(e,t,n){var o=n?n.protocolVersion:4,s=e||{},a=s.reasonCode,l=s.properties,c=5===o?1:0;5!==o&&t.emit("error",new Error("Invalid mqtt version for auth packet"));var u=L(t,l,n,c);return!!u&&(c+=u.length,t.write(r.from([i.codes.auth<<4])),N(t,c),t.write(r.from([a])),null!==u&&u.write(),!0)}Object.defineProperty(g,"cacheNumbers",{get:function(){return f===P},set:function(e){e?(c&&0!==Object.keys(c).length||(m=!0),f=P):(m=!1,f=M)}});var D={};function N(e,t){var n=D[t];n||(n=h(t).data,t<16384&&(D[t]=n)),e.write(n)}function B(e,t){var n=r.byteLength(t);f(e,n),e.write(t,"utf8")}function A(e,t,n){B(e,t),B(e,n)}function P(e,t){return e.write(c[t])}function M(e,t){return e.write(u(t))}function V(e,t){return e.write(p(t))}function O(e,t){"string"==typeof t?B(e,t):t?(f(e,t.length),e.write(t)):f(e,0)}function R(e,t){if("object"!=typeof t||null!=t.length)return{length:1,write:function(){j(e,{},0)}};var n=0;function o(n){var o=i.propertiesTypes[n],s=t[n],a=0;switch(o){case"byte":if("boolean"!=typeof s)return e.emit("error",new Error("Invalid "+n)),!1;a+=2;break;case"int8":if("number"!=typeof s)return e.emit("error",new Error("Invalid "+n)),!1;a+=2;break;case"binary":if(s&&null===s)return e.emit("error",new Error("Invalid "+n)),!1;a+=1+r.byteLength(s)+2;break;case"int16":if("number"!=typeof s)return e.emit("error",new Error("Invalid "+n)),!1;a+=3;break;case"int32":if("number"!=typeof s)return e.emit("error",new Error("Invalid "+n)),!1;a+=5;break;case"var":if("number"!=typeof s)return e.emit("error",new Error("Invalid "+n)),!1;a+=1+h(s).length;break;case"string":if("string"!=typeof s)return e.emit("error",new Error("Invalid "+n)),!1;a+=3+r.byteLength(s.toString());break;case"pair":if("object"!=typeof s)return e.emit("error",new Error("Invalid "+n)),!1;a+=Object.getOwnPropertyNames(s).reduce((function(e,t){return e+=3+r.byteLength(t.toString())+2+r.byteLength(s[t].toString())}),0);break;default:return e.emit("error",new Error("Invalid property "+n)),!1}return a}if(t)for(var s in t){var a=o(s);if(!a)return!1;n+=a}return{length:h(n).length+n,write:function(){j(e,t,n)}}}function L(e,t,n,i){var r=["reasonString","userProperties"],o=n&&n.properties&&n.properties.maximumPacketSize?n.properties.maximumPacketSize:0,s=R(e,t);if(o)for(;i+s.length>o;){var a=r.shift();if(!a||!t[a])return!1;delete t[a],s=R(e,t)}return s}function j(e,t,n){for(var o in N(e,n),t)if(t.hasOwnProperty(o)&&null!==t[o]){var s=t[o];switch(i.propertiesTypes[o]){case"byte":e.write(r.from([i.properties[o]])),e.write(r.from([+s]));break;case"int8":e.write(r.from([i.properties[o]])),e.write(r.from([s]));break;case"binary":e.write(r.from([i.properties[o]])),O(e,s);break;case"int16":e.write(r.from([i.properties[o]])),f(e,s);break;case"int32":e.write(r.from([i.properties[o]])),V(e,s);break;case"var":e.write(r.from([i.properties[o]])),N(e,s);break;case"string":e.write(r.from([i.properties[o]])),B(e,s);break;case"pair":Object.getOwnPropertyNames(s).forEach((function(t){e.write(r.from([i.properties[o]])),A(e,t.toString(),s[t].toString())}));break;default:return e.emit("error",new Error("Invalid property "+o)),!1}}}function U(e){return e?e instanceof r?e.length:r.byteLength(e):0}function F(e){return"string"==typeof e||e instanceof r}t.exports=g},{"./constants":82,"./numbers":86,"process-nextick-args":91,"safe-buffer":110}],90:[function(e,t,n){var i=e("wrappy");function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}t.exports=i(r),t.exports.strict=i(o),r.proto=r((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},{wrappy:120}],91:[function(e,t,n){(function(e){function n(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,i)}));case 4:return e.nextTick((function(){t.call(null,n,i,r)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:n}:t.exports=e}).call(this,e("_process"))},{_process:92}],92:[function(e,t,n){var i,r,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(zt){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function c(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(zt){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(zt){i=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(zt){r=a}}();var u,d=[],h=!1,p=-1;function f(){h&&u&&(h=!1,u.length?d=u.concat(d):p=-1,d.length&&m())}function m(){if(!h){var e=l(f);h=!0;for(var t=d.length;t;){for(u=d,d=[];++p<t;)u&&u[p].run();p=-1,t=d.length}u=null,h=!1,c(e)}}function g(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new g(e,t)),1!==d.length||h||l(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],93:[function(e,t,n){(function(e){!function(i){var r="object"==typeof n&&n&&!n.nodeType&&n,o="object"==typeof t&&t&&!t.nodeType&&t,s="object"==typeof e&&e;s.global!==s&&s.window!==s&&s.self!==s||(i=s);var a,l,c=2147483647,u=36,d=1,h=26,p=38,f=700,m=72,g=128,y="-",_=/^xn--/,b=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=u-d,S=Math.floor,x=String.fromCharCode;function T(e){throw new RangeError(w[e])}function E(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function C(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+E((e=e.replace(v,".")).split("."),t).join(".")}function I(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function D(e){return E(e,(function(e){var t="";return e>65535&&(t+=x((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=x(e)})).join("")}function N(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u}function B(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function A(e,t,n){var i=0;for(e=n?S(e/f):e>>1,e+=S(e/t);e>k*h>>1;i+=u)e=S(e/k);return S(i+(k+1)*e/(e+p))}function P(e){var t,n,i,r,o,s,a,l,p,f,_=[],b=e.length,v=0,w=g,k=m;for((n=e.lastIndexOf(y))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&T("not-basic"),_.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<b;){for(o=v,s=1,a=u;r>=b&&T("invalid-input"),((l=N(e.charCodeAt(r++)))>=u||l>S((c-v)/s))&&T("overflow"),v+=l*s,!(l<(p=a<=k?d:a>=k+h?h:a-k));a+=u)s>S(c/(f=u-p))&&T("overflow"),s*=f;k=A(v-o,t=_.length+1,0==o),S(v/t)>c-w&&T("overflow"),w+=S(v/t),v%=t,_.splice(v++,0,w)}return D(_)}function M(e){var t,n,i,r,o,s,a,l,p,f,_,b,v,w,k,E=[];for(b=(e=I(e)).length,t=g,n=0,o=m,s=0;s<b;++s)(_=e[s])<128&&E.push(x(_));for(i=r=E.length,r&&E.push(y);i<b;){for(a=c,s=0;s<b;++s)(_=e[s])>=t&&_<a&&(a=_);for(a-t>S((c-n)/(v=i+1))&&T("overflow"),n+=(a-t)*v,t=a,s=0;s<b;++s)if((_=e[s])<t&&++n>c&&T("overflow"),_==t){for(l=n,p=u;!(l<(f=p<=o?d:p>=o+h?h:p-o));p+=u)k=l-f,w=u-f,E.push(x(B(f+k%w,0))),l=S(k/w);E.push(x(B(l,0))),o=A(n,v,i==r),n=0,++i}++n,++t}return E.join("")}function V(e){return C(e,(function(e){return _.test(e)?P(e.slice(4).toLowerCase()):e}))}function O(e){return C(e,(function(e){return b.test(e)?"xn--"+M(e):e}))}if(a={version:"1.4.1",ucs2:{decode:I,encode:D},decode:P,encode:M,toASCII:O,toUnicode:V},r&&o)if(t.exports==r)o.exports=a;else for(l in a)a.hasOwnProperty(l)&&(r[l]=a[l]);else i.punycode=a}(this)}).call(this,void 0!==Pr?Pr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],94:[function(e,t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var d,h,p,f,m=e[u].replace(a,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),h=m.substr(g+1)):(d=m,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),i(s,p)?r(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],95:[function(e,t,n){var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(i(s))+n;return r(e[s])?o(e[s],(function(e){return a+encodeURIComponent(i(e))})).join(t):a+encodeURIComponent(i(e[s]))})).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],96:[function(e,t,n){n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":94,"./encode":95}],97:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":98}],98:[function(e,t,n){var i=e("process-nextick-args"),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=d;var o=e("core-util-is");o.inherits=e("inherits");var s=e("./_stream_readable"),a=e("./_stream_writable");o.inherits(d,s);for(var l=r(a.prototype),c=0;c<l.length;c++){var u=l[c];d.prototype[u]||(d.prototype[u]=a.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||i.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},{"./_stream_readable":100,"./_stream_writable":102,"core-util-is":14,inherits:80,"process-nextick-args":91}],99:[function(e,t,n){t.exports=o;var i=e("./_stream_transform"),r=e("core-util-is");function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}r.inherits=e("inherits"),r.inherits(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":101,"core-util-is":14,inherits:80}],100:[function(e,t,n){(function(n,i){var r=e("process-nextick-args");t.exports=k;var o,s=e("isarray");k.ReadableState=w,e("events").EventEmitter;var a=function(e,t){return e.listeners(t).length},l=e("./internal/streams/stream"),c=e("safe-buffer").Buffer,u=i.Uint8Array||function(){};function d(e){return c.from(e)}function h(e){return c.isBuffer(e)||e instanceof u}var p=e("core-util-is");p.inherits=e("inherits");var f=e("util"),m=void 0;m=f&&f.debuglog?f.debuglog("stream"):function(){};var g,y=e("./internal/streams/BufferList"),_=e("./internal/streams/destroy");p.inherits(k,l);var b=["error","close","destroy","pause","resume"];function v(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function w(t,n){t=t||{};var i=n instanceof(o=o||e("./_stream_duplex"));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(g||(g=e("string_decoder/").StringDecoder),this.decoder=new g(t.encoding),this.encoding=t.encoding)}function k(t){if(o=o||e("./_stream_duplex"),!(this instanceof k))return new k(t);this._readableState=new w(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function S(e,t,n,i,r){var o,s=e._readableState;return null===t?(s.reading=!1,N(e,s)):(r||(o=T(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=d(t)),i?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?x(e,s,t,!1):P(e,s)):x(e,s,t,!1))):i||(s.reading=!1)),E(s)}function x(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&B(e)),P(e,t)}function T(e,t){var n;return h(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function E(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(k.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=_.destroy,k.prototype._undestroy=_.undestroy,k.prototype._destroy=function(e,t){this.push(null),t(e)},k.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},k.prototype.unshift=function(e){return S(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){return g||(g=e("string_decoder/").StringDecoder),this._readableState.decoder=new g(t),this._readableState.encoding=t,this};var C=8388608;function I(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function D(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=I(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function N(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,B(e)}}function B(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(A,e):A(e))}function A(e){m("emit readable"),e.emit("readable"),j(e)}function P(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(M,e,t))}function M(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(m("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function V(e){return function(){var t=e._readableState;m("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,j(e))}}function O(e){m("readable nexttick read 0"),e.read(0)}function R(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(L,e,t))}function L(e,t){t.reading||(m("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(m("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=F(e,t.buffer,t.decoder),n);var n}function F(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?z(e,t):q(e,t),i}function z(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?r+=o:r+=o.slice(0,e),0==(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}function q(e,t){var n=c.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var o=i.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0==(e-=s)){s===o.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(s));break}++r}return t.length-=r,n}function $(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(H,t,e))}function H(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function W(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return m("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?$(this):B(this),null;if(0===(e=D(e,t))&&t.ended)return 0===t.length&&$(this),null;var i,r=t.needReadable;return m("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&m("length less than watermark",r=!0),t.ended||t.reading?m("reading or ended",r=!1):r&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=D(n,t))),null===(i=e>0?U(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&$(this)),null!==i&&this.emit("data",i),i},k.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},k.prototype.pipe=function(e,t){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,m("pipe count=%d opts=%j",o.pipesCount,t);var s=t&&!1===t.end||e===n.stdout||e===n.stderr?b:c;function l(e,t){m("onunpipe"),e===i&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,h())}function c(){m("onend"),e.end()}o.endEmitted?r.nextTick(s):i.once("end",s),e.on("unpipe",l);var u=V(i);e.on("drain",u);var d=!1;function h(){m("cleanup"),e.removeListener("close",y),e.removeListener("finish",_),e.removeListener("drain",u),e.removeListener("error",g),e.removeListener("unpipe",l),i.removeListener("end",c),i.removeListener("end",b),i.removeListener("data",f),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u()}var p=!1;function f(t){m("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==W(o.pipes,e))&&!d&&(m("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function g(t){m("onerror",t),b(),e.removeListener("error",g),0===a(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",_),b()}function _(){m("onfinish"),e.removeListener("close",y),b()}function b(){m("unpipe"),i.unpipe(e)}return i.on("data",f),v(e,"error",g),e.once("close",y),e.once("finish",_),e.emit("pipe",i),o.flowing||(m("pipe resume"),i.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var s=W(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&B(this):r.nextTick(O,this))}return n},k.prototype.addListener=k.prototype.on,k.prototype.resume=function(){var e=this._readableState;return e.flowing||(m("resume"),e.flowing=!0,R(this,e)),this},k.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},k.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(m("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){m("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<b.length;o++)e.on(b[o],this.emit.bind(this,b[o]));return this._read=function(t){m("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),k._fromList=U}).call(this,e("_process"),void 0!==Pr?Pr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":98,"./internal/streams/BufferList":103,"./internal/streams/destroy":104,"./internal/streams/stream":105,_process:92,"core-util-is":14,events:13,inherits:80,isarray:106,"process-nextick-args":91,"safe-buffer":110,"string_decoder/":107,util:11}],101:[function(e,t,n){t.exports=s;var i=e("./_stream_duplex"),r=e("core-util-is");function o(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);i.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){l(e,t,n)})):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}r.inherits=e("inherits"),r.inherits(s,i),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},{"./_stream_duplex":98,"core-util-is":14,inherits:80}],102:[function(e,t,n){(function(n,i,r){var o=e("process-nextick-args");function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){R(t,e)}}t.exports=v;var a,l=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?r:o.nextTick;v.WritableState=b;var c=e("core-util-is");c.inherits=e("inherits");var u={deprecate:e("util-deprecate")},d=e("./internal/streams/stream"),h=e("safe-buffer").Buffer,p=i.Uint8Array||function(){};function f(e){return h.from(e)}function m(e){return h.isBuffer(e)||e instanceof p}var g,y=e("./internal/streams/destroy");function _(){}function b(t,n){a=a||e("./_stream_duplex"),t=t||{};var i=n instanceof a;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,o=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(o||0===o)?o:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){I(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(t){if(a=a||e("./_stream_duplex"),!(g.call(v,this)||this instanceof a))return new v(t);this._writableState=new b(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function w(e,t){var n=new Error("write after end");e.emit("error",n),o.nextTick(t,n)}function k(e,t,n,i){var r=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(i,s),r=!1),r}function S(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n)),t}function x(e,t,n,i,r,o){if(!n){var s=S(t,i,r);i!==s&&(n=!0,r="buffer",i=s)}var a=t.objectMode?1:i.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,a,i,r,o);return l}function T(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function E(e,t,n,i,r){--t.pendingcb,n?(o.nextTick(r,i),o.nextTick(V,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(r(i),e._writableState.errorEmitted=!0,e.emit("error",i),V(e,t))}function C(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function I(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(C(n),t)E(e,n,i,t,r);else{var o=A(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||B(e,n),i?l(D,e,n,o,r):D(e,n,o,r)}}function D(e,t,n,i){n||N(e,t),t.pendingcb--,i(),V(e,t)}function N(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function B(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)r[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;r.allBuffers=l,T(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),V(e,t)}))}function M(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(P,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function V(e,t){var n=A(t);return n&&(M(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function O(e,t,n){t.ending=!0,V(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function R(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}c.inherits(v,d),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!g.call(this,e)||this===v&&e&&e._writableState instanceof b}})):g=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var i=this._writableState,r=!1,o=!i.objectMode&&m(e);return o&&!h.isBuffer(e)&&(e=f(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=_),i.ended?w(this,n):(o||k(this,i,e,n))&&(i.pendingcb++,r=x(this,i,o,e,t,n)),r},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||B(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||O(this,i,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),void 0!==Pr?Pr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":98,"./internal/streams/destroy":104,"./internal/streams/stream":105,_process:92,"core-util-is":14,inherits:80,"process-nextick-args":91,"safe-buffer":110,timers:112,"util-deprecate":115}],103:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=e("safe-buffer").Buffer,o=e("util");function s(e,t,n){e.copy(t,n)}t.exports=function(){function e(){i(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)s(n.data,t,i),i+=n.data.length,n=n.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":110,util:11}],104:[function(e,t,n){var i=e("process-nextick-args");function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return r||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(s,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(s,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(e,t){e.emit("error",t)}t.exports={destroy:r,undestroy:o}},{"process-nextick-args":91}],105:[function(e,t,n){t.exports=e("events").EventEmitter},{events:13}],106:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],107:[function(e,t,n){var i=e("safe-buffer").Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function s(e){var t=o(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}function a(e){var t;switch(this.encoding=s(e),this.encoding){case"utf16le":this.text=f,this.end=m,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=g,this.end=y,t=3;break;default:return this.write=_,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e,t,n){var i=t.length-1;if(i<n)return 0;var r=l(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n||-2===r?0:(r=l(t[i]))>=0?(r>0&&(e.lastNeed=r-2),r):--i<n||-2===r?0:(r=l(t[i]))>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0}function u(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function d(e){var t=this.lastTotal-this.lastNeed,n=u(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function h(e,t){var n=c(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function f(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function m(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function g(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function y(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function _(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}n.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=p,a.prototype.text=h,a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":110}],108:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":98,"./lib/_stream_passthrough.js":99,"./lib/_stream_readable.js":100,"./lib/_stream_transform.js":101,"./lib/_stream_writable.js":102}],109:[function(e,t,n){function i(e,t,n){var i=this;this._callback=e,this._args=n,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e||(e=i._interval),i._interval&&clearInterval(i._interval),i._interval=setInterval(i._callback,e,i._args)},this.clear=function(){i._interval&&(clearInterval(i._interval),i._interval=void 0)},this.destroy=function(){i._interval&&clearInterval(i._interval),i._callback=void 0,i._interval=void 0,i._args=void 0}}function r(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new i(arguments[0],arguments[1],e)}t.exports=r},{}],110:[function(e,t,n){var i=e("buffer"),r=i.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,n),n.Buffer=s),o(r,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{buffer:12}],111:[function(e,t,n){function i(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(r(t)):null}function r(e){return e.buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length}t.exports=i},{}],112:[function(e,t,n){(function(t,i){var r=e("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},l=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,i=!(arguments.length<2)&&s.call(arguments,1);return a[t]=!0,r((function(){a[t]&&(i?e.apply(null,i):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof i?i:function(e){delete a[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":92,timers:112}],113:[function(e,t,n){var i=e("punycode"),r=e("./util");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=v,n.resolve=k,n.resolveObject=S,n.format=w,n.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),d=["%","/","?",";","#"].concat(u),h=["/","?","#"],p=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=e("querystring");function v(e,t,n){if(e&&r.isObject(e)&&e instanceof o)return e;var i=new o;return i.parse(e,t,n),i}function w(e){return r.isString(e)&&(e=v(e)),e instanceof o?e.format():o.prototype.format.call(e)}function k(e,t){return v(e,!1,!0).resolve(t)}function S(e,t){return e?v(e,!1,!0).resolveObject(t):t}o.prototype.parse=function(e,t,n){if(!r.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(a),v=/\\/g;c[0]=c[0].replace(v,"/");var w=e=c.join(a);if(w=w.trim(),!n&&1===e.split("#").length){var k=l.exec(w);if(k)return this.path=w,this.href=w,this.pathname=k[1],k[2]?(this.search=k[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=s.exec(w);if(S){var x=(S=S[0]).toLowerCase();this.protocol=x,w=w.substr(S.length)}if(n||S||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===w.substr(0,2);!T||S&&y[S]||(w=w.substr(2),this.slashes=!0)}if(!y[S]&&(T||S&&!_[S])){for(var E,C,I=-1,D=0;D<h.length;D++)-1!==(N=w.indexOf(h[D]))&&(-1===I||N<I)&&(I=N);for(-1!==(C=-1===I?w.lastIndexOf("@"):w.lastIndexOf("@",I))&&(E=w.slice(0,C),w=w.slice(C+1),this.auth=decodeURIComponent(E)),I=-1,D=0;D<d.length;D++){var N;-1!==(N=w.indexOf(d[D]))&&(-1===I||N<I)&&(I=N)}-1===I&&(I=w.length),this.host=w.slice(0,I),w=w.slice(I),this.parseHost(),this.hostname=this.hostname||"";var B="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!B)for(var A=this.hostname.split(/\./),P=(D=0,A.length);D<P;D++){var M=A[D];if(M&&!M.match(f)){for(var V="",O=0,R=M.length;O<R;O++)M.charCodeAt(O)>127?V+="x":V+=M[O];if(!V.match(f)){var L=A.slice(0,D),j=A.slice(D+1),U=M.match(m);U&&(L.push(U[1]),j.unshift(U[2])),j.length&&(w="/"+j.join(".")+w),this.hostname=L.join(".");break}}}this.hostname.length>p?this.hostname="":this.hostname=this.hostname.toLowerCase(),B||(this.hostname=i.toASCII(this.hostname));var F=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+F,this.href+=this.host,B&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!g[x])for(D=0,P=u.length;D<P;D++){var q=u[D];if(-1!==w.indexOf(q)){var $=encodeURIComponent(q);$===q&&($=escape(q)),w=w.split(q).join($)}}var H=w.indexOf("#");-1!==H&&(this.hash=w.substr(H),w=w.slice(0,H));var W=w.indexOf("?");if(-1!==W?(this.search=w.substr(W),this.query=w.substr(W+1),t&&(this.query=b.parse(this.query)),w=w.slice(0,W)):t&&(this.search="",this.query={}),w&&(this.pathname=w),_[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var K=this.search||"";this.path=F+K}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(s=b.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+i},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(r.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=e[u])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var p=d[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||y[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=v||b||n.host&&e.pathname,k=w,S=n.pathname&&n.pathname.split("/")||[],x=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!_[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),w=w&&(""===f[0]||""===S[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=f;else if(f.length)S||(S=[]),S.pop(),S=S.concat(f),n.search=e.search,n.query=e.query;else if(!r.isNullOrUndefined(e.search))return x&&(n.hostname=n.host=S.shift(),(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift())),n.search=e.search,n.query=e.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=S.slice(-1)[0],E=(n.host||e.host||S.length>1)&&("."===T||".."===T)||""===T,C=0,I=S.length;I>=0;I--)"."===(T=S[I])?S.splice(I,1):".."===T?(S.splice(I,1),C++):C&&(S.splice(I,1),C--);if(!w&&!k)for(;C--;C)S.unshift("..");!w||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),E&&"/"!==S.join("/").substr(-1)&&S.push("");var D,N=""===S[0]||S[0]&&"/"===S[0].charAt(0);return x&&(n.hostname=n.host=N?"":S.length?S.shift():"",(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift())),(w=w||n.host&&S.length)&&!N&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":114,punycode:93,querystring:96}],114:[function(e,t,n){t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],115:[function(e,t,i){(function(e){function i(e,t){if(r("noDeprecation"))return e;var i=!1;function o(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):n("warn","at node_modules/mqtt/dist/mqtt.js:13761",t),i=!0}return e.apply(this,arguments)}return o}function r(t){try{if(!e.localStorage)return!1}catch(i){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=i}).call(this,void 0!==Pr?Pr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],116:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],117:[function(e,t,i){(function(t,r){var o=/%[sdj%]/g;i.format=function(e){if(!S(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,r=i.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}})),a=i[n];n<r;a=i[++n])v(a)||!C(a)?s+=" "+a:s+=" "+l(a);return s},i.deprecate=function(e,o){if(T(r.process))return function(){return i.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var s=!1;function a(){if(!s){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):n("error","at node_modules/mqtt/dist/mqtt.js:13885",o),s=!0}return e.apply(this,arguments)}return a};var s,a={};function l(e,t){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),b(t)?n.showHidden=t:t&&i._extend(n,t),T(n.showHidden)&&(n.showHidden=!1),T(n.depth)&&(n.depth=2),T(n.colors)&&(n.colors=!1),T(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),h(n,e,n.depth)}function c(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function u(e,t){return e}function d(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function h(e,t,n){if(e.customInspect&&t&&N(t.inspect)&&t.inspect!==i.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return S(r)||(r=h(e,r,n)),r}var o=p(e,t);if(o)return o;var s=Object.keys(t),a=d(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),D(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(t);if(0===s.length){if(N(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(I(t))return e.stylize(Date.prototype.toString.call(t),"date");if(D(t))return f(t)}var c,u="",b=!1,v=["{","}"];return _(t)&&(b=!0,v=["[","]"]),N(t)&&(u=" [Function"+(t.name?": "+t.name:"")+"]"),E(t)&&(u=" "+RegExp.prototype.toString.call(t)),I(t)&&(u=" "+Date.prototype.toUTCString.call(t)),D(t)&&(u=" "+f(t)),0!==s.length||b&&0!=t.length?n<0?E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=b?m(e,t,n,a,s):s.map((function(i){return g(e,t,n,a,i,b)})),e.seen.pop(),y(c,u,v)):v[0]+u+v[1]}function p(e,t){if(T(t))return e.stylize("undefined","undefined");if(S(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return k(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,n,i,r){for(var o=[],s=0,a=t.length;s<a;++s)O(t,String(s))?o.push(g(e,t,n,i,String(s),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(g(e,t,n,i,r,!0))})),o}function g(e,t,n,i,r,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),O(i,r)||(s="["+r+"]"),a||(e.seen.indexOf(l.value)<0?(a=v(n)?h(e,l.value,null):h(e,l.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),T(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function y(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function _(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function v(e){return null===e}function w(e){return null==e}function k(e){return"number"==typeof e}function S(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function T(e){return void 0===e}function E(e){return C(e)&&"[object RegExp]"===A(e)}function C(e){return"object"==typeof e&&null!==e}function I(e){return C(e)&&"[object Date]"===A(e)}function D(e){return C(e)&&("[object Error]"===A(e)||e instanceof Error)}function N(e){return"function"==typeof e}function B(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function A(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}i.debuglog=function(e){if(T(s)&&(s={}.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(s)){var r=t.pid;a[e]=function(){var t=i.format.apply(i,arguments);n("error","at node_modules/mqtt/dist/mqtt.js:13907","%s %d: %s",e,r,t)}}else a[e]=function(){};return a[e]},i.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=_,i.isBoolean=b,i.isNull=v,i.isNullOrUndefined=w,i.isNumber=k,i.isString=S,i.isSymbol=x,i.isUndefined=T,i.isRegExp=E,i.isObject=C,i.isDate=I,i.isError=D,i.isFunction=N,i.isPrimitive=B,i.isBuffer=e("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function V(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}i.log=function(){n("log","at node_modules/mqtt/dist/mqtt.js:14353","%s - %s",V(),i.format.apply(i,arguments))},i.inherits=e("inherits"),i._extend=function(e,t){if(!t||!C(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,e("_process"),void 0!==Pr?Pr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":116,_process:92,inherits:80}],118:[function(e,t,n){(function(n,i){var r=e("readable-stream").Transform,o=e("duplexify"),s=e("ws"),a=e("safe-buffer").Buffer;function l(e,t,n){var i=new r({objectMode:e.objectMode});return i._write=t,i._flush=n,i}function c(e,t,r){var c,u,d="browser"===n.title,h=!!i.WebSocket,p=d?b:_;t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=null,("string"==typeof r.protocol||Array.isArray(r.protocol))&&(t=r.protocol)),r||(r={}),void 0===r.objectMode&&(r.objectMode=!(!0===r.binary||void 0===r.binary));var f=l(r,p,v);r.objectMode||(f._writev=E);var m=r.browserBufferSize||524288,g=r.browserBufferTimeout||1e3;"object"==typeof e?u=e:(u=h&&d?new s(e,t):new s(e,t,r)).binaryType="arraybuffer",u.readyState===u.OPEN?c=f:(c=o.obj(),u.onopen=w),c.socket=u,u.onclose=k,u.onerror=S,u.onmessage=x,f.on("close",T);var y=!r.objectMode;function _(e,t,n){u.readyState===u.OPEN?(y&&"string"==typeof e&&(e=a.from(e,"utf8")),u.send(e,n)):n()}function b(e,t,n){if(u.bufferedAmount>m)setTimeout(b,g,e,t,n);else{y&&"string"==typeof e&&(e=a.from(e,"utf8"));try{u.send(e)}catch(i){return n(i)}n()}}function v(e){u.close(),e()}function w(){c.setReadable(f),c.setWritable(f),c.emit("connect")}function k(){c.end(),c.destroy()}function S(e){c.destroy(e)}function x(e){var t=e.data;t=t instanceof ArrayBuffer?a.from(t):a.from(t,"utf8"),f.push(t)}function T(){u.close()}function E(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"string"==typeof e[i].chunk?n[i]=a.from(e[i],"utf8"):n[i]=e[i].chunk;this._write(a.concat(n),"binary",t)}return c}t.exports=c}).call(this,e("_process"),void 0!==Pr?Pr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:92,duplexify:17,"readable-stream":108,"safe-buffer":110,ws:119}],119:[function(e,t,n){var i=null;"undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof MozWebSocket?i=MozWebSocket:"undefined"!=typeof window&&(i=window.WebSocket||window.MozWebSocket),t.exports=i},{}],120:[function(e,t,n){function i(e,t){if(e&&t)return i(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){n[t]=e[t]})),n;function n(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var i=e.apply(this,t),r=t[t.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach((function(e){i[e]=r[e]})),i}}t.exports=i},{}],121:[function(e,t,n){t.exports=r;var i=Object.prototype.hasOwnProperty;function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}},{}]},{},[9])(9);const Or=Vr;var Rr,Lr="testtopic",jr="ws://";const Ur=o({data:()=>({mqttFormData:{hostname:"jqrjq.cn",port:8083,path:"mqtt",username:"admin",password:"public",extra:[]},extras:[{text:"Clean Session",value:0},{text:"SSL",value:1}],connectState:!1,protocol:jr,msg:{msgType:"",msgText:""},messages:[]}),methods:{connect(){var e=this,t=this.mqttFormData,i=t.hostname+":"+t.port+"/"+t.path,r={connectTimeout:5e3,clientId:Ar(),username:t.username,password:t.password,reconnectPeriod:0,clean:0==this.mqttFormData.extra[0]};Rr=Or.connect(jr+i,r),uni.showLoading({title:"连接中...",mask:!0}),Rr.on("connect",(function(){setTimeout((()=>{uni.hideLoading(),e.connectState=Rr.connected,e.msgPop("success","已连接"),Rr.subscribe(Lr,(()=>{n("log","at pages/index/mqtt.vue:149",`订阅了主题 ${Lr}`)}))}),1e3)})),Rr.on("error",(function(t){setTimeout((()=>{uni.hideLoading(),e.msgPop("error","连接失败")}),500)})),Rr.on("close",(function(){setTimeout((()=>{uni.hideLoading(),e.msgPop("error","连接断开")}),500)})),Rr.on("message",(function(t,n,i){e.messages.unshift(n),e.messages.length>4&&e.messages.pop()}))},disconnect(){uni.showLoading({title:"断开连接...",mask:!0}),setTimeout((()=>{uni.hideLoading(),Rr.end(),this.connectState=!1}),500)},msgPop(e,t){this.msg={msgType:e,msgText:t},this.$refs.message.open()},extraChange(){let e=this.mqttFormData.extra.filter((e=>e));this.mqttFormData.port=e.includes(1)?8084:8083,8084==this.mqttFormData.port?this.protocol="wss://":this.protocol="ws://"},openPubulishDialog(){this.$refs.pubulishDialog.open()},sendMsg(e){Rr.publish(Lr,e)}}},[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-icons"),s),u=i(e.resolveDynamicComponent("uni-easyinput"),y),d=i(e.resolveDynamicComponent("uni-section"),be),h=i(e.resolveDynamicComponent("uni-data-checkbox"),cr),p=i(e.resolveDynamicComponent("uni-forms"),M),f=i(e.resolveDynamicComponent("uni-list-item"),hr),m=i(e.resolveDynamicComponent("uni-list"),pr),g=i(e.resolveDynamicComponent("uni-popup-message"),mr),_=i(e.resolveDynamicComponent("uni-popup"),wr),b=i(e.resolveDynamicComponent("uni-popup-dialog"),xr);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",null,[e.createVNode(p,{ref:"mqttForm",modelValue:a.mqttFormData},{default:e.withCtx((()=>[e.createVNode(d,{title:"地址:",type:"line"},{right:e.withCtx((()=>[e.createElementVNode("view",{style:{"margin-right":"105px",width:"100%"}},[e.createVNode(u,{modelValue:a.mqttFormData.hostname,"onUpdate:modelValue":n[0]||(n[0]=e=>a.mqttFormData.hostname=e),placeholder:"请输入服务器地址"},{default:e.withCtx((()=>[e.createVNode(c,{type:"close"})])),_:1},8,["modelValue"])])])),_:1}),e.createVNode(d,{title:"端口:",type:"line"},{right:e.withCtx((()=>[e.createElementVNode("view",{style:{"margin-right":"105px",width:"100%"}},[e.createVNode(u,{modelValue:a.mqttFormData.port,"onUpdate:modelValue":n[1]||(n[1]=e=>a.mqttFormData.port=e),placeholder:"请输入端口"},{default:e.withCtx((()=>[e.createVNode(c,{type:"close"})])),_:1},8,["modelValue"])])])),_:1}),e.createVNode(d,{title:"路径:",type:"line"},{right:e.withCtx((()=>[e.createElementVNode("view",{style:{"margin-right":"105px",width:"100%"}},[e.createVNode(u,{modelValue:a.mqttFormData.path,"onUpdate:modelValue":n[2]||(n[2]=e=>a.mqttFormData.path=e),placeholder:"请输入路径"},{default:e.withCtx((()=>[e.createVNode(c,{type:"close"})])),_:1},8,["modelValue"])])])),_:1}),e.createVNode(d,{title:"用户名:",type:"line"},{right:e.withCtx((()=>[e.createElementVNode("view",{style:{"margin-right":"105px",width:"100%"}},[e.createVNode(u,{modelValue:a.mqttFormData.username,"onUpdate:modelValue":n[3]||(n[3]=e=>a.mqttFormData.username=e),placeholder:"请输入用户名"},{default:e.withCtx((()=>[e.createVNode(c,{type:"close"})])),_:1},8,["modelValue"])])])),_:1}),e.createVNode(d,{title:"密码:",type:"line"},{right:e.withCtx((()=>[e.createElementVNode("view",{style:{"margin-right":"105px",width:"100%"}},[e.createVNode(u,{modelValue:a.mqttFormData.password,"onUpdate:modelValue":n[4]||(n[4]=e=>a.mqttFormData.password=e),placeholder:"请输入密码"},{default:e.withCtx((()=>[e.createVNode(c,{type:"close"})])),_:1},8,["modelValue"])])])),_:1}),e.createVNode(d,{title:"选项:",type:"line"},{right:e.withCtx((()=>[e.createElementVNode("view",{style:{"margin-right":"105px",width:"100%"}},[e.createVNode(h,{modelValue:a.mqttFormData.extra,"onUpdate:modelValue":n[5]||(n[5]=e=>a.mqttFormData.extra=e),multiple:"",localdata:a.extras,onChange:l.extraChange},null,8,["modelValue","localdata","onChange"])])])),_:1}),e.createVNode(d,{title:"状态:",type:"line"},{right:e.withCtx((()=>[e.createElementVNode("view",{style:{"margin-right":"105px",width:"100%"}},[e.createElementVNode("text",{style:{"margin-right":"5px"}},e.toDisplayString("http://"+a.mqttFormData.hostname+":"+a.mqttFormData.port+"/"+a.mqttFormData.path),1),a.connectState?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(c,{key:0,type:"clear",size:"25",style:{color:"#e43d33"}})),a.connectState?(e.openBlock(),e.createBlock(c,{key:1,type:"checkbox-filled",size:"25",style:{color:"#18bc37"}})):e.createCommentVNode("",!0)])])),_:1}),e.createVNode(d,{title:""},{default:e.withCtx((()=>[e.createElementVNode("view",{style:{"text-align":"center",height:"30px"}},[e.createElementVNode("button",{type:"primary",size:"mini",style:{"margin-right":"20px","font-size":"15px",height:"35px","line-height":"35px"},onClick:n[6]||(n[6]=(...e)=>l.connect&&l.connect(...e))},"连接"),e.createElementVNode("button",{type:"primary",size:"mini",style:{"margin-right":"20px","font-size":"15px",height:"35px","line-height":"35px"},onClick:n[7]||(n[7]=(...e)=>l.disconnect&&l.disconnect(...e))},"断开"),a.connectState?(e.openBlock(),e.createElementBlock("button",{key:0,type:"primary",size:"mini",style:{"margin-right":"20px","font-size":"15px",height:"35px","line-height":"35px"},onClick:n[8]||(n[8]=(...e)=>l.openPubulishDialog&&l.openPubulishDialog(...e))},"发送消息")):e.createCommentVNode("",!0)])])),_:1})])),_:1},8,["modelValue"]),e.createVNode(d,{title:"消息",subTitle:"Message",type:"circle"},{default:e.withCtx((()=>[e.createVNode(m,null,{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.messages,((t,n)=>(e.openBlock(),e.createBlock(f,{title:String(t),rightText:String(n+1)},null,8,["title","rightText"])))),256))])),_:1})])),_:1})]),e.createVNode(_,{ref:"message",type:"message"},{default:e.withCtx((()=>[e.createVNode(g,{type:a.msg.msgType,message:a.msg.msgText,duration:2e3},null,8,["type","message"])])),_:1},512),e.createVNode(_,{ref:"pubulishDialog",type:"dialog"},{default:e.withCtx((()=>[e.createVNode(b,{mode:"input",title:"发送消息",placeholder:"请输入内容",onConfirm:l.sendMsg},null,8,["onConfirm"])])),_:1},512)])}]]),Fr={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:zr}=Be(Fr),qr={name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||zr("uni-search-bar.cancel")},placeholderText(){return this.placeholder||zr("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord())},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}};const $r=o(qr,[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"uni-searchbar"},[e.createElementVNode("view",{style:e.normalizeStyle({borderRadius:r.radius+"px",backgroundColor:r.bgColor}),class:"uni-searchbar__box",onClick:n[5]||(n[5]=(...e)=>l.searchClick&&l.searchClick(...e))},[e.createElementVNode("view",{class:"uni-searchbar__box-icon-search"},[e.renderSlot(t.$slots,"searchIcon",{},(()=>[e.createVNode(c,{color:"#c0c4cc",size:"18",type:"search"})]),!0)]),a.show||a.searchVal?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,focus:a.showSync,disabled:r.readonly,placeholder:l.placeholderText,maxlength:r.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>a.searchVal=e),onConfirm:n[1]||(n[1]=(...e)=>l.confirm&&l.confirm(...e)),onBlur:n[2]||(n[2]=(...e)=>l.blur&&l.blur(...e)),onFocus:n[3]||(n[3]=(...e)=>l.emitFocus&&l.emitFocus(...e))},null,40,["focus","disabled","placeholder","maxlength"])),[[e.vModelText,a.searchVal]]):(e.openBlock(),e.createElementBlock("text",{key:1,class:"uni-searchbar__text-placeholder"},e.toDisplayString(r.placeholder),1)),a.show&&("always"===r.clearButton||"auto"===r.clearButton&&""!==a.searchVal)&&!r.readonly?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:n[4]||(n[4]=(...e)=>l.clear&&l.clear(...e))},[e.renderSlot(t.$slots,"clearIcon",{},(()=>[e.createVNode(c,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])):e.createCommentVNode("",!0)],4),"always"===r.cancelButton||a.show&&"auto"===r.cancelButton?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:n[6]||(n[6]=(...e)=>l.cancel&&l.cancel(...e)),class:"uni-searchbar__cancel"},e.toDisplayString(l.cancelTextI18n),1)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-262497cb"]]);const Hr=o({name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick(e){this.$emit("click",e)}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-card",{"uni-card--full":i.isFull,"uni-card--shadow":i.isShadow,"uni-card--border":i.border}]),style:e.normalizeStyle({margin:i.isFull?0:i.margin,padding:i.spacing,"box-shadow":i.isShadow?i.shadow:""})},[e.renderSlot(t.$slots,"cover",{},(()=>[i.cover?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-card__cover"},[e.createElementVNode("image",{class:"uni-card__cover-image",mode:"widthFix",onClick:n[0]||(n[0]=e=>s.onClick("cover")),src:i.cover},null,8,["src"])])):e.createCommentVNode("",!0)]),!0),e.renderSlot(t.$slots,"title",{},(()=>[i.title||i.extra?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-card__header"},[e.createElementVNode("view",{class:"uni-card__header-box",onClick:n[1]||(n[1]=e=>s.onClick("title"))},[i.thumbnail?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-card__header-avatar"},[e.createElementVNode("image",{class:"uni-card__header-avatar-image",src:i.thumbnail,mode:"aspectFit"},null,8,["src"])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-card__header-content"},[e.createElementVNode("text",{class:"uni-card__header-content-title uni-ellipsis"},e.toDisplayString(i.title),1),i.title&&i.subTitle?(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-card__header-content-subtitle uni-ellipsis"},e.toDisplayString(i.subTitle),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"uni-card__header-extra",onClick:n[2]||(n[2]=e=>s.onClick("extra"))},[e.createElementVNode("text",{class:"uni-card__header-extra-text"},e.toDisplayString(i.extra),1)])])):e.createCommentVNode("",!0)]),!0),e.createElementVNode("view",{class:"uni-card__content",style:e.normalizeStyle({padding:i.padding}),onClick:n[3]||(n[3]=e=>s.onClick("content"))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4),e.createElementVNode("view",{class:"uni-card__actions",onClick:n[4]||(n[4]=e=>s.onClick("actions"))},[e.renderSlot(t.$slots,"actions",{},void 0,!0)])],6)}],["__scopeId","data-v-a64d79f2"]]),Wr={__name:"articles",props:["catArticles"],setup(t){const n=t.catArticles;return(t,r)=>{const o=i(e.resolveDynamicComponent("uni-card"),Hr);return e.openBlock(),e.createElementBlock("view",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),(t=>{return e.openBlock(),e.createBlock(o,{title:(n=t.title,n.slice(0,10)+"...."),extra:"查看详情",onClick:e=>{return n=t.id,void uni.navigateTo({url:`/pages/article/article?id=${String(n)}`});var n}},{default:e.withCtx((()=>{return[e.createElementVNode("text",{class:"uni-body"},e.toDisplayString((n=t.content,n.slice(0,20)+"....")),1)];var n})),_:2},1032,["title","onClick"]);var n})),256))])}}},Kr={data:()=>({category:"",categoryId:0,catArticles:null,searchValue:"",bgcolor:"#5fa5fa",frontColor:"#ffffff",type:"bottom",show:!0}),onLoad(){uni.setNavigationBarColor({backgroundColor:this.bgcolor,frontColor:this.fontColor}),this.getCategory()},methods:{search(e){n("log","at pages/index/wiki.vue:41",e)},scroll(e){},getCategory(){Z("api/articleCat/all",null).then((e=>{this.category=e.data.articleCats,this.categoryId=e.data.articleCats[0].id}))},changeCategory(e,t){this.category.forEach(((t,n)=>{t.selected=n===e})),this.categoryId=t}},watch:{categoryId(){this.catArticles=null,Z(`api/article/${this.categoryId}`,null).then((e=>{this.catArticles=e.data.articles}))}}};const Jr=o(Kr,[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-search-bar"),$r),u=i(e.resolveDynamicComponent("uni-icons"),s),d=i(e.resolveDynamicComponent("articles"),Wr);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(c,{style:e.normalizeStyle({backgroundColor:a.bgcolor}),onConfirm:l.search,"cancel-button":"none",focus:!0,modelValue:a.searchValue,"onUpdate:modelValue":n[0]||(n[0]=e=>a.searchValue=e)},null,8,["style","onConfirm","modelValue"]),e.createElementVNode("view",{class:"catogory"},[e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true",onScroll:n[1]||(n[1]=(...e)=>l.scroll&&l.scroll(...e)),"show-scrollbar":!0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.category,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["scroll-view-item_H",{selected:t.selected}]),key:n,onClick:e=>l.changeCategory(n,t.id)},e.toDisplayString(t.catName),11,["onClick"])))),128))],32),e.createVNode(u,{type:a.type,class:"more"},null,8,["type"])]),a.catArticles?(e.openBlock(),e.createBlock(d,{key:0,catArticles:a.catArticles},null,8,["catArticles"])):e.createCommentVNode("",!0)],64)}]]);const Yr=o({data:()=>({id:"",article:null}),onLoad(e){this.id=e.id,this.getDetail()},methods:{getDetail(){Z(`api/article/one?id=${this.id}`,null).then((e=>{n("log","at pages/article/article.vue:27",e.data),this.article=e.data.article,uni.setNavigationBarTitle({title:e.data.article.title})}))}}},[["render",function(t,n,r,o,s,a){const l=i(e.resolveDynamicComponent("uni-card"),Hr),c=i(e.resolveDynamicComponent("uni-section"),be);return e.openBlock(),e.createElementBlock("view",null,[s.article?(e.openBlock(),e.createBlock(c,{key:0,title:s.article.title,type:"line",style:{height:"620px"}},{default:e.withCtx((()=>[e.createVNode(l,{"is-shadow":!1,extra:new Date(s.article.createTime).toLocaleDateString()},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"uni-body"},e.toDisplayString(s.article.content),1)])),_:1},8,["extra"])])),_:1},8,["title"])):e.createCommentVNode("",!0)])}]]),Gr={__name:"mors",props:["mm"],setup(t){const r=t,o=r.mm;return n("log","at components/mors/mors.vue:14",r),(t,n)=>{const r=i(e.resolveDynamicComponent("uni-card"),Hr),s=i(e.resolveDynamicComponent("uni-section"),be);return e.openBlock(),e.createElementBlock("view",null,[e.createVNode(s,{title:"我的大事件",type:"line",style:{height:"auto"}},{default:e.withCtx((()=>[e.unref(o)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(o),(t=>(e.openBlock(),e.createBlock(r,{"is-shadow":!1,extra:new Date(t.happenTime).toLocaleDateString()},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"uni-body"},e.toDisplayString(t.content),1)])),_:2},1032,["extra"])))),256)):e.createCommentVNode("",!0)])),_:1})])}}};const Qr=o({name:"UniFab",emits:["fabClick","trigger"],props:{pattern:{type:Object,default:()=>({})},horizontal:{type:String,default:"left"},vertical:{type:String,default:"bottom"},direction:{type:String,default:"horizontal"},content:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},popMenu:{type:Boolean,default:!0}},data:()=>({fabShow:!1,isShow:!1,isAndroidNvue:!1,styles:{color:"#3c3e49",selectedColor:"#007AFF",backgroundColor:"#fff",buttonColor:"#007AFF",iconColor:"#fff"}}),computed:{contentWidth(e){return 55*(this.content.length+1)+15+"px"},contentWidthMin:()=>"55px",boxWidth(){return this.getPosition(3,"horizontal")},boxHeight(){return this.getPosition(3,"vertical")},leftBottom(){return this.getPosition(0,"left","bottom")},rightBottom(){return this.getPosition(0,"right","bottom")},leftTop(){return this.getPosition(0,"left","top")},rightTop(){return this.getPosition(0,"right","top")},flexDirectionStart(){return this.getPosition(1,"vertical","top")},flexDirectionEnd(){return this.getPosition(1,"vertical","bottom")},horizontalLeft(){return this.getPosition(2,"horizontal","left")},horizontalRight(){return this.getPosition(2,"horizontal","right")},nvueBottom:()=>(uni.getSystemInfoSync().windowBottom,30)},watch:{pattern:{handler(e,t){this.styles=Object.assign({},this.styles,e)},deep:!0}},created(){this.isShow=this.show,0===this.top&&(this.fabShow=!0),this.styles=Object.assign({},this.styles,this.pattern)},methods:{_onClick(){this.$emit("fabClick"),this.popMenu&&(this.isShow=!this.isShow)},open(){this.isShow=!0},close(){this.isShow=!1},_onItemClick(e,t){this.isShow&&this.$emit("trigger",{index:e,item:t})},getPosition(e,t,n){return 0===e?this.horizontal===t&&this.vertical===n:1===e?this.direction===t&&this.vertical===n:2===e?this.direction===t&&this.horizontal===n:this.isShow&&this.direction===t?this.contentWidth:this.contentWidthMin}}},[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"uni-cursor-point"},[r.popMenu&&(l.leftBottom||l.rightBottom||l.leftTop||l.rightTop)&&r.content.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass([{"uni-fab--leftBottom":l.leftBottom,"uni-fab--rightBottom":l.rightBottom,"uni-fab--leftTop":l.leftTop,"uni-fab--rightTop":l.rightTop},"uni-fab"]),style:e.normalizeStyle(l.nvueBottom)},[e.createElementVNode("view",{class:e.normalizeClass([{"uni-fab__content--left":"left"===r.horizontal,"uni-fab__content--right":"right"===r.horizontal,"uni-fab__content--flexDirection":"vertical"===r.direction,"uni-fab__content--flexDirectionStart":l.flexDirectionStart,"uni-fab__content--flexDirectionEnd":l.flexDirectionEnd,"uni-fab__content--other-platform":!a.isAndroidNvue},"uni-fab__content"]),style:e.normalizeStyle({width:l.boxWidth,height:l.boxHeight,backgroundColor:a.styles.backgroundColor}),elevation:"5"},[l.flexDirectionStart||l.horizontalLeft?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-fab__item uni-fab__item--first"})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.content,((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:n,class:e.normalizeClass([{"uni-fab__item--active":a.isShow},"uni-fab__item"]),onClick:e=>l._onItemClick(n,t)},[e.createElementVNode("image",{src:t.active?t.selectedIconPath:t.iconPath,class:"uni-fab__item-image",mode:"aspectFit"},null,8,["src"]),e.createElementVNode("text",{class:"uni-fab__item-text",style:e.normalizeStyle({color:t.active?a.styles.selectedColor:a.styles.color})},e.toDisplayString(t.text),5)],10,["onClick"])))),128)),l.flexDirectionEnd||l.horizontalRight?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-fab__item uni-fab__item--first"})):e.createCommentVNode("",!0)],6)],6)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass([{"uni-fab__circle--leftBottom":l.leftBottom,"uni-fab__circle--rightBottom":l.rightBottom,"uni-fab__circle--leftTop":l.leftTop,"uni-fab__circle--rightTop":l.rightTop,"uni-fab__content--other-platform":!a.isAndroidNvue},"uni-fab__circle uni-fab__plus"]),style:e.normalizeStyle({"background-color":a.styles.buttonColor,bottom:l.nvueBottom}),onClick:n[0]||(n[0]=(...e)=>l._onClick&&l._onClick(...e))},[e.createVNode(c,{class:e.normalizeClass(["fab-circle-icon",{"uni-fab__plus--active":a.isShow&&r.content.length>0}]),type:"plusempty",color:a.styles.iconColor,size:"32"},null,8,["color","class"])],6)])}],["__scopeId","data-v-cc88d1a9"]]),Zr=Y().userinfo;const Xr=o({data:()=>({mors:null}),methods:{getMors(){this.mors=null,Z(`api/memorabilia/${Zr.id}`,null).then((e=>{this.mors=e.data.memorabilias}))},addMor(){uni.navigateTo({url:"/pages/my/addMor?id=1"})}},mounted(){this.getMors()},onShow(){this.getMors()}},[["render",function(t,n,r,o,s,a){const l=i(e.resolveDynamicComponent("mors"),Gr),c=i(e.resolveDynamicComponent("uni-fab"),Qr);return e.openBlock(),e.createElementBlock("view",null,[s.mors?(e.openBlock(),e.createBlock(l,{key:0,mm:s.mors},null,8,["mm"])):e.createCommentVNode("",!0),e.createVNode(c,{onFabClick:a.addMor,horizontal:"right"},null,8,["onFabClick"])])}]]);class eo{constructor({date:e,selected:t,startDate:n,endDate:i,range:r}={}){this.date=this.getDate(new Date),this.selected=t||[],this.startDate=n,this.endDate=i,this.range=r,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(e){this.selectDate=this.getDate(e),this._getWeek(this.selectDate.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}resetSatrtDate(e){this.startDate=e}resetEndDate(e){this.endDate=e}getDate(e,t=0,n="day"){e||(e=new Date),"object"!=typeof e&&(e=e.replace(/-/g,"/"));const i=new Date(e);switch(n){case"day":i.setDate(i.getDate()+t);break;case"month":31===i.getDate()?i.setDate(i.getDate()+t):i.setMonth(i.getMonth()+t);break;case"year":i.setFullYear(i.getFullYear()+t)}const r=i.getFullYear(),o=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate();return{fullDate:r+"-"+o+"-"+s,year:r,month:o,date:s,day:i.getDay()}}_getLastMonthDays(e,t){let n=[];for(let i=e;i>0;i--){const e=new Date(t.year,t.month-1,1-i).getDate();n.push({date:e,month:t.month-1,disable:!0})}return n}_currentMonthDys(e,t){let n=[],i=this.date.fullDate;for(let r=1;r<=e;r++){let e=t.year+"-"+(t.month,t.month+"-")+(r<10?"0"+r:r),o=i===e,s=this.selected&&this.selected.find((t=>{if(this.dateEqual(e,t.date))return t})),a=!0,l=!0;this.startDate&&(a=this.dateCompare(this.startDate,e)),this.endDate&&(l=this.dateCompare(e,this.endDate));let c=this.multipleStatus.data,u=!1,d=-1;this.range&&(c&&(d=c.findIndex((t=>this.dateEqual(t,e)))),-1!==d&&(u=!0));let h={fullDate:e,year:t.year,date:r,multiple:!!this.range&&u,beforeMultiple:this.isLogicBefore(e,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(e,this.multipleStatus.before,this.multipleStatus.after),month:t.month,disable:!(a&&l),isDay:o,userChecked:!1};s&&(h.extraInfo=s),n.push(h)}return n}_getNextMonthDays(e,t){let n=[];for(let i=1;i<e+1;i++)n.push({date:i,month:Number(t.month)+1,disable:!0});return n}getInfo(e){e||(e=new Date);return this.canlender.find((t=>t.fullDate===this.getDate(e).fullDate))}dateCompare(e,t){return(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/")))}dateEqual(e,t){return e=new Date(e.replace("-","/").replace("-","/")),t=new Date(t.replace("-","/").replace("-","/")),e.getTime()-t.getTime()==0}isLogicBefore(e,t,n){let i=t;return t&&n&&(i=this.dateCompare(t,n)?t:n),this.dateEqual(i,e)}isLogicAfter(e,t,n){let i=n;return t&&n&&(i=this.dateCompare(t,n)?n:t),this.dateEqual(i,e)}geDateAll(e,t){var n=[],i=e.split("-"),r=t.split("-"),o=new Date;o.setFullYear(i[0],i[1]-1,i[2]);var s=new Date;s.setFullYear(r[0],r[1]-1,r[2]);for(var a=o.getTime()-864e5,l=s.getTime()-864e5,c=a;c<=l;)c+=864e5,n.push(this.getDate(new Date(parseInt(c))).fullDate);return n}setMultiple(e){let{before:t,after:n}=this.multipleStatus;if(this.range){if(t&&n){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=e,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else t?(this.multipleStatus.after=e,this.dateCompare(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=e,this.lastHover=!1);this._getWeek(e)}}setHoverMultiple(e){let{before:t,after:n}=this.multipleStatus;this.range&&(this.lastHover||(t?(this.multipleStatus.after=e,this.dateCompare(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this._getWeek(e)))}setDefaultMultiple(e,t){this.multipleStatus.before=e,this.multipleStatus.after=t,e&&t&&(this.dateCompare(e,t)?(this.multipleStatus.data=this.geDateAll(e,t),this._getWeek(t)):(this.multipleStatus.data=this.geDateAll(t,e),this._getWeek(e)))}_getWeek(e){const{fullDate:t,year:n,month:i,date:r,day:o}=this.getDate(e);let s=new Date(n,i-1,1).getDay(),a=new Date(n,i,0).getDate(),l={lastMonthDays:this._getLastMonthDays(s,this.getDate(e)),currentMonthDys:this._currentMonthDys(a,this.getDate(e)),nextMonthDays:[],weeks:[]},c=[];const u=42-(l.lastMonthDays.length+l.currentMonthDys.length);l.nextMonthDays=this._getNextMonthDays(u,this.getDate(e)),c=c.concat(l.lastMonthDays,l.currentMonthDys,l.nextMonthDays);let d={};for(let h=0;h<c.length;h++)h%7==0&&(d[parseInt(h/7)]=new Array(7)),d[parseInt(h/7)][h%7]=c[h];this.canlender=c,this.weeks=d}}const to=o({props:{weeks:{type:Object,default:()=>({})},calendar:{type:Object,default:()=>({})},selected:{type:Array,default:()=>[]},lunar:{type:Boolean,default:!1},checkHover:{type:Boolean,default:!1}},methods:{choiceDate(e){this.$emit("change",e)},handleMousemove(e){this.$emit("handleMouse",e)}}},[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box",{"uni-calendar-item--disable":i.weeks.disable,"uni-calendar-item--before-checked-x":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked-x":i.weeks.afterMultiple}]),onClick:n[0]||(n[0]=e=>s.choiceDate(i.weeks)),onMouseenter:n[1]||(n[1]=e=>s.handleMousemove(i.weeks))},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box-item",{"uni-calendar-item--checked":i.calendar.fullDate===i.weeks.fullDate&&(i.calendar.userChecked||!i.checkHover),"uni-calendar-item--checked-range-text":i.checkHover,"uni-calendar-item--before-checked":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked":i.weeks.afterMultiple,"uni-calendar-item--disable":i.weeks.disable}])},[i.selected&&i.weeks.extraInfo?(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-calendar-item__weeks-box-circle"})):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text"},e.toDisplayString(i.weeks.date),1)],2),e.createElementVNode("view",{class:e.normalizeClass({"uni-calendar-item--isDay":i.weeks.isDay})},null,2)],34)}],["__scopeId","data-v-262c635a"]]),no={en:{"uni-datetime-picker.selectDate":"select date","uni-datetime-picker.selectTime":"select time","uni-datetime-picker.selectDateTime":"select datetime","uni-datetime-picker.startDate":"start date","uni-datetime-picker.endDate":"end date","uni-datetime-picker.startTime":"start time","uni-datetime-picker.endTime":"end time","uni-datetime-picker.ok":"ok","uni-datetime-picker.clear":"clear","uni-datetime-picker.cancel":"cancel","uni-datetime-picker.year":"-","uni-datetime-picker.month":"","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN","uni-calender.confirm":"confirm"},"zh-Hans":{"uni-datetime-picker.selectDate":"选择日期","uni-datetime-picker.selectTime":"选择时间","uni-datetime-picker.selectDateTime":"选择日期时间","uni-datetime-picker.startDate":"开始日期","uni-datetime-picker.endDate":"结束日期","uni-datetime-picker.startTime":"开始时间","uni-datetime-picker.endTime":"结束时间","uni-datetime-picker.ok":"确定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"确认"},"zh-Hant":{"uni-datetime-picker.selectDate":"選擇日期","uni-datetime-picker.selectTime":"選擇時間","uni-datetime-picker.selectDateTime":"選擇日期時間","uni-datetime-picker.startDate":"開始日期","uni-datetime-picker.endDate":"結束日期","uni-datetime-picker.startTime":"開始时间","uni-datetime-picker.endTime":"結束时间","uni-datetime-picker.ok":"確定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"確認"}},{t:io}=Be(no),ro={name:"UniDatetimePicker",components:{},data:()=>({indicatorStyle:"height: 50px;",visible:!1,fixNvueBug:{},dateShow:!0,timeShow:!0,title:"日期和时间",time:"",year:1920,month:0,day:0,hour:0,minute:0,second:0,startYear:1920,startMonth:1,startDay:1,startHour:0,startMinute:0,startSecond:0,endYear:2120,endMonth:12,endDay:31,endHour:23,endMinute:59,endSecond:59}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},disabled:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},hideSecond:{type:[Boolean,String],default:!1}},watch:{modelValue:{handler(e,t){e?(this.parseValue(this.fixIosDateFormat(e)),this.initTime(!1)):(this.time="",this.parseValue(Date.now()))},immediate:!0},type:{handler(e){"date"===e?(this.dateShow=!0,this.timeShow=!1,this.title="日期"):"time"===e?(this.dateShow=!1,this.timeShow=!0,this.title="时间"):(this.dateShow=!0,this.timeShow=!0,this.title="日期和时间")},immediate:!0},start:{handler(e){this.parseDatetimeRange(this.fixIosDateFormat(e),"start")},immediate:!0},end:{handler(e){this.parseDatetimeRange(this.fixIosDateFormat(e),"end")},immediate:!0},months(e){this.checkValue("month",this.month,e)},days(e){this.checkValue("day",this.day,e)},hours(e){this.checkValue("hour",this.hour,e)},minutes(e){this.checkValue("minute",this.minute,e)},seconds(e){this.checkValue("second",this.second,e)}},computed:{years(){return this.getCurrentRange("year")},months(){return this.getCurrentRange("month")},days(){return this.getCurrentRange("day")},hours(){return this.getCurrentRange("hour")},minutes(){return this.getCurrentRange("minute")},seconds(){return this.getCurrentRange("second")},ymd(){return[this.year-this.minYear,this.month-this.minMonth,this.day-this.minDay]},hms(){return[this.hour-this.minHour,this.minute-this.minMinute,this.second-this.minSecond]},currentDateIsStart(){return this.year===this.startYear&&this.month===this.startMonth&&this.day===this.startDay},currentDateIsEnd(){return this.year===this.endYear&&this.month===this.endMonth&&this.day===this.endDay},minYear(){return this.startYear},maxYear(){return this.endYear},minMonth(){return this.year===this.startYear?this.startMonth:1},maxMonth(){return this.year===this.endYear?this.endMonth:12},minDay(){return this.year===this.startYear&&this.month===this.startMonth?this.startDay:1},maxDay(){return this.year===this.endYear&&this.month===this.endMonth?this.endDay:this.daysInMonth(this.year,this.month)},minHour(){return"datetime"===this.type?this.currentDateIsStart?this.startHour:0:"time"===this.type?this.startHour:void 0},maxHour(){return"datetime"===this.type?this.currentDateIsEnd?this.endHour:23:"time"===this.type?this.endHour:void 0},minMinute(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour?this.startMinute:0:"time"===this.type?this.hour===this.startHour?this.startMinute:0:void 0},maxMinute(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour?this.endMinute:59:"time"===this.type?this.hour===this.endHour?this.endMinute:59:void 0},minSecond(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:"time"===this.type?this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:void 0},maxSecond(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:"time"===this.type?this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:void 0},selectTimeText:()=>io("uni-datetime-picker.selectTime"),okText:()=>io("uni-datetime-picker.ok"),clearText:()=>io("uni-datetime-picker.clear"),cancelText:()=>io("uni-datetime-picker.cancel")},mounted(){},methods:{lessThanTen:e=>e<10?"0"+e:e,parseTimeType(e){if(e){let t=e.split(":");this.hour=Number(t[0]),this.minute=Number(t[1]),this.second=Number(t[2])}},initPickerValue(e){let t=null;e?t=this.compareValueWithStartAndEnd(e,this.start,this.end):(t=Date.now(),t=this.compareValueWithStartAndEnd(t,this.start,this.end)),this.parseValue(t)},compareValueWithStartAndEnd(e,t,n){let i=null;return e=this.superTimeStamp(e),t=this.superTimeStamp(t),n=this.superTimeStamp(n),i=t&&n?e<t?new Date(t):e>n?new Date(n):new Date(e):t&&!n?t<=e?new Date(e):new Date(t):!t&&n?e<=n?new Date(e):new Date(n):new Date(e),i},superTimeStamp(e){let t="";if("time"===this.type&&e&&"string"==typeof e){const e=new Date;t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "}return Number(e)&&NaN!==typeof e&&(e=parseInt(e),t=0),this.createTimeStamp(t+e)},parseValue(e){if(e){if("time"===this.type&&"string"==typeof e)this.parseTimeType(e);else{let t=null;t=new Date(e),"time"!==this.type&&(this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate()),"date"!==this.type&&(this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds())}this.hideSecond&&(this.second=0)}},parseDatetimeRange(e,t){if(!e)return"start"===t&&(this.startYear=1920,this.startMonth=1,this.startDay=1,this.startHour=0,this.startMinute=0,this.startSecond=0),void("end"===t&&(this.endYear=2120,this.endMonth=12,this.endDay=31,this.endHour=23,this.endMinute=59,this.endSecond=59));if("time"===this.type){const n=e.split(":");this[t+"Hour"]=Number(n[0]),this[t+"Minute"]=Number(n[1]),this[t+"Second"]=Number(n[2])}else{if(!e)return void("start"===t?this.startYear=this.year-60:this.endYear=this.year+60);Number(e)&&NaN!==Number(e)&&(e=parseInt(e));const n=/[0-9]:[0-9]/;"datetime"!==this.type||"end"!==t||"string"!=typeof e||n.test(e)||(e+=" 23:59:59");const i=new Date(e);this[t+"Year"]=i.getFullYear(),this[t+"Month"]=i.getMonth()+1,this[t+"Day"]=i.getDate(),"datetime"===this.type&&(this[t+"Hour"]=i.getHours(),this[t+"Minute"]=i.getMinutes(),this[t+"Second"]=i.getSeconds())}},getCurrentRange(e){const t=[];for(let n=this["min"+this.capitalize(e)];n<=this["max"+this.capitalize(e)];n++)t.push(n);return t},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),checkValue(e,t,n){-1===n.indexOf(t)&&(this[e]=n[0])},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),fixIosDateFormat:e=>("string"==typeof e&&(e=e.replace(/-/g,"/")),e),createTimeStamp(e){if(e)return"number"==typeof e?e:(e=e.replace(/-/g,"/"),"date"===this.type&&(e+=" 00:00:00"),Date.parse(e))},createDomSting(){const e=this.year+"-"+this.lessThanTen(this.month)+"-"+this.lessThanTen(this.day);let t=this.lessThanTen(this.hour)+":"+this.lessThanTen(this.minute);return this.hideSecond||(t=t+":"+this.lessThanTen(this.second)),"date"===this.type?e:"time"===this.type?t:e+" "+t},initTime(e=!0){this.time=this.createDomSting(),e&&("timestamp"===this.returnType&&"time"!==this.type?(this.$emit("change",this.createTimeStamp(this.time)),this.$emit("input",this.createTimeStamp(this.time)),this.$emit("update:modelValue",this.createTimeStamp(this.time))):(this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time)))},bindDateChange(e){const t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},bindTimeChange(e){const t=e.detail.value;this.hour=this.hours[t[0]],this.minute=this.minutes[t[1]],this.second=this.seconds[t[2]]},initTimePicker(){if(this.disabled)return;const e=this.fixIosDateFormat(this.value);this.initPickerValue(e),this.visible=!this.visible},tiggerTimePicker(e){this.visible=!this.visible},clearTime(){this.time="",this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time),this.tiggerTimePicker()},setTime(){this.initTime(),this.tiggerTimePicker()}}};const oo=o(ro,[["render",function(t,n,i,r,o,s){return e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker"},[e.createElementVNode("view",{onClick:n[0]||(n[0]=(...e)=>s.initTimePicker&&s.initTimePicker(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-datetime-picker-timebox-pointer",{"uni-datetime-picker-disabled":i.disabled,"uni-datetime-picker-timebox":i.border}])},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(o.time),1),o.time?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker-time"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(s.selectTimeText),1)]))],2)]),!0)]),o.visible?(e.openBlock(),e.createElementBlock("view",{key:0,id:"mask",class:"uni-datetime-picker-mask",onClick:n[1]||(n[1]=(...e)=>s.tiggerTimePicker&&s.tiggerTimePicker(...e))})):e.createCommentVNode("",!0),o.visible?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-datetime-picker-popup",[o.dateShow&&o.timeShow?"":"fix-nvue-height"]]),style:e.normalizeStyle(o.fixNvueBug)},[e.createElementVNode("view",{class:"uni-title"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(s.selectTimeText),1)]),o.dateShow?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:"uni-datetime-picker-view","indicator-style":o.indicatorStyle,value:s.ymd,onChange:n[2]||(n[2]=(...e)=>s.bindDateChange&&s.bindDateChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.years,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:n},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(s.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.months,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:n},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(s.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.days,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:n},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(s.lessThanTen(t)),1)])))),128))])],40,["indicator-style","value"]),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-left"},"-"),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-right"},"-")])):e.createCommentVNode("",!0),o.timeShow?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:e.normalizeClass(["uni-datetime-picker-view",[i.hideSecond?"time-hide-second":""]]),"indicator-style":o.indicatorStyle,value:s.hms,onChange:n[3]||(n[3]=(...e)=>s.bindTimeChange&&s.bindTimeChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.hours,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:n},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(s.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.minutes,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:n},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(s.lessThanTen(t)),1)])))),128))]),i.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("picker-view-column",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.seconds,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:n},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(s.lessThanTen(t)),1)])))),128))]))],42,["indicator-style","value"]),e.createElementVNode("text",{class:e.normalizeClass(["uni-datetime-picker-sign",[i.hideSecond?"sign-center":"sign-left"]])},":",2),i.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-datetime-picker-sign sign-right"},":"))])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-datetime-picker-btn"},[e.createElementVNode("view",{onClick:n[4]||(n[4]=(...e)=>s.clearTime&&s.clearTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(s.clearText),1)]),e.createElementVNode("view",{class:"uni-datetime-picker-btn-group"},[e.createElementVNode("view",{class:"uni-datetime-picker-cancel",onClick:n[5]||(n[5]=(...e)=>s.tiggerTimePicker&&s.tiggerTimePicker(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(s.cancelText),1)]),e.createElementVNode("view",{onClick:n[6]||(n[6]=(...e)=>s.setTime&&s.setTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(s.okText),1)])])])],6)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-f65e68d4"]]),{t:so}=Be(no),ao={components:{calendarItem:to,timePicker:oo},props:{date:{type:String,default:""},defTime:{type:[String,Object],default:""},selectableTimes:{type:[Object],default:()=>({})},selected:{type:Array,default:()=>[]},lunar:{type:Boolean,default:!1},startDate:{type:String,default:""},endDate:{type:String,default:""},range:{type:Boolean,default:!1},typeHasTime:{type:Boolean,default:!1},insert:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},clearDate:{type:Boolean,default:!0},left:{type:Boolean,default:!0},right:{type:Boolean,default:!0},checkHover:{type:Boolean,default:!0},hideSecond:{type:[Boolean],default:!1},pleStatus:{type:Object,default:()=>({before:"",after:"",data:[],fulldate:""})}},data:()=>({show:!1,weeks:[],calendar:{},nowDate:"",aniMaskShow:!1,firstEnter:!0,time:"",timeRange:{startTime:"",endTime:""},tempSingleDate:"",tempRange:{before:"",after:""}}),watch:{date:{immediate:!0,handler(e,t){this.range||(this.tempSingleDate=e,setTimeout((()=>{this.init(e)}),100))}},defTime:{immediate:!0,handler(e,t){this.range?(this.timeRange.startTime=e.start,this.timeRange.endTime=e.end):this.time=e}},startDate(e){this.cale.resetSatrtDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks},endDate(e){this.cale.resetEndDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks},selected(e){this.cale.setSelectInfo(this.nowDate.fullDate,e),this.weeks=this.cale.weeks},pleStatus:{immediate:!0,handler(e,t){const{before:n,after:i,fulldate:r,which:o}=e;this.tempRange.before=n,this.tempRange.after=i,setTimeout((()=>{if(r)if(this.cale.setHoverMultiple(r),n&&i){if(this.cale.lastHover=!0,this.rangeWithinMonth(i,n))return;this.setDate(n)}else this.cale.setMultiple(r),this.setDate(this.nowDate.fullDate),this.calendar.fullDate="",this.cale.lastHover=!1;else this.cale.setDefaultMultiple(n,i),"left"===o?(this.setDate(n),this.weeks=this.cale.weeks):(this.setDate(i),this.weeks=this.cale.weeks),this.cale.lastHover=!0}),16)}}},computed:{reactStartTime(){return(this.range?this.tempRange.before:this.calendar.fullDate)===this.startDate?this.selectableTimes.start:""},reactEndTime(){return(this.range?this.tempRange.after:this.calendar.fullDate)===this.endDate?this.selectableTimes.end:""},selectDateText:()=>so("uni-datetime-picker.selectDate"),startDateText(){return this.startPlaceholder||so("uni-datetime-picker.startDate")},endDateText(){return this.endPlaceholder||so("uni-datetime-picker.endDate")},okText:()=>so("uni-datetime-picker.ok"),yearText:()=>so("uni-datetime-picker.year"),monthText:()=>so("uni-datetime-picker.month"),MONText:()=>so("uni-calender.MON"),TUEText:()=>so("uni-calender.TUE"),WEDText:()=>so("uni-calender.WED"),THUText:()=>so("uni-calender.THU"),FRIText:()=>so("uni-calender.FRI"),SATText:()=>so("uni-calender.SAT"),SUNText:()=>so("uni-calender.SUN"),confirmText:()=>so("uni-calender.confirm")},created(){this.cale=new eo({selected:this.selected,startDate:this.startDate,endDate:this.endDate,range:this.range}),this.init(this.date)},methods:{leaveCale(){this.firstEnter=!0},handleMouse(e){if(e.disable)return;if(this.cale.lastHover)return;let{before:t,after:n}=this.cale.multipleStatus;t&&(this.calendar=e,this.cale.setHoverMultiple(this.calendar.fullDate),this.weeks=this.cale.weeks,this.firstEnter&&(this.$emit("firstEnterCale",this.cale.multipleStatus),this.firstEnter=!1))},rangeWithinMonth(e,t){const[n,i]=e.split("-"),[r,o]=t.split("-");return n===r&&i===o},clean(){this.close()},maskClick(){this.$emit("maskClose")},clearCalender(){this.range?(this.timeRange.startTime="",this.timeRange.endTime="",this.tempRange.before="",this.tempRange.after="",this.cale.multipleStatus.before="",this.cale.multipleStatus.after="",this.cale.multipleStatus.data=[],this.cale.lastHover=!1):(this.time="",this.tempSingleDate=""),this.calendar.fullDate="",this.setDate()},bindDateChange(e){const t=e.detail.value+"-1";this.init(t)},init(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.calendar=this.cale.getInfo(e)},open(){this.clearDate&&!this.insert&&(this.cale.cleanMultipleStatus(),this.init(this.date)),this.show=!0,this.$nextTick((()=>{setTimeout((()=>{this.aniMaskShow=!0}),50)}))},close(){this.aniMaskShow=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1,this.$emit("close")}),300)}))},confirm(){this.setEmit("confirm"),this.close()},change(){this.insert&&this.setEmit("change")},monthSwitch(){let{year:e,month:t}=this.nowDate;this.$emit("monthSwitch",{year:e,month:Number(t)})},setEmit(e){let{year:t,month:n,date:i,fullDate:r,lunar:o,extraInfo:s}=this.calendar;this.$emit(e,{range:this.cale.multipleStatus,year:t,month:n,date:i,time:this.time,timeRange:this.timeRange,fulldate:r,lunar:o,extraInfo:s||{}})},choiceDate(e){if(e.disable)return;this.calendar=e,this.calendar.userChecked=!0,this.cale.setMultiple(this.calendar.fullDate,!0),this.weeks=this.cale.weeks,this.tempSingleDate=this.calendar.fullDate,this.cale.multipleStatus.before;const t=new Date(this.cale.multipleStatus.before).getTime(),n=new Date(this.cale.multipleStatus.after).getTime();t>n&&n?(this.tempRange.before=this.cale.multipleStatus.after,this.tempRange.after=this.cale.multipleStatus.before):(this.tempRange.before=this.cale.multipleStatus.before,this.tempRange.after=this.cale.multipleStatus.after),this.change()},backtoday(){let e=this.cale.getDate(new Date).fullDate;this.init(e),this.change()},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),pre(){const e=this.cale.getDate(this.nowDate.fullDate,-1,"month").fullDate;this.setDate(e),this.monthSwitch()},next(){const e=this.cale.getDate(this.nowDate.fullDate,1,"month").fullDate;this.setDate(e),this.monthSwitch()},setDate(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e)}}};const lo=o(ao,[["render",function(t,n,r,o,a,l){const c=e.resolveComponent("calendar-item"),u=e.resolveComponent("time-picker"),d=i(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"uni-calendar",onMouseleave:n[9]||(n[9]=(...e)=>l.leaveCale&&l.leaveCale(...e))},[!r.insert&&a.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-calendar__mask",{"uni-calendar--mask-show":a.aniMaskShow}]),onClick:n[0]||(n[0]=e=>{l.clean(),l.maskClick()})},null,2)):e.createCommentVNode("",!0),r.insert||a.show?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-calendar__content",{"uni-calendar--fixed":!r.insert,"uni-calendar--ani-show":a.aniMaskShow,"uni-calendar__content-mobile":a.aniMaskShow}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar__header",{"uni-calendar__header-mobile":!r.insert}])},[r.left?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-calendar__header-btn-box",onClick:n[1]||(n[1]=e.withModifiers(((...e)=>l.pre&&l.pre(...e)),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--left"})])):e.createCommentVNode("",!0),e.createElementVNode("picker",{mode:"date",value:r.date,fields:"month",onChange:n[2]||(n[2]=(...e)=>l.bindDateChange&&l.bindDateChange(...e))},[e.createElementVNode("text",{class:"uni-calendar__header-text"},e.toDisplayString((a.nowDate.year||"")+l.yearText+(a.nowDate.month||"")+l.monthText),1)],40,["value"]),r.right?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-calendar__header-btn-box",onClick:n[3]||(n[3]=e.withModifiers(((...e)=>l.next&&l.next(...e)),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--right"})])):e.createCommentVNode("",!0),r.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"dialog-close",onClick:n[4]||(n[4]=(...e)=>l.clean&&l.clean(...e))},[e.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),e.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})]))],2),e.createElementVNode("view",{class:"uni-calendar__box"},[r.showMonth?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-calendar__box-bg"},[e.createElementVNode("text",{class:"uni-calendar__box-bg-text"},e.toDisplayString(a.nowDate.month),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-calendar__weeks",style:{"padding-bottom":"7px"}},[e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(l.SUNText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(l.MONText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(l.TUEText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(l.WEDText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(l.THUText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(l.FRIText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(l.SATText),1)])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.weeks,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks",key:n},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks-item",key:n},[e.createVNode(c,{class:"uni-calendar-item--hook",weeks:t,calendar:a.calendar,selected:r.selected,lunar:r.lunar,checkHover:r.range,onChange:l.choiceDate,onHandleMouse:l.handleMouse},null,8,["weeks","calendar","selected","lunar","checkHover","onChange","onHandleMouse"])])))),128))])))),128))]),r.insert||r.range||!r.typeHasTime?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed uni-calendar--fixed-top",style:{padding:"0 80px"}},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(a.tempSingleDate?a.tempSingleDate:l.selectDateText),1),e.createVNode(u,{type:"time",start:l.reactStartTime,end:l.reactEndTime,modelValue:a.time,"onUpdate:modelValue":n[5]||(n[5]=e=>a.time=e),disabled:!a.tempSingleDate,border:!1,"hide-second":r.hideSecond,class:"time-picker-style"},null,8,["start","end","modelValue","disabled","hide-second"])])),!r.insert&&r.range&&r.typeHasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-changed uni-calendar--fixed-top"},[e.createElementVNode("view",{class:"uni-date-changed--time-start"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(a.tempRange.before?a.tempRange.before:l.startDateText),1),e.createVNode(u,{type:"time",start:l.reactStartTime,modelValue:a.timeRange.startTime,"onUpdate:modelValue":n[6]||(n[6]=e=>a.timeRange.startTime=e),border:!1,"hide-second":r.hideSecond,disabled:!a.tempRange.before,class:"time-picker-style"},null,8,["start","modelValue","hide-second","disabled"])]),e.createElementVNode("view",{style:{"line-height":"50px"}},[e.createVNode(d,{type:"arrowthinright",color:"#999"})]),e.createElementVNode("view",{class:"uni-date-changed--time-end"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(a.tempRange.after?a.tempRange.after:l.endDateText),1),e.createVNode(u,{type:"time",end:l.reactEndTime,modelValue:a.timeRange.endTime,"onUpdate:modelValue":n[7]||(n[7]=e=>a.timeRange.endTime=e),border:!1,"hide-second":r.hideSecond,disabled:!a.tempRange.after,class:"time-picker-style"},null,8,["end","modelValue","hide-second","disabled"])])])):e.createCommentVNode("",!0),r.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date-changed uni-date-btn--ok"},[e.createElementVNode("view",{class:"uni-datetime-picker--btn",onClick:n[8]||(n[8]=(...e)=>l.confirm&&l.confirm(...e))},e.toDisplayString(l.confirmText),1)]))],2)):e.createCommentVNode("",!0)],32)}],["__scopeId","data-v-799e5252"]]),{t:co}=Be(no),uo={name:"UniDatetimePicker",options:{virtualHost:!0},components:{calendar:lo,timePicker:oo},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},data:()=>({isRange:!1,hasTime:!1,mobileRange:!1,singleVal:"",tempSingleDate:"",defSingleDate:"",time:"",caleRange:{startDate:"",startTime:"",endDate:"",endTime:""},range:{startDate:"",endDate:""},tempRange:{startDate:"",startTime:"",endDate:"",endTime:""},startMultipleStatus:{before:"",after:"",data:[],fulldate:""},endMultipleStatus:{before:"",after:"",data:[],fulldate:""},visible:!1,popup:!1,popover:null,isEmitValue:!1,isPhone:!1,isFirstShow:!0}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number,Array,Date],default:""},modelValue:{type:[String,Number,Array,Date],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},placeholder:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},rangeSeparator:{type:String,default:"-"},border:{type:[Boolean],default:!0},disabled:{type:[Boolean],default:!1},clearIcon:{type:[Boolean],default:!0},hideSecond:{type:[Boolean],default:!1}},watch:{type:{immediate:!0,handler(e,t){-1!==e.indexOf("time")?this.hasTime=!0:this.hasTime=!1,-1!==e.indexOf("range")?this.isRange=!0:this.isRange=!1}},modelValue:{immediate:!0,handler(e,t){this.isEmitValue?this.isEmitValue=!1:this.initPicker(e)}},start:{immediate:!0,handler(e,t){if(!e)return;const{defDate:n,defTime:i}=this.parseDate(e);this.caleRange.startDate=n,this.hasTime&&(this.caleRange.startTime=i)}},end:{immediate:!0,handler(e,t){if(!e)return;const{defDate:n,defTime:i}=this.parseDate(e);this.caleRange.endDate=n,this.hasTime&&(this.caleRange.endTime=i)}}},computed:{reactStartTime(){return(this.isRange?this.tempRange.startDate:this.tempSingleDate)===this.caleRange.startDate?this.caleRange.startTime:""},reactEndTime(){return(this.isRange?this.tempRange.endDate:this.tempSingleDate)===this.caleRange.endDate?this.caleRange.endTime:""},reactMobDefTime(){const e={start:this.tempRange.startTime,end:this.tempRange.endTime};return this.isRange?e:this.time},mobSelectableTime(){return{start:this.caleRange.startTime,end:this.caleRange.endTime}},datePopupWidth(){return this.isRange?653:301},singlePlaceholderText(){return this.placeholder||("date"===this.type?this.selectDateText:co("uni-datetime-picker.selectDateTime"))},startPlaceholderText(){return this.startPlaceholder||this.startDateText},endPlaceholderText(){return this.endPlaceholder||this.endDateText},selectDateText:()=>co("uni-datetime-picker.selectDate"),selectTimeText:()=>co("uni-datetime-picker.selectTime"),startDateText(){return this.startPlaceholder||co("uni-datetime-picker.startDate")},startTimeText:()=>co("uni-datetime-picker.startTime"),endDateText(){return this.endPlaceholder||co("uni-datetime-picker.endDate")},endTimeText:()=>co("uni-datetime-picker.endTime"),okText:()=>co("uni-datetime-picker.ok"),clearText:()=>co("uni-datetime-picker.clear"),showClearIcon(){const{clearIcon:e,disabled:t,singleVal:n,range:i}=this;return e&&!t&&(n||i.startDate&&i.endDate)}},created(){},mounted(){this.platform()},methods:{initPicker(e){if(!e||Array.isArray(e)&&!e.length)this.$nextTick((()=>{this.clear(!1)}));else if(Array.isArray(e)||this.isRange){const[t,n]=e;if(!t&&!n)return;const i=this.parseDate(t),r=this.parseDate(n),o=i.defDate,s=r.defDate;this.range.startDate=this.tempRange.startDate=o,this.range.endDate=this.tempRange.endDate=s,this.hasTime&&(this.range.startDate=i.defDate+" "+i.defTime,this.range.endDate=r.defDate+" "+r.defTime,this.tempRange.startTime=i.defTime,this.tempRange.endTime=r.defTime);const a={before:i.defDate,after:r.defDate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,a,{which:"right"}),this.endMultipleStatus=Object.assign({},this.endMultipleStatus,a,{which:"left"})}else{const{defDate:t,defTime:n}=this.parseDate(e);this.singleVal=t,this.tempSingleDate=t,this.defSingleDate=t,this.hasTime&&(this.singleVal=t+" "+n,this.time=n)}},updateLeftCale(e){const t=this.$refs.left;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.left.nowDate.fullDate)},updateRightCale(e){const t=this.$refs.right;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.right.nowDate.fullDate)},platform(){const e=uni.getSystemInfoSync();this.isPhone=e.windowWidth<=500,this.windowWidth=e.windowWidth},show(e){if(this.disabled)return;if(this.platform(),this.isPhone)return void this.$refs.mobile.open();this.popover={top:"10px"};uni.createSelectorQuery().in(this).select(".uni-date-editor").boundingClientRect((e=>{this.windowWidth-e.left<this.datePopupWidth&&(this.popover.right=0)})).exec(),setTimeout((()=>{if(this.popup=!this.popup,!this.isPhone&&this.isRange&&this.isFirstShow){this.isFirstShow=!1;const{startDate:e,endDate:t}=this.range;e&&t?this.diffDate(e,t)<30&&this.$refs.right.next():(this.$refs.right.next(),this.$refs.right.cale.lastHover=!1)}}),50)},close(){setTimeout((()=>{this.popup=!1,this.$emit("maskClick",this.value),this.$refs.mobile.close()}),20)},setEmit(e){"timestamp"!==this.returnType&&"date"!==this.returnType||(Array.isArray(e)?(this.hasTime||(e[0]=e[0]+" 00:00:00",e[1]=e[1]+" 00:00:00"),e[0]=this.createTimestamp(e[0]),e[1]=this.createTimestamp(e[1]),"date"===this.returnType&&(e[0]=new Date(e[0]),e[1]=new Date(e[1]))):(this.hasTime||(e+=" 00:00:00"),e=this.createTimestamp(e),"date"===this.returnType&&(e=new Date(e)))),this.$emit("change",e),this.$emit("input",e),this.$emit("update:modelValue",e),this.isEmitValue=!0},createTimestamp(e){return e=this.fixIosDateFormat(e),Date.parse(new Date(e))},singleChange(e){this.tempSingleDate=e.fulldate,this.hasTime||this.confirmSingleChange()},confirmSingleChange(){this.tempSingleDate?(this.hasTime?this.singleVal=this.tempSingleDate+" "+(this.time?this.time:"00:00:00"):this.singleVal=this.tempSingleDate,this.setEmit(this.singleVal),this.popup=!1):this.popup=!1},leftChange(e){const{before:t,after:n}=e.range;this.rangeChange(t,n);const i={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,i)},rightChange(e){const{before:t,after:n}=e.range;this.rangeChange(t,n);const i={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.endMultipleStatus=Object.assign({},this.endMultipleStatus,i)},mobileChange(e){if(this.isRange){const{before:t,after:n}=e.range;if(this.handleStartAndEnd(t,n,!0),this.hasTime){const{startTime:t,endTime:n}=e.timeRange;this.tempRange.startTime=t,this.tempRange.endTime=n}this.confirmRangeChange()}else this.hasTime?this.singleVal=e.fulldate+" "+e.time:this.singleVal=e.fulldate,this.setEmit(this.singleVal);this.$refs.mobile.close()},rangeChange(e,t){e&&t&&(this.handleStartAndEnd(e,t,!0),this.hasTime||this.confirmRangeChange())},confirmRangeChange(){if(!this.tempRange.startDate&&!this.tempRange.endDate)return void(this.popup=!1);let e,t;this.hasTime?(e=this.range.startDate=this.tempRange.startDate+" "+(this.tempRange.startTime?this.tempRange.startTime:"00:00:00"),t=this.range.endDate=this.tempRange.endDate+" "+(this.tempRange.endTime?this.tempRange.endTime:"00:00:00")):(e=this.range.startDate=this.tempRange.startDate,t=this.range.endDate=this.tempRange.endDate);const n=[e,t];this.setEmit(n),this.popup=!1},handleStartAndEnd(e,t,n=!1){if(!e||!t)return;const i=n?"tempRange":"range";this.dateCompare(e,t)?(this[i].startDate=e,this[i].endDate=t):(this[i].startDate=t,this[i].endDate=e)},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),diffDate(e,t){e=new Date(e.replace("-","/").replace("-","/"));const n=((t=new Date(t.replace("-","/").replace("-","/")))-e)/864e5;return Math.abs(n)},clear(e=!0){this.isRange?(this.range.startDate="",this.range.endDate="",this.tempRange.startDate="",this.tempRange.startTime="",this.tempRange.endDate="",this.tempRange.endTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():(this.$refs.left&&this.$refs.left.clearCalender(),this.$refs.right&&this.$refs.right.clearCalender(),this.$refs.right&&this.$refs.right.next()),e&&(this.$emit("change",[]),this.$emit("input",[]),this.$emit("update:modelValue",[]))):(this.singleVal="",this.tempSingleDate="",this.time="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():this.$refs.pcSingle&&this.$refs.pcSingle.clearCalender(),e&&(this.$emit("change",""),this.$emit("input",""),this.$emit("update:modelValue","")))},parseDate(e){e=this.fixIosDateFormat(e);const t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),o=t.getHours(),s=t.getMinutes(),a=t.getSeconds();return{defDate:n+"-"+this.lessTen(i)+"-"+this.lessTen(r),defTime:this.lessTen(o)+":"+this.lessTen(s)+(this.hideSecond?"":":"+this.lessTen(a))}},lessTen:e=>e<10?"0"+e:e,fixIosDateFormat:e=>("string"==typeof e&&(e=e.replace(/-/g,"/")),e),leftMonthSwitch(e){},rightMonthSwitch(e){}}};const ho=o(uo,[["render",function(t,n,r,o,a,l){const c=i(e.resolveDynamicComponent("uni-icons"),s),u=e.resolveComponent("time-picker"),d=e.resolveComponent("calendar");return e.openBlock(),e.createElementBlock("view",{class:"uni-date"},[e.createElementVNode("view",{class:"uni-date-editor",onClick:n[4]||(n[4]=(...e)=>l.show&&l.show(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-date-editor--x",{"uni-date-editor--x__disabled":r.disabled,"uni-date-x--border":r.border}])},[a.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-x uni-date-range"},[e.createVNode(c,{type:"calendar",color:"#c0c4cc",size:"22"}),e.withDirectives(e.createElementVNode("input",{class:"uni-date__x-input t-c",type:"text","onUpdate:modelValue":n[1]||(n[1]=e=>a.range.startDate=e),placeholder:l.startPlaceholderText,disabled:!0},null,8,["placeholder"]),[[e.vModelText,a.range.startDate]]),e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:""},e.toDisplayString(r.rangeSeparator),1)]),!0),e.withDirectives(e.createElementVNode("input",{class:"uni-date__x-input t-c",type:"text","onUpdate:modelValue":n[2]||(n[2]=e=>a.range.endDate=e),placeholder:l.endPlaceholderText,disabled:!0},null,8,["placeholder"]),[[e.vModelText,a.range.endDate]])])):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-x uni-date-single"},[e.createVNode(c,{type:"calendar",color:"#c0c4cc",size:"22"}),e.withDirectives(e.createElementVNode("input",{class:"uni-date__x-input",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>a.singleVal=e),placeholder:l.singlePlaceholderText,disabled:!0},null,8,["placeholder"]),[[e.vModelText,a.singleVal]])])),l.showClearIcon?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date__icon-clear",onClick:n[3]||(n[3]=e.withModifiers(((...e)=>l.clear&&l.clear(...e)),["stop"]))},[e.createVNode(c,{type:"clear",color:"#c0c4cc",size:"24"})])):e.createCommentVNode("",!0)],2)]),!0)]),e.withDirectives(e.createElementVNode("view",{class:"uni-date-mask",onClick:n[5]||(n[5]=(...e)=>l.close&&l.close(...e))},null,512),[[e.vShow,a.popup]]),a.isPhone?e.createCommentVNode("",!0):e.withDirectives((e.openBlock(),e.createElementBlock("view",{key:0,ref:"datePicker",class:"uni-date-picker__container"},[a.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-range--x",style:e.normalizeStyle(a.popover)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),a.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-x-header uni-date-changed"},[e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":n[10]||(n[10]=e=>a.tempRange.startDate=e),placeholder:l.startDateText},null,8,["placeholder"]),[[e.vModelText,a.tempRange.startDate]]),e.createVNode(u,{type:"time",modelValue:a.tempRange.startTime,"onUpdate:modelValue":n[12]||(n[12]=e=>a.tempRange.startTime=e),start:l.reactStartTime,border:!1,disabled:!a.tempRange.startDate,hideSecond:r.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":n[11]||(n[11]=e=>a.tempRange.startTime=e),placeholder:l.startTimeText,disabled:!a.tempRange.startDate},null,8,["placeholder","disabled"]),[[e.vModelText,a.tempRange.startTime]])])),_:1},8,["modelValue","start","disabled","hideSecond"])]),e.createVNode(c,{type:"arrowthinright",color:"#999",style:{"line-height":"40px"}}),e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":n[13]||(n[13]=e=>a.tempRange.endDate=e),placeholder:l.endDateText},null,8,["placeholder"]),[[e.vModelText,a.tempRange.endDate]]),e.createVNode(u,{type:"time",modelValue:a.tempRange.endTime,"onUpdate:modelValue":n[15]||(n[15]=e=>a.tempRange.endTime=e),end:l.reactEndTime,border:!1,disabled:!a.tempRange.endDate,hideSecond:r.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":n[14]||(n[14]=e=>a.tempRange.endTime=e),placeholder:l.endTimeText,disabled:!a.tempRange.endDate},null,8,["placeholder","disabled"]),[[e.vModelText,a.tempRange.endTime]])])),_:1},8,["modelValue","end","disabled","hideSecond"])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"popup-x-body"},[e.createVNode(d,{ref:"left",showMonth:!1,"start-date":a.caleRange.startDate,"end-date":a.caleRange.endDate,range:!0,onChange:l.leftChange,pleStatus:a.endMultipleStatus,onFirstEnterCale:l.updateRightCale,onMonthSwitch:l.leftMonthSwitch,style:{padding:"0 8px"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale","onMonthSwitch"]),e.createVNode(d,{ref:"right",showMonth:!1,"start-date":a.caleRange.startDate,"end-date":a.caleRange.endDate,range:!0,onChange:l.rightChange,pleStatus:a.startMultipleStatus,onFirstEnterCale:l.updateLeftCale,onMonthSwitch:l.rightMonthSwitch,style:{padding:"0 8px","border-left":"1px solid #F1F1F1"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale","onMonthSwitch"])]),a.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{class:"",onClick:n[16]||(n[16]=(...e)=>l.clear&&l.clear(...e))},e.toDisplayString(l.clearText),1),e.createElementVNode("text",{class:"confirm",onClick:n[17]||(n[17]=(...e)=>l.confirmRangeChange&&l.confirmRangeChange(...e))},e.toDisplayString(l.okText),1)])):e.createCommentVNode("",!0)],4)):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-single--x",style:e.normalizeStyle(a.popover)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),a.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed popup-x-header"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input t-c",type:"text","onUpdate:modelValue":n[6]||(n[6]=e=>a.tempSingleDate=e),placeholder:l.selectDateText},null,8,["placeholder"]),[[e.vModelText,a.tempSingleDate]]),e.createVNode(u,{type:"time",modelValue:a.time,"onUpdate:modelValue":n[8]||(n[8]=e=>a.time=e),border:!1,disabled:!a.tempSingleDate,start:l.reactStartTime,end:l.reactEndTime,hideSecond:r.hideSecond,style:{width:"100%"}},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input t-c",type:"text","onUpdate:modelValue":n[7]||(n[7]=e=>a.time=e),placeholder:l.selectTimeText,disabled:!a.tempSingleDate},null,8,["placeholder","disabled"]),[[e.vModelText,a.time]])])),_:1},8,["modelValue","disabled","start","end","hideSecond"])])):e.createCommentVNode("",!0),e.createVNode(d,{ref:"pcSingle",showMonth:!1,"start-date":a.caleRange.startDate,"end-date":a.caleRange.endDate,date:a.defSingleDate,onChange:l.singleChange,style:{padding:"0 8px"}},null,8,["start-date","end-date","date","onChange"]),a.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{class:"confirm",onClick:n[9]||(n[9]=(...e)=>l.confirmSingleChange&&l.confirmSingleChange(...e))},e.toDisplayString(l.okText),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-date-popper__arrow"})],4))],512)),[[e.vShow,a.popup]]),e.withDirectives(e.createVNode(d,{ref:"mobile",clearDate:!1,date:a.defSingleDate,defTime:l.reactMobDefTime,"start-date":a.caleRange.startDate,"end-date":a.caleRange.endDate,selectableTimes:l.mobSelectableTime,pleStatus:a.endMultipleStatus,showMonth:!1,range:a.isRange,typeHasTime:a.hasTime,insert:!1,hideSecond:r.hideSecond,onConfirm:l.mobileChange,onMaskClose:l.close},null,8,["date","defTime","start-date","end-date","selectableTimes","pleStatus","range","typeHasTime","hideSecond","onConfirm","onMaskClose"]),[[e.vShow,a.isPhone]])])}],["__scopeId","data-v-c896730e"]]),po=Y().userinfo;const fo=o({data:()=>({info:{content:"",happenTime:"",userId:po.id}}),methods:{submit(){n("log","at pages/my/addMor.vue:32",this.info),X("api/memorabilia/add",this.info).then((e=>{n("log","at pages/my/addMor.vue:34",e),uni.navigateBack({delta:1})})).catch((e=>{n("log","at pages/my/addMor.vue:39",e)}))}}},[["render",function(t,n,r,o,s,a){const l=i(e.resolveDynamicComponent("uni-easyinput"),y),c=i(e.resolveDynamicComponent("uni-forms-item"),_),u=i(e.resolveDynamicComponent("uni-datetime-picker"),ho),d=i(e.resolveDynamicComponent("uni-forms"),M);return e.openBlock(),e.createElementBlock("view",null,[e.createVNode(d,null,{default:e.withCtx((()=>[e.createVNode(c,{label:"大事件:"},{default:e.withCtx((()=>[e.createVNode(l,{type:"textarea",placeholder:"请输入内容",modelValue:s.info.content,"onUpdate:modelValue":n[0]||(n[0]=e=>s.info.content=e)},null,8,["modelValue"])])),_:1}),e.createVNode(c,{label:"日期时间:"},{default:e.withCtx((()=>[e.createVNode(u,{type:"datetime","return-type":"timestamp",modelValue:s.info.happenTime,"onUpdate:modelValue":n[1]||(n[1]=e=>s.info.happenTime=e)},null,8,["modelValue"])])),_:1})])),_:1}),e.createElementVNode("button",{type:"primary",onClick:n[2]||(n[2]=(...e)=>a.submit&&a.submit(...e))},"提交")])}]]);__definePage("pages/index/index",h),__definePage("pages/my/my",m),__definePage("pages/index/login",ee),__definePage("pages/index/crop",ye),__definePage("pages/index/register",_e),__definePage("pages/index/mqtt",Ur),__definePage("pages/index/wiki",Jr),__definePage("pages/article/article",Yr),__definePage("pages/my/mor",Xr),__definePage("pages/my/addMor",fo);const mo=["/","/pages/index/index","/pages/my/my","/pages/my/mor","/pages/my/addMor","/pages/index/login","/pages/index/register","/pages/index/wiki","/pages/index/crop","/pages/article/article","/pages/index/mqtt"];const go={onLaunch:function(){!async function(){["navigateTo","redirectTo","reLaunch","switchTab"].forEach((e=>{uni.addInterceptor(e,{invoke(e){const t=e.url.split("?")[0];return mo.includes(t)?(n("log","at router/index.js:36","url",t,e),!0):(uni.showToast({title:"用户没有权限...",duration:2e3,icon:"none"}),!1)},fail:()=>!1})}))}()},onShow:function(){},onHide:function(){}},yo="function"==typeof alert,_o=(e,t,n)=>{const i=e.storage,r=e.key||t.$id,o=yo||(null==n?void 0:n.enforceCustomStorage);if(e.paths){const n=e.paths.reduce(((e,n)=>(e[n]=t.$state[n],e)),{});o&&i?i.setItem(r,JSON.stringify(n)):uni.setStorage({key:r,data:JSON.stringify(n)})}else o&&i?i.setItem(r,JSON.stringify(t.$state)):uni.setStorage({key:r,data:JSON.stringify(t.$state)})};const bo=function(){const t=e.effectScope(!0),n=t.run((()=>e.ref({})));let i=[],r=[];const o=e.markRaw({install(e){R(o),o._a=e,e.provide(L,o),e.config.globalProperties.$pinia=o,r.forEach((e=>i.push(e))),r=[]},use(e){return this._a?i.push(e):r.push(e),this},_p:i,_a:null,_e:t,_s:new Map,state:n});return o}();bo.use((({options:e,store:t})=>{var n,i,r,o,s,a;if(null==(n=e.persist)?void 0:n.enabled){const n=[{key:t.$id,storage:(null==(i=e.persist)?void 0:i.H5Storage)||(null==window?void 0:window.sessionStorage)}],l=(null==(o=null==(r=e.persist)?void 0:r.strategies)?void 0:o.length)?null==(s=e.persist)?void 0:s.strategies:n;l.forEach((n=>{var i,r;const o=n.storage||(null==(i=e.persist)?void 0:i.H5Storage)||(null==window?void 0:window.sessionStorage),s=n.key||t.$id;let a;a=yo||(null==(r=e.persist)?void 0:r.enforceCustomStorage)?o.getItem(s):uni.getStorageSync(s),a&&(t.$patch(JSON.parse(a)),_o(n,t,e.persist))})),t.$subscribe((()=>{l.forEach((n=>{_o(n,t,e.persist)}))}),{detached:!!(null==(a=e.persist)?void 0:a.detached)})}}));const{app:vo,Vuex:wo,Pinia:ko}=function(){const t=e.createVueApp(go);return t.use(bo),t.config.globalProperties.$request=Q,{app:t,pinia:bo}}();uni.Vuex=wo,uni.Pinia=ko,vo.provide("__globalStyles",__uniConfig.styles),vo._component.mpType="app",vo._component.render=()=>{},vo.mount("#app")}(Vue,uni.VueShared);
